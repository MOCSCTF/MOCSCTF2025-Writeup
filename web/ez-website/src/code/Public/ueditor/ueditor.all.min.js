(function(){UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu;window.UE=baidu.editor=window.UE||{};UE.plugins={};UE.commands={};UE.instants={};UE.I18N={};UE._customizeUI={};UE.version="1.4.3";var dom=UE.dom={};var browser=UE.browser=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(a),opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,mac:a.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"};c.gecko=navigator.product=="Gecko"&&!c.webkit&&!c.opera&&!c.ie;var d=0;if(c.ie){var f=a.match(/(?:msie\s([\w.]+))/);var g=a.match(/(?:trident.*rv:([\w.]+))/);if(f&&g&&f[1]&&g[1]){d=Math.max(f[1]*1,g[1]*1)}else if(f&&f[1]){d=f[1]*1}else if(g&&g[1]){d=g[1]*1}else{d=0}c.ie11Compat=document.documentMode==11;c.ie9Compat=document.documentMode==9;c.ie8=!!document.documentMode;c.ie8Compat=document.documentMode==8;c.ie7Compat=d==7&&!document.documentMode||document.documentMode==7;c.ie6Compat=d<7||c.quirks;c.ie9above=d>8;c.ie9below=d<9;c.ie11above=d>10;c.ie11below=d<11}if(c.gecko){var h=a.match(/rv:([\d\.]+)/);if(h){h=h[1].split(".");d=h[0]*1e4+(h[1]||0)*100+(h[2]||0)*1}}if(/chrome\/(\d+\.\d)/i.test(a)){c.chrome=+RegExp["$1"]}if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)){c.safari=+(RegExp["$1"]||RegExp["$2"])}if(c.opera)d=parseFloat(b.version());if(c.webkit)d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]);c.version=d;c.isCompatible=!c.mobile&&(c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||false);return c}();var ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera;var utils=UE.utils={each:function(k,l,m){if(k==null)return;if(k.length===+k.length){for(var n=0,o=k.length;n<o;n++){if(l.call(m,k[n],n,k)===false)return false}}else{for(var p in k){if(k.hasOwnProperty(p)){if(l.call(m,k[p],p,k)===false)return false}}}},makeInstance:function(q){var s=new Function;s.prototype=q;q=new s;s.prototype=null;return q},extend:function(t,u,v){if(u){for(var w in u){if(!v||!t.hasOwnProperty(w)){t[w]=u[w]}}}return t},extend2:function(x){var y=arguments;for(var z=1;z<y.length;z++){var A=y[z];for(var B in A){if(!x.hasOwnProperty(B)){x[B]=A[B]}}}return x},inherits:function(C,D){var E=C.prototype,F=utils.makeInstance(D.prototype);utils.extend(F,E,true);C.prototype=F;return F.constructor=C},bind:function(G,H){return function(){return G.apply(H,arguments)}},defer:function(I,J,K){var L;return function(){if(K){clearTimeout(L)}L=setTimeout(I,J)}},indexOf:function(M,N,O){var P=-1;O=this.isNumber(O)?O:0;this.each(M,function(Q,R){if(R>=O&&Q===N){P=R;return false}});return P},removeItem:function(S,T){for(var U=0,V=S.length;U<V;U++){if(S[U]===T){S.splice(U,1);U--}}},trim:function(W){return W.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(X){if(!X)return{};X=utils.isArray(X)?X:X.split(",");for(var Y=0,Z,$={};Z=X[Y++];){$[Z.toUpperCase()]=$[Z]=1}return $},unhtml:function(_,aa){return _?_.replace(aa||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(ba,ca){if(ca){return ba}else{return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[ba]}}):""},unhtmlForUrl:function(da,ea){return da?da.replace(ea||/[<">']/g,function(fa){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[fa]}):""},html:function(ga){return ga?ga.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(ha){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[ha]}):""},cssStyleToDomStyle:function(){var ia=document.createElement("div").style,ja={float:ia.cssFloat!=undefined?"cssFloat":ia.styleFloat!=undefined?"styleFloat":"float"};return function(ka){return ja[ka]||(ja[ka]=ka.toLowerCase().replace(/-./g,function(la){return la.charAt(1).toUpperCase()}))}}(),loadFile:function(){var ma=[];function na(oa,pa){try{for(var qa=0,ra;ra=ma[qa++];){if(ra.doc===oa&&ra.url==(pa.src||pa.href)){return ra}}}catch(sa){return null}}return function(ta,ua,va){var wa=na(ta,ua);if(wa){if(wa.ready){va&&va()}else{wa.funs.push(va)}return}ma.push({doc:ta,url:ua.src||ua.href,funs:[va]});if(!ta.body){var xa=[];for(var ya in ua){if(ya=="tag")continue;xa.push(ya+'="'+ua[ya]+'"')}ta.write("<"+ua.tag+" "+xa.join(" ")+" ></"+ua.tag+">");return}if(ua.id&&ta.getElementById(ua.id)){return}var za=ta.createElement(ua.tag);delete ua.tag;for(var ya in ua){za.setAttribute(ya,ua[ya])}za.onload=za.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){wa=na(ta,ua);if(wa.funs.length>0){wa.ready=1;for(var Aa;Aa=wa.funs.pop();){Aa()}}za.onload=za.onreadystatechange=null}};za.onerror=function(){throw Error("The load "+(ua.href||ua.src)+" fails,check the url settings of file ueditor.config.js ")};ta.getElementsByTagName("head")[0].appendChild(za)}}(),isEmptyObject:function(Ba){if(Ba==null)return true;if(this.isArray(Ba)||this.isString(Ba))return Ba.length===0;for(var Ca in Ba)if(Ba.hasOwnProperty(Ca))return false;return true},fixColor:function(Da,Ea){if(/color/i.test(Da)&&/rgba?/.test(Ea)){var Fa=Ea.split(",");if(Fa.length>3)return"";Ea="#";for(var Ga=0,Ha;Ha=Fa[Ga++];){Ha=parseInt(Ha.replace(/[^\d]/gi,""),10).toString(16);Ea+=Ha.length==1?"0"+Ha:Ha}Ea=Ea.toUpperCase()}return Ea},optCss:function(Ia){var Ja,Ka,La;Ia=Ia.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(Na,Oa,Pa,Qa){if(Qa.split(" ").length==1){switch(Oa){case"padding":!Ja&&(Ja={});Ja[Pa]=Qa;return"";case"margin":!Ka&&(Ka={});Ka[Pa]=Qa;return"";case"border":return Qa=="initial"?"":Na}}return Na});function Ma(Ra,Sa){if(!Ra){return""}var Ta=Ra.top,Ua=Ra.bottom,Va=Ra.left,Wa=Ra.right,Xa="";if(!Ta||!Va||!Ua||!Wa){for(var Ya in Ra){Xa+=";"+Sa+"-"+Ya+":"+Ra[Ya]+";"}}else{Xa+=";"+Sa+":"+(Ta==Ua&&Ua==Va&&Va==Wa?Ta:Ta==Ua&&Va==Wa?Ta+" "+Va:Va==Wa?Ta+" "+Va+" "+Ua:Ta+" "+Wa+" "+Ua+" "+Va)+";"}return Xa}Ia+=Ma(Ja,"padding")+Ma(Ka,"margin");return Ia.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(Za,$a){return $a?$a+";;":";"})},clone:function(_a,a0){var b0;a0=a0||{};for(var c0 in _a){if(_a.hasOwnProperty(c0)){b0=_a[c0];if(typeof b0=="object"){a0[c0]=utils.isArray(b0)?[]:{};utils.clone(_a[c0],a0[c0])}else{a0[c0]=b0}}}return a0},transUnitToPx:function(d0){if(!/(pt|cm)/.test(d0)){return d0}var e0;d0.replace(/([\d.]+)(\w+)/,function(f0,g0,h0){d0=g0;e0=h0});switch(e0){case"cm":d0=parseFloat(d0)*25;break;case"pt":d0=Math.round(parseFloat(d0)*96/72)}return d0+(d0?"px":"")},domReady:function(){var i0=[];function j0(k0){k0.isReady=true;for(var l0;l0=i0.pop();l0()){}}return function(m0,n0){n0=n0||window;var o0=n0.document;m0&&i0.push(m0);if(o0.readyState==="complete"){j0(o0)}else{o0.isReady&&j0(o0);if(browser.ie&&browser.version!=11){(function(){if(o0.isReady)return;try{o0.documentElement.doScroll("left")}catch(p0){setTimeout(arguments.callee,0);return}j0(o0)})();n0.attachEvent("onload",function(){j0(o0)})}else{o0.addEventListener("DOMContentLoaded",function(){o0.removeEventListener("DOMContentLoaded",arguments.callee,false);j0(o0)},false);n0.addEventListener("load",function(){j0(o0)},false)}}}}(),cssRule:browser.ie&&browser.version!=11?function(q0,r0,s0){var t0,u0;if(r0===undefined||r0&&r0.nodeType&&r0.nodeType==9){s0=r0&&r0.nodeType&&r0.nodeType==9?r0:s0||document;t0=s0.indexList||(s0.indexList={});u0=t0[q0];if(u0!==undefined){return s0.styleSheets[u0].cssText}return undefined}s0=s0||document;t0=s0.indexList||(s0.indexList={});u0=t0[q0];if(r0===""){if(u0!==undefined){s0.styleSheets[u0].cssText="";delete t0[q0];return true}return false}if(u0!==undefined){sheetStyle=s0.styleSheets[u0]}else{sheetStyle=s0.createStyleSheet("",u0=s0.styleSheets.length);t0[q0]=u0}sheetStyle.cssText=r0}:function(v0,w0,x0){var y0,z0;if(w0===undefined||w0&&w0.nodeType&&w0.nodeType==9){x0=w0&&w0.nodeType&&w0.nodeType==9?w0:x0||document;z0=x0.getElementById(v0);return z0?z0.innerHTML:undefined}x0=x0||document;z0=x0.getElementById(v0);if(w0===""){if(z0){z0.parentNode.removeChild(z0);return true}return false}if(z0){z0.innerHTML=w0}else{z0=x0.createElement("style");z0.id=v0;z0.innerHTML=w0;x0.getElementsByTagName("head")[0].appendChild(z0)}},sort:function(A0,B0){B0=B0||function(H0,I0){return H0.localeCompare(I0)};for(var C0=0,D0=A0.length;C0<D0;C0++){for(var E0=C0,F0=A0.length;E0<F0;E0++){if(B0(A0[C0],A0[E0])>0){var G0=A0[C0];A0[C0]=A0[E0];A0[E0]=G0}}}return A0},serializeParam:function(J0){var K0=[];for(var L0 in J0){if(L0=="method"||L0=="timeout"||L0=="async")continue;if(!((typeof J0[L0]).toLowerCase()=="function"||(typeof J0[L0]).toLowerCase()=="object")){K0.push(encodeURIComponent(L0)+"="+encodeURIComponent(J0[L0]))}else if(utils.isArray(J0[L0])){for(var M0=0;M0<J0[L0].length;M0++){K0.push(encodeURIComponent(L0)+"[]="+encodeURIComponent(J0[L0][M0]))}}}return K0.join("&")},formatUrl:function(N0){var O0=N0.replace(/&&/g,"&");O0=O0.replace(/\?&/g,"?");O0=O0.replace(/&$/g,"");O0=O0.replace(/&#/g,"#");O0=O0.replace(/&+/g,"&");return O0},isCrossDomainUrl:function(P0){var Q0=document.createElement("a");Q0.href=P0;if(browser.ie){Q0.href=Q0.href}return!(Q0.protocol==location.protocol&&Q0.hostname==location.hostname&&(Q0.port==location.port||Q0.port=="80"&&location.port==""||Q0.port==""&&location.port=="80"))},clearEmptyAttrs:function(R0){for(var S0 in R0){if(R0[S0]===""){delete R0[S0]}}return R0},str2json:function(T0){if(!utils.isString(T0))return null;if(window.JSON){return JSON.parse(T0)}else{return new Function("return "+utils.trim(T0||""))()}},json2str:function(){if(window.JSON){return JSON.stringify}else{var U0={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function V0(Z0){if(/["\\\x00-\x1f]/.test(Z0)){Z0=Z0.replace(/["\\\x00-\x1f]/g,function($0){var _0=U0[$0];if(_0){return _0}_0=$0.charCodeAt();return"\\u00"+Math.floor(_0/16).toString(16)+(_0%16).toString(16)})}return'"'+Z0+'"'}function W0(ab){var bb=["["],cb=ab.length,db,eb,fb;for(eb=0;eb<cb;eb++){fb=ab[eb];switch(typeof fb){case"undefined":case"function":case"unknown":break;default:if(db){bb.push(",")}bb.push(utils.json2str(fb));db=1}}bb.push("]");return bb.join("")}function X0(gb){return gb<10?"0"+gb:gb}function Y0(hb){return'"'+hb.getFullYear()+"-"+X0(hb.getMonth()+1)+"-"+X0(hb.getDate())+"T"+X0(hb.getHours())+":"+X0(hb.getMinutes())+":"+X0(hb.getSeconds())+'"'}return function(ib){switch(typeof ib){case"undefined":return"undefined";case"number":return isFinite(ib)?String(ib):"null";case"string":return V0(ib);case"boolean":return String(ib);default:if(ib===null){return"null"}else if(utils.isArray(ib)){return W0(ib)}else if(utils.isDate(ib)){return Y0(ib)}else{var jb=["{"],kb=utils.json2str,lb,mb;for(var nb in ib){if(Object.prototype.hasOwnProperty.call(ib,nb)){mb=ib[nb];switch(typeof mb){case"undefined":case"unknown":case"function":break;default:if(lb){jb.push(",")}lb=1;jb.push(kb(nb)+":"+kb(mb))}}}jb.push("}");return jb.join("")}}}}}()};utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(ob){UE.utils["is"+ob]=function(pb){return Object.prototype.toString.apply(pb)=="[object "+ob+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(qb,rb){qb=utils.trim(qb).split(/\s+/);for(var sb=0,tb;tb=qb[sb++];){getListener(this,tb,true).push(rb)}},on:function(ub,vb){return this.addListener(ub,vb)},off:function(wb,xb){return this.removeListener(wb,xb)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(yb,zb){yb=utils.trim(yb).split(/\s+/);for(var Ab=0,Bb;Bb=yb[Ab++];){utils.removeItem(getListener(this,Bb)||[],zb)}},fireEvent:function(){var Cb=arguments[0];Cb=utils.trim(Cb).split(" ");for(var Db=0,Eb;Eb=Cb[Db++];){var Fb=getListener(this,Eb),Gb,Hb,Ib;if(Fb){Ib=Fb.length;while(Ib--){if(!Fb[Ib])continue;Hb=Fb[Ib].apply(this,arguments);if(Hb===true){return Hb}if(Hb!==undefined){Gb=Hb}}}if(Hb=this["on"+Eb.toLowerCase()]){Gb=Hb.apply(this,arguments)}}return Gb}};function getListener(Jb,Kb,Lb){var Mb;Kb=Kb.toLowerCase();return(Mb=Jb.__allListeners||Lb&&(Jb.__allListeners={}))&&(Mb[Kb]||Lb&&(Mb[Kb]=[]))}var dtd=dom.dtd=function(){function Nb(l1){for(var m1 in l1){l1[m1.toUpperCase()]=l1[m1]}return l1}var Ob=utils.extend2;var Pb=Nb({isindex:1,fieldset:1}),Qb=Nb({input:1,button:1,select:1,textarea:1,label:1}),Rb=Ob(Nb({a:1}),Qb),Sb=Ob({iframe:1},Rb),Tb=Nb({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),Ub=Nb({ins:1,del:1,script:1,style:1}),Vb=Ob(Nb({b:1,acronym:1,bdo:1,var:1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),Ub),Wb=Ob(Nb({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),Vb),Xb=Ob(Nb({p:1}),Wb),Yb=Ob(Nb({iframe:1}),Wb,Qb),Zb=Nb({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,var:1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),$b=Ob(Nb({a:0}),Yb),_b=Nb({tr:1}),a1=Nb({"#":1}),b1=Ob(Nb({param:1}),Zb),c1=Ob(Nb({form:1}),Pb,Sb,Tb,Xb),d1=Nb({li:1,ol:1,ul:1}),e1=Nb({style:1,script:1}),f1=Nb({base:1,link:1,meta:1,title:1}),g1=Ob(f1,e1),h1=Nb({head:1,body:1}),i1=Nb({html:1});var j1=Nb({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),k1=Nb({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return Nb({$nonBodyContent:Ob(i1,h1,f1),$block:j1,$inline:$b,$inlineWithA:Ob(Nb({a:1}),$b),$body:Ob(Nb({script:1,style:1}),j1),$cdata:Nb({script:1,style:1}),$empty:k1,$nonChild:Nb({iframe:1,textarea:1}),$listItem:Nb({dd:1,dt:1,li:1}),$list:Nb({ul:1,ol:1,dl:1}),$isNotEmpty:Nb({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:Nb({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1}),$removeEmptyBlock:Nb({p:1,div:1}),$tableContent:Nb({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:Nb({pre:1,script:1,style:1,textarea:1}),html:h1,head:g1,style:a1,script:a1,body:c1,base:{},link:{},meta:{},title:a1,col:{},tr:Nb({td:1,th:1}),img:{},embed:{},colgroup:Nb({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:c1,td:c1,br:{},th:c1,center:c1,kbd:$b,button:Ob(Xb,Tb),basefont:{},h5:$b,h4:$b,samp:$b,h6:$b,ol:d1,h1:$b,h3:$b,option:a1,h2:$b,form:Ob(Pb,Sb,Tb,Xb),select:Nb({optgroup:1,option:1}),font:$b,ins:$b,menu:d1,abbr:$b,label:$b,table:Nb({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:$b,tfoot:_b,cite:$b,li:c1,input:{},iframe:c1,strong:$b,textarea:a1,noframes:c1,big:$b,small:$b,span:Nb({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:$b,dt:$b,sub:$b,optgroup:Nb({option:1}),param:{},bdo:$b,var:$b,div:c1,object:b1,sup:$b,dd:c1,strike:$b,area:{},dir:d1,map:Ob(Nb({area:1,form:1,p:1}),Pb,Ub,Tb),applet:b1,dl:Nb({dt:1,dd:1}),del:$b,isindex:{},fieldset:Ob(Nb({legend:1}),Zb),thead:_b,ul:d1,acronym:$b,b:$b,a:Ob(Nb({a:1}),Yb),blockquote:Ob(Nb({td:1,tr:1,tbody:1,li:1}),c1),caption:$b,i:$b,u:$b,tbody:_b,s:$b,address:Ob(Sb,Xb),tt:$b,legend:$b,q:$b,pre:Ob(Vb,Rb),p:Ob(Nb({a:1}),$b),em:$b,dfn:$b})}();function getDomNode(n1,o1,p1,q1,r1,s1){var t1=q1&&n1[o1],u1;!t1&&(t1=n1[p1]);while(!t1&&(u1=(u1||n1).parentNode)){if(u1.tagName=="BODY"||s1&&!s1(u1)){return null}t1=u1[p1]}if(t1&&r1&&!r1(t1)){return getDomNode(t1,o1,p1,false,r1)}return t1}var attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]);var domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"\ufeff":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(v1,w1){if(v1===w1){return 0}var x1,y1=[v1],z1=[w1];x1=v1;while(x1=x1.parentNode){if(x1===w1){return 10}y1.push(x1)}x1=w1;while(x1=x1.parentNode){if(x1===v1){return 20}z1.push(x1)}y1.reverse();z1.reverse();if(y1[0]!==z1[0]){return 1}var A1=-1;while(A1++,y1[A1]===z1[A1]){}v1=y1[A1];w1=z1[A1];while(v1=v1.nextSibling){if(v1===w1){return 4}}return 2},getNodeIndex:function(B1,C1){var D1=B1,E1=0;while(D1=D1.previousSibling){if(C1&&D1.nodeType==3){if(D1.nodeType!=D1.nextSibling.nodeType){E1++}continue}E1++}return E1},inDoc:function(F1,G1){return domUtils.getPosition(F1,G1)==10},findParent:function(H1,I1,J1){if(H1&&!domUtils.isBody(H1)){H1=J1?H1:H1.parentNode;while(H1){if(!I1||I1(H1)||domUtils.isBody(H1)){return I1&&!I1(H1)&&domUtils.isBody(H1)?null:H1}H1=H1.parentNode}}return null},findParentByTagName:function(K1,L1,M1,N1){L1=utils.listToMap(utils.isArray(L1)?L1:[L1]);return domUtils.findParent(K1,function(O1){return L1[O1.tagName]&&!(N1&&N1(O1))},M1)},findParents:function(P1,Q1,R1,S1){var T1=Q1&&(R1&&R1(P1)||!R1)?[P1]:[];while(P1=domUtils.findParent(P1,R1)){T1.push(P1)}return S1?T1:T1.reverse()},insertAfter:function(U1,V1){return U1.nextSibling?U1.parentNode.insertBefore(V1,U1.nextSibling):U1.parentNode.appendChild(V1)},remove:function(W1,X1){var Y1=W1.parentNode,Z1;if(Y1){if(X1&&W1.hasChildNodes()){while(Z1=W1.firstChild){Y1.insertBefore(Z1,W1)}}Y1.removeChild(W1)}return W1},getNextDomNode:function($1,_1,ac,bc){return getDomNode($1,"firstChild","nextSibling",_1,ac,bc)},getPreDomNode:function(cc,dc,ec,fc){return getDomNode(cc,"lastChild","previousSibling",dc,ec,fc)},isBookmarkNode:function(gc){return gc.nodeType==1&&gc.id&&/^_baidu_bookmark_/i.test(gc.id)},getWindow:function(hc){var ic=hc.ownerDocument||hc;return ic.defaultView||ic.parentWindow},getCommonAncestor:function(jc,kc){if(jc===kc)return jc;var lc=[jc],mc=[kc],nc=jc,oc=-1;while(nc=nc.parentNode){if(nc===kc){return nc}lc.push(nc)}nc=kc;while(nc=nc.parentNode){if(nc===jc)return nc;mc.push(nc)}lc.reverse();mc.reverse();while(oc++,lc[oc]===mc[oc]){}return oc==0?null:lc[oc-1]},clearEmptySibling:function(pc,qc,rc){function sc(tc,uc){var vc;while(tc&&!domUtils.isBookmarkNode(tc)&&(domUtils.isEmptyInlineElement(tc)||!new RegExp("[^\t\n\r"+domUtils.fillChar+"]").test(tc.nodeValue))){vc=tc[uc];domUtils.remove(tc);tc=vc}}!qc&&sc(pc.nextSibling,"nextSibling");!rc&&sc(pc.previousSibling,"previousSibling")},split:function(wc,xc){var yc=wc.ownerDocument;if(browser.ie&&xc==wc.nodeValue.length){var zc=yc.createTextNode("");return domUtils.insertAfter(wc,zc)}var Ac=wc.splitText(xc);if(browser.ie8){var Bc=yc.createTextNode("");domUtils.insertAfter(Ac,Bc);domUtils.remove(Bc)}return Ac},isWhitespace:function(Cc){return!new RegExp("[^ \t\n\r"+domUtils.fillChar+"]").test(Cc.nodeValue)},getXY:function(Dc){var Ec=0,Fc=0;while(Dc.offsetParent){Fc+=Dc.offsetTop;Ec+=Dc.offsetLeft;Dc=Dc.offsetParent}return{x:Ec,y:Fc}},on:function(Gc,Hc,Ic){var Jc=utils.isArray(Hc)?Hc:utils.trim(Hc).split(/\s+/),Kc=Jc.length;if(Kc)while(Kc--){Hc=Jc[Kc];if(Gc.addEventListener){Gc.addEventListener(Hc,Ic,false)}else{if(!Ic._d){Ic._d={els:[]}}var Lc=Hc+Ic.toString(),Mc=utils.indexOf(Ic._d.els,Gc);if(!Ic._d[Lc]||Mc==-1){if(Mc==-1){Ic._d.els.push(Gc)}if(!Ic._d[Lc]){Ic._d[Lc]=function(Nc){return Ic.call(Nc.srcElement,Nc||window.event)}}Gc.attachEvent("on"+Hc,Ic._d[Lc])}}}Gc=null},un:function(Oc,Pc,Qc){var Rc=utils.isArray(Pc)?Pc:utils.trim(Pc).split(/\s+/),Sc=Rc.length;if(Sc)while(Sc--){Pc=Rc[Sc];if(Oc.removeEventListener){Oc.removeEventListener(Pc,Qc,false)}else{var Tc=Pc+Qc.toString();try{Oc.detachEvent("on"+Pc,Qc._d?Qc._d[Tc]:Qc)}catch(Vc){}if(Qc._d&&Qc._d[Tc]){var Uc=utils.indexOf(Qc._d.els,Oc);if(Uc!=-1){Qc._d.els.splice(Uc,1)}Qc._d.els.length==0&&delete Qc._d[Tc]}}}},isSameElement:function(Wc,Xc){if(Wc.tagName!=Xc.tagName){return false}var Yc=Wc.attributes,Zc=Xc.attributes;if(!ie&&Yc.length!=Zc.length){return false}var $c,_c,a2=0,b2=0;for(var c2=0;$c=Yc[c2++];){if($c.nodeName=="style"){if($c.specified){a2++}if(domUtils.isSameStyle(Wc,Xc)){continue}else{return false}}if(ie){if($c.specified){a2++;_c=Zc.getNamedItem($c.nodeName)}else{continue}}else{_c=Xc.attributes[$c.nodeName]}if(!_c.specified||$c.nodeValue!=_c.nodeValue){return false}}if(ie){for(c2=0;_c=Zc[c2++];){if(_c.specified){b2++}}if(a2!=b2){return false}}return true},isSameStyle:function(d2,e2){var f2=d2.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),g2=e2.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){f2=d2.style;g2=e2.style;if(f2.length!=g2.length)return false;for(var h2 in f2){if(/^(\d+|csstext)$/i.test(h2)){continue}if(f2[h2]!=g2[h2]){return false}}return true}if(!f2||!g2){return f2==g2}f2=f2.split(";");g2=g2.split(";");if(f2.length!=g2.length){return false}for(var i2=0,j2;j2=f2[i2++];){if(utils.indexOf(g2,j2)==-1){return false}}return true},isBlockElm:function(k2){return k2.nodeType==1&&(dtd.$block[k2.tagName]||styleBlock[domUtils.getComputedStyle(k2,"display")])&&!dtd.$nonChild[k2.tagName]},isBody:function(l2){return l2&&l2.nodeType==1&&l2.tagName.toLowerCase()=="body"},breakParent:function(m2,n2){var o2,p2=m2,q2=m2,r2,s2;do{p2=p2.parentNode;if(r2){o2=p2.cloneNode(false);o2.appendChild(r2);r2=o2;o2=p2.cloneNode(false);o2.appendChild(s2);s2=o2}else{r2=p2.cloneNode(false);s2=r2.cloneNode(false)}while(o2=q2.previousSibling){r2.insertBefore(o2,r2.firstChild)}while(o2=q2.nextSibling){s2.appendChild(o2)}q2=p2}while(n2!==p2);o2=n2.parentNode;o2.insertBefore(r2,n2);o2.insertBefore(s2,n2);o2.insertBefore(m2,s2);domUtils.remove(n2);return m2},isEmptyInlineElement:function(t2){if(t2.nodeType!=1||!dtd.$removeEmpty[t2.tagName]){return 0}t2=t2.firstChild;while(t2){if(domUtils.isBookmarkNode(t2)){return 0}if(t2.nodeType==1&&!domUtils.isEmptyInlineElement(t2)||t2.nodeType==3&&!domUtils.isWhitespace(t2)){return 0}t2=t2.nextSibling}return 1},trimWhiteTextNode:function(u2){function v2(w2){var x2;while((x2=u2[w2])&&x2.nodeType==3&&domUtils.isWhitespace(x2)){u2.removeChild(x2)}}v2("firstChild");v2("lastChild")},mergeChild:function(y2,z2,A2){var B2=domUtils.getElementsByTagName(y2,y2.tagName.toLowerCase());for(var C2=0,D2;D2=B2[C2++];){if(!D2.parentNode||domUtils.isBookmarkNode(D2)){continue}if(D2.tagName.toLowerCase()=="span"){if(y2===D2.parentNode){domUtils.trimWhiteTextNode(y2);if(y2.childNodes.length==1){y2.style.cssText=D2.style.cssText+";"+y2.style.cssText;domUtils.remove(D2,true);continue}}D2.style.cssText=y2.style.cssText+";"+D2.style.cssText;if(A2){var E2=A2.style;if(E2){E2=E2.split(";");for(var F2=0,G2;G2=E2[F2++];){D2.style[utils.cssStyleToDomStyle(G2.split(":")[0])]=G2.split(":")[1]}}}if(domUtils.isSameStyle(D2,y2)){domUtils.remove(D2,true)}continue}if(domUtils.isSameElement(y2,D2)){domUtils.remove(D2,true)}}},getElementsByTagName:function(H2,I2,J2){if(J2&&utils.isString(J2)){var K2=J2;J2=function(R2){return domUtils.hasClass(R2,K2)}}I2=utils.trim(I2).replace(/[ ]{2,}/g," ").split(" ");var L2=[];for(var M2=0,N2;N2=I2[M2++];){var O2=H2.getElementsByTagName(N2);for(var P2=0,Q2;Q2=O2[P2++];){if(!J2||J2(Q2))L2.push(Q2)}}return L2},mergeToParent:function(S2){var T2=S2.parentNode;while(T2&&dtd.$removeEmpty[T2.tagName]){if(T2.tagName==S2.tagName||T2.tagName=="A"){domUtils.trimWhiteTextNode(T2);if(T2.tagName=="SPAN"&&!domUtils.isSameStyle(T2,S2)||T2.tagName=="A"&&S2.tagName=="SPAN"){if(T2.childNodes.length>1||T2!==S2.parentNode){S2.style.cssText=T2.style.cssText+";"+S2.style.cssText;T2=T2.parentNode;continue}else{T2.style.cssText+=";"+S2.style.cssText;if(T2.tagName=="A"){T2.style.textDecoration="underline"}}}if(T2.tagName!="A"){T2===S2.parentNode&&domUtils.remove(S2,true);break}}T2=T2.parentNode}},mergeSibling:function(U2,V2,W2){function X2(Y2,Z2,$2){var _2;if((_2=$2[Y2])&&!domUtils.isBookmarkNode(_2)&&_2.nodeType==1&&domUtils.isSameElement($2,_2)){while(_2.firstChild){if(Z2=="firstChild"){$2.insertBefore(_2.lastChild,$2.firstChild)}else{$2.appendChild(_2.firstChild)}}domUtils.remove(_2)}}!V2&&X2("previousSibling","firstChild",U2);!W2&&X2("nextSibling","lastChild",U2)},unSelectable:ie&&browser.ie9below||browser.opera?function(ad){ad.onselectstart=function(){return false};ad.onclick=ad.onkeyup=ad.onkeydown=function(){return false};ad.unselectable="on";ad.setAttribute("unselectable","on");for(var bd=0,cd;cd=ad.all[bd++];){switch(cd.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:cd.unselectable="on";ad.setAttribute("unselectable","on")}}}:function(dd){dd.style.MozUserSelect=dd.style.webkitUserSelect=dd.style.msUserSelect=dd.style.KhtmlUserSelect="none"},removeAttributes:function(ed,fd){fd=utils.isArray(fd)?fd:utils.trim(fd).replace(/[ ]{2,}/g," ").split(" ");for(var gd=0,hd;hd=fd[gd++];){hd=attrFix[hd]||hd;switch(hd){case"className":ed[hd]="";break;case"style":ed.style.cssText="";var id=ed.getAttributeNode("style");!browser.ie&&id&&ed.removeAttributeNode(id)}ed.removeAttribute(hd)}},createElement:function(jd,kd,ld){return domUtils.setAttributes(jd.createElement(kd),ld)},setAttributes:function(md,nd){for(var od in nd){if(nd.hasOwnProperty(od)){var pd=nd[od];switch(od){case"class":md.className=pd;break;case"style":md.style.cssText=md.style.cssText+";"+pd;break;case"innerHTML":md[od]=pd;break;case"value":md.value=pd;break;default:md.setAttribute(attrFix[od]||od,pd)}}}return md},getComputedStyle:function(qd,rd){var sd="width height top left";if(sd.indexOf(rd)>-1){return qd["offset"+rd.replace(/^\w/,function(wd){return wd.toUpperCase()})]+"px"}if(qd.nodeType==3){qd=qd.parentNode}if(browser.ie&&browser.version<9&&rd=="font-size"&&!qd.style.fontSize&&!dtd.$empty[qd.tagName]&&!dtd.$nonChild[qd.tagName]){var td=qd.ownerDocument.createElement("span");td.style.cssText="padding:0;border:0;font-family:simsun;";td.innerHTML=".";qd.appendChild(td);var ud=td.offsetHeight;qd.removeChild(td);td=null;return ud+"px"}try{var vd=domUtils.getStyle(qd,rd)||(window.getComputedStyle?domUtils.getWindow(qd).getComputedStyle(qd,"").getPropertyValue(rd):(qd.currentStyle||qd.style)[utils.cssStyleToDomStyle(rd)])}catch(xd){return""}return utils.transUnitToPx(utils.fixColor(rd,vd))},removeClasses:function(yd,zd){zd=utils.isArray(zd)?zd:utils.trim(zd).replace(/[ ]{2,}/g," ").split(" ");for(var Ad=0,Bd,Cd=yd.className;Bd=zd[Ad++];){Cd=Cd.replace(new RegExp("\\b"+Bd+"\\b"),"")}Cd=utils.trim(Cd).replace(/[ ]{2,}/g," ");if(Cd){yd.className=Cd}else{domUtils.removeAttributes(yd,["class"])}},addClass:function(Dd,Ed){if(!Dd)return;Ed=utils.trim(Ed).replace(/[ ]{2,}/g," ").split(" ");for(var Fd=0,Gd,Hd=Dd.className;Gd=Ed[Fd++];){if(!new RegExp("\\b"+Gd+"\\b").test(Hd)){Hd+=" "+Gd}}Dd.className=utils.trim(Hd)},hasClass:function(Id,Jd){if(utils.isRegExp(Jd)){return Jd.test(Id.className)}Jd=utils.trim(Jd).replace(/[ ]{2,}/g," ").split(" ");for(var Kd=0,Ld,Md=Id.className;Ld=Jd[Kd++];){if(!new RegExp("\\b"+Ld+"\\b","i").test(Md)){return false}}return Kd-1==Jd.length},preventDefault:function(Nd){Nd.preventDefault?Nd.preventDefault():Nd.returnValue=false},removeStyle:function(Od,Pd){if(browser.ie){if(Pd=="color"){Pd="(^|;)"+Pd}Od.style.cssText=Od.style.cssText.replace(new RegExp(Pd+"[^:]*:[^;]+;?","ig"),"")}else{if(Od.style.removeProperty){Od.style.removeProperty(Pd)}else{Od.style.removeAttribute(utils.cssStyleToDomStyle(Pd))}}if(!Od.style.cssText){domUtils.removeAttributes(Od,["style"])}},getStyle:function(Qd,Rd){var Sd=Qd.style[utils.cssStyleToDomStyle(Rd)];return utils.fixColor(Rd,Sd)},setStyle:function(Td,Ud,Vd){Td.style[utils.cssStyleToDomStyle(Ud)]=Vd;if(!utils.trim(Td.style.cssText)){this.removeAttributes(Td,"style")}},setStyles:function(Wd,Xd){for(var Yd in Xd){if(Xd.hasOwnProperty(Yd)){domUtils.setStyle(Wd,Yd,Xd[Yd])}}},removeDirtyAttr:function(Zd){for(var $d=0,_d,a3=Zd.getElementsByTagName("*");_d=a3[$d++];){_d.removeAttribute("_moz_dirty")}Zd.removeAttribute("_moz_dirty")},getChildCount:function(b3,c3){var d3=0,e3=b3.firstChild;c3=c3||function(){return 1};while(e3){if(c3(e3)){d3++}e3=e3.nextSibling}return d3},isEmptyNode:function(f3){return!f3.firstChild||domUtils.getChildCount(f3,function(g3){return!domUtils.isBr(g3)&&!domUtils.isBookmarkNode(g3)&&!domUtils.isWhitespace(g3)})==0},clearSelectedArr:function(h3){var i3;while(i3=h3.pop()){domUtils.removeAttributes(i3,["class"])}},scrollToView:function(j3,k3,l3){var m3=function(){var s3=k3.document,t3=s3.compatMode=="CSS1Compat";return{width:(t3?s3.documentElement.clientWidth:s3.body.clientWidth)||0,height:(t3?s3.documentElement.clientHeight:s3.body.clientHeight)||0}},n3=function(u3){if("pageXOffset"in u3){return{x:u3.pageXOffset||0,y:u3.pageYOffset||0}}else{var v3=u3.document;return{x:v3.documentElement.scrollLeft||v3.body.scrollLeft||0,y:v3.documentElement.scrollTop||v3.body.scrollTop||0}}};var o3=m3().height,p3=o3*-1+l3;p3+=j3.offsetHeight||0;var q3=domUtils.getXY(j3);p3+=q3.y;var r3=n3(k3).y;if(p3>r3||p3<r3-o3){k3.scrollTo(0,p3+(p3<0?-20:20))}},isBr:function(w3){return w3.nodeType==1&&w3.tagName=="BR"},isFillChar:function(x3,y3){if(x3.nodeType!=3)return false;var z3=x3.nodeValue;if(y3){return new RegExp("^"+domUtils.fillChar).test(z3)}return!z3.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(A3){var B3=A3.cloneRange(),C3=0,D3=B3.startContainer,E3;if(D3.nodeType==1&&D3.childNodes[B3.startOffset]){D3=D3.childNodes[B3.startOffset];var F3=D3.previousSibling;while(F3&&domUtils.isFillChar(F3)){D3=F3;F3=F3.previousSibling}}if(this.isFillChar(D3,true)&&B3.startOffset==1){B3.setStartBefore(D3);D3=B3.startContainer}while(D3&&domUtils.isFillChar(D3)){E3=D3;D3=D3.previousSibling}if(E3){B3.setStartBefore(E3);D3=B3.startContainer}if(D3.nodeType==1&&domUtils.isEmptyNode(D3)&&B3.startOffset==1){B3.setStart(D3,0).collapse(true)}while(!B3.startOffset){D3=B3.startContainer;if(domUtils.isBlockElm(D3)||domUtils.isBody(D3)){C3=1;break}var F3=B3.startContainer.previousSibling,G3;if(!F3){B3.setStartBefore(B3.startContainer)}else{while(F3&&domUtils.isFillChar(F3)){G3=F3;F3=F3.previousSibling}if(G3){B3.setStartBefore(G3)}else{B3.setStartBefore(B3.startContainer)}}}return C3&&!domUtils.isBody(B3.startContainer)?1:0},isEmptyBlock:function(H3,I3){if(H3.nodeType!=1)return 0;I3=I3||new RegExp("[  \t\r\n"+domUtils.fillChar+"]","g");if(H3[browser.ie?"innerText":"textContent"].replace(I3,"").length>0){return 0}for(var J3 in dtd.$isNotEmpty){if(H3.getElementsByTagName(J3).length){return 0}}return 1},setViewportOffset:function(K3,L3){var M3=parseInt(K3.style.left)|0;var N3=parseInt(K3.style.top)|0;var O3=K3.getBoundingClientRect();var P3=L3.left-O3.left;var Q3=L3.top-O3.top;if(P3){K3.style.left=M3+P3+"px"}if(Q3){K3.style.top=N3+Q3+"px"}},fillNode:function(R3,S3){var T3=browser.ie?R3.createTextNode(domUtils.fillChar):R3.createElement("br");S3.innerHTML="";S3.appendChild(T3)},moveChild:function(U3,V3,W3){while(U3.firstChild){if(W3&&V3.firstChild){V3.insertBefore(U3.lastChild,V3.firstChild)}else{V3.appendChild(U3.firstChild)}}},hasNoAttributes:function(X3){return browser.ie?/^<\w+\s*?>/.test(X3.outerHTML):X3.attributes.length==0},isCustomeNode:function(Y3){return Y3.nodeType==1&&Y3.getAttribute("_ue_custom_node_")},isTagNode:function(Z3,$3){return Z3.nodeType==1&&new RegExp("\\b"+Z3.tagName+"\\b","i").test($3)},filterNodeList:function(_3,ae,be){var ce=[];if(!utils.isFunction(ae)){var de=ae;ae=function(ee){return utils.indexOf(utils.isArray(de)?de:de.split(" "),ee.tagName.toLowerCase())!=-1}}utils.each(_3,function(fe){ae(fe)&&ce.push(fe)});return ce.length==0?null:ce.length==1||!be?ce[0]:ce},isInNodeEndBoundary:function(ge,he){var je=ge.startContainer;if(je.nodeType==3&&ge.startOffset!=je.nodeValue.length){return 0}if(je.nodeType==1&&ge.startOffset!=je.childNodes.length){return 0}while(je!==he){if(je.nextSibling){return 0}je=je.parentNode}return 1},isBoundaryNode:function(ke,le){var ne;while(!domUtils.isBody(ke)){ne=ke;ke=ke.parentNode;if(ne!==ke[le]){return false}}return true},fillHtml:browser.ie11below?"&nbsp;":"<br/>"};var fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){var oe=0,pe=domUtils.fillChar,qe;function re(ye){ye.collapsed=ye.startContainer&&ye.endContainer&&ye.startContainer===ye.endContainer&&ye.startOffset==ye.endOffset}function se(ze){return!ze.collapsed&&ze.startContainer.nodeType==1&&ze.startContainer===ze.endContainer&&ze.endOffset-ze.startOffset==1}function te(Ae,Be,Ce,De){if(Be.nodeType==1&&(dtd.$empty[Be.tagName]||dtd.$nonChild[Be.tagName])){Ce=domUtils.getNodeIndex(Be)+(Ae?0:1);Be=Be.parentNode}if(Ae){De.startContainer=Be;De.startOffset=Ce;if(!De.endContainer){De.collapse(true)}}else{De.endContainer=Be;De.endOffset=Ce;if(!De.startContainer){De.collapse(false)}}re(De);return De}function ue(Ee,Fe){var Ge=Ee.startContainer,He=Ee.endContainer,Ie=Ee.startOffset,Je=Ee.endOffset,Ke=Ee.document,Le=Ke.createDocumentFragment(),Me,Ne;if(Ge.nodeType==1){Ge=Ge.childNodes[Ie]||(Me=Ge.appendChild(Ke.createTextNode("")))}if(He.nodeType==1){He=He.childNodes[Je]||(Ne=He.appendChild(Ke.createTextNode("")))}if(Ge===He&&Ge.nodeType==3){Le.appendChild(Ke.createTextNode(Ge.substringData(Ie,Je-Ie)));if(Fe){Ge.deleteData(Ie,Je-Ie);Ee.collapse(true)}return Le}var Oe,Pe,Qe=Le,Re=domUtils.findParents(Ge,true),Se=domUtils.findParents(He,true);for(var Te=0;Re[Te]==Se[Te];){Te++}for(var Ue=Te,Ve;Ve=Re[Ue];Ue++){Oe=Ve.nextSibling;if(Ve==Ge){if(!Me){if(Ee.startContainer.nodeType==3){Qe.appendChild(Ke.createTextNode(Ge.nodeValue.slice(Ie)));if(Fe){Ge.deleteData(Ie,Ge.nodeValue.length-Ie)}}else{Qe.appendChild(!Fe?Ge.cloneNode(true):Ge)}}}else{Pe=Ve.cloneNode(false);Qe.appendChild(Pe)}while(Oe){if(Oe===He||Oe===Se[Ue]){break}Ve=Oe.nextSibling;Qe.appendChild(!Fe?Oe.cloneNode(true):Oe);Oe=Ve}Qe=Pe}Qe=Le;if(!Re[Te]){Qe.appendChild(Re[Te-1].cloneNode(false));Qe=Qe.firstChild}for(var Ue=Te,We;We=Se[Ue];Ue++){Oe=We.previousSibling;if(We==He){if(!Ne&&Ee.endContainer.nodeType==3){Qe.appendChild(Ke.createTextNode(He.substringData(0,Je)));if(Fe){He.deleteData(0,Je)}}}else{Pe=We.cloneNode(false);Qe.appendChild(Pe)}if(Ue!=Te||!Re[Te]){while(Oe){if(Oe===Ge){break}We=Oe.previousSibling;Qe.insertBefore(!Fe?Oe.cloneNode(true):Oe,Qe.firstChild);Oe=We}}Qe=Pe}if(Fe){Ee.setStartBefore(!Se[Te]?Se[Te-1]:!Re[Te]?Re[Te-1]:Se[Te]).collapse(true)}Me&&domUtils.remove(Me);Ne&&domUtils.remove(Ne);return Le}var ve=dom.Range=function(Xe){var Ye=this;Ye.startContainer=Ye.startOffset=Ye.endContainer=Ye.endOffset=null;Ye.document=Xe;Ye.collapsed=true};function we(Ze,$e){try{if(qe&&domUtils.inDoc(qe,Ze)){if(!qe.nodeValue.replace(fillCharReg,"").length){var _e=qe.parentNode;domUtils.remove(qe);while(_e&&domUtils.isEmptyInlineElement(_e)&&(browser.safari?!(domUtils.getPosition(_e,$e)&domUtils.POSITION_CONTAINS):!_e.contains($e))){qe=_e.parentNode;domUtils.remove(_e);_e=qe}}else{qe.nodeValue=qe.nodeValue.replace(fillCharReg,"")}}}catch(a4){}}function xe(b4,c4){var d4;b4=b4[c4];while(b4&&domUtils.isFillChar(b4)){d4=b4[c4];domUtils.remove(b4);b4=d4}}ve.prototype={cloneContents:function(){return this.collapsed?null:ue(this,0)},deleteContents:function(){var e4;if(!this.collapsed){ue(this,1)}if(browser.webkit){e4=this.startContainer;if(e4.nodeType==3&&!e4.nodeValue.length){this.setStartBefore(e4).collapse(true);domUtils.remove(e4)}}return this},extractContents:function(){return this.collapsed?null:ue(this,2)},setStart:function(f4,g4){return te(true,f4,g4,this)},setEnd:function(h4,i4){return te(false,h4,i4,this)},setStartAfter:function(j4){return this.setStart(j4.parentNode,domUtils.getNodeIndex(j4)+1)},setStartBefore:function(k4){return this.setStart(k4.parentNode,domUtils.getNodeIndex(k4))},setEndAfter:function(l4){return this.setEnd(l4.parentNode,domUtils.getNodeIndex(l4)+1)},setEndBefore:function(m4){return this.setEnd(m4.parentNode,domUtils.getNodeIndex(m4))},setStartAtFirst:function(n4){return this.setStart(n4,0)},setStartAtLast:function(o4){return this.setStart(o4,o4.nodeType==3?o4.nodeValue.length:o4.childNodes.length)},setEndAtFirst:function(p4){return this.setEnd(p4,0)},setEndAtLast:function(q4){return this.setEnd(q4,q4.nodeType==3?q4.nodeValue.length:q4.childNodes.length)},selectNode:function(r4){return this.setStartBefore(r4).setEndAfter(r4)},selectNodeContents:function(s4){return this.setStart(s4,0).setEndAtLast(s4)},cloneRange:function(){var t4=this;return new ve(t4.document).setStart(t4.startContainer,t4.startOffset).setEnd(t4.endContainer,t4.endOffset)},collapse:function(u4){var v4=this;if(u4){v4.endContainer=v4.startContainer;v4.endOffset=v4.startOffset}else{v4.startContainer=v4.endContainer;v4.startOffset=v4.endOffset}v4.collapsed=true;return v4},shrinkBoundary:function(w4){var x4=this,y4,z4=x4.collapsed;function A4(B4){return B4.nodeType==1&&!domUtils.isBookmarkNode(B4)&&!dtd.$empty[B4.tagName]&&!dtd.$nonChild[B4.tagName]}while(x4.startContainer.nodeType==1&&(y4=x4.startContainer.childNodes[x4.startOffset])&&A4(y4)){x4.setStart(y4,0)}if(z4){return x4.collapse(true)}if(!w4){while(x4.endContainer.nodeType==1&&x4.endOffset>0&&(y4=x4.endContainer.childNodes[x4.endOffset-1])&&A4(y4)){x4.setEnd(y4,y4.childNodes.length)}}return x4},getCommonAncestor:function(C4,D4){var E4=this,F4=E4.startContainer,G4=E4.endContainer;if(F4===G4){if(C4&&se(this)){F4=F4.childNodes[E4.startOffset];if(F4.nodeType==1)return F4}return D4&&F4.nodeType==3?F4.parentNode:F4}return domUtils.getCommonAncestor(F4,G4)},trimBoundary:function(H4){this.txtToElmBoundary();var I4=this.startContainer,J4=this.startOffset,K4=this.collapsed,L4=this.endContainer;if(I4.nodeType==3){if(J4==0){this.setStartBefore(I4)}else{if(J4>=I4.nodeValue.length){this.setStartAfter(I4)}else{var M4=domUtils.split(I4,J4);if(I4===L4){this.setEnd(M4,this.endOffset-J4)}else if(I4.parentNode===L4){this.endOffset+=1}this.setStartBefore(M4)}}if(K4){return this.collapse(true)}}if(!H4){J4=this.endOffset;L4=this.endContainer;if(L4.nodeType==3){if(J4==0){this.setEndBefore(L4)}else{J4<L4.nodeValue.length&&domUtils.split(L4,J4);this.setEndAfter(L4)}}}return this},txtToElmBoundary:function(N4){function O4(P4,Q4){var R4=P4[Q4+"Container"],S4=P4[Q4+"Offset"];if(R4.nodeType==3){if(!S4){P4["set"+Q4.replace(/(\w)/,function(T4){return T4.toUpperCase()})+"Before"](R4)}else if(S4>=R4.nodeValue.length){P4["set"+Q4.replace(/(\w)/,function(U4){return U4.toUpperCase()})+"After"](R4)}}}if(N4||!this.collapsed){O4(this,"start");O4(this,"end")}return this},insertNode:function(V4){var W4=V4,X4=1;if(V4.nodeType==11){W4=V4.firstChild;X4=V4.childNodes.length}this.trimBoundary(true);var Y4=this.startContainer,Z4=this.startOffset;var $4=Y4.childNodes[Z4];if($4){Y4.insertBefore(V4,$4)}else{Y4.appendChild(V4)}if(W4.parentNode===this.endContainer){this.endOffset=this.endOffset+X4}return this.setStartBefore(W4)},setCursor:function(_4,af){return this.collapse(!_4).select(af)},createBookmark:function(bf,cf){var df,ef=this.document.createElement("span");ef.style.cssText="display:none;line-height:0px;";ef.appendChild(this.document.createTextNode("‍"));ef.id="_baidu_bookmark_start_"+(cf?"":oe++);if(!this.collapsed){df=ef.cloneNode(true);df.id="_baidu_bookmark_end_"+(cf?"":oe++)}this.insertNode(ef);if(df){this.collapse().insertNode(df).setEndBefore(df)}this.setStartAfter(ef);return{start:bf?ef.id:ef,end:df?bf?df.id:df:null,id:bf}},moveToBookmark:function(ff){var gf=ff.id?this.document.getElementById(ff.start):ff.start,hf=ff.end&&ff.id?this.document.getElementById(ff.end):ff.end;this.setStartBefore(gf);domUtils.remove(gf);if(hf){this.setEndBefore(hf);domUtils.remove(hf)}else{this.collapse(true)}return this},enlarge:function(jf,kf){var lf=domUtils.isBody,mf,nf,of=this.document.createTextNode("");if(jf){nf=this.startContainer;if(nf.nodeType==1){if(nf.childNodes[this.startOffset]){mf=nf=nf.childNodes[this.startOffset]}else{nf.appendChild(of);mf=nf=of}}else{mf=nf}while(1){if(domUtils.isBlockElm(nf)){nf=mf;while((mf=nf.previousSibling)&&!domUtils.isBlockElm(mf)){nf=mf}this.setStartBefore(nf);break}mf=nf;nf=nf.parentNode}nf=this.endContainer;if(nf.nodeType==1){if(mf=nf.childNodes[this.endOffset]){nf.insertBefore(of,mf)}else{nf.appendChild(of)}mf=nf=of}else{mf=nf}while(1){if(domUtils.isBlockElm(nf)){nf=mf;while((mf=nf.nextSibling)&&!domUtils.isBlockElm(mf)){nf=mf}this.setEndAfter(nf);break}mf=nf;nf=nf.parentNode}if(of.parentNode===this.endContainer){this.endOffset--}domUtils.remove(of)}if(!this.collapsed){while(this.startOffset==0){if(kf&&kf(this.startContainer)){break}if(lf(this.startContainer)){break}this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(kf&&kf(this.endContainer)){break}if(lf(this.endContainer)){break}this.setEndAfter(this.endContainer)}}return this},enlargeToBlockElm:function(pf){while(!domUtils.isBlockElm(this.startContainer)){this.setStartBefore(this.startContainer)}if(!pf){while(!domUtils.isBlockElm(this.endContainer)){this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setStartAfter(this.startContainer)}while(!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setEndBefore(this.endContainer)}}return this},applyInlineStyle:function(qf,rf,sf){if(this.collapsed)return this;this.trimBoundary().enlarge(false,function(Hf){return Hf.nodeType==1&&domUtils.isBlockElm(Hf)}).adjustmentBoundary();var tf=this.createBookmark(),uf=tf.end,vf=function(If){return If.nodeType==1?If.tagName.toLowerCase()!="br":!domUtils.isWhitespace(If)},wf=domUtils.getNextDomNode(tf.start,false,vf),xf,yf,zf=this.cloneRange();while(wf&&domUtils.getPosition(wf,uf)&domUtils.POSITION_PRECEDING){if(wf.nodeType==3||dtd[qf][wf.tagName]){zf.setStartBefore(wf);xf=wf;while(xf&&(xf.nodeType==3||dtd[qf][xf.tagName])&&xf!==uf){yf=xf;xf=domUtils.getNextDomNode(xf,xf.nodeType==1,null,function(Jf){return dtd[qf][Jf.tagName]})}var Af=zf.setEndAfter(yf).extractContents(),Bf;if(sf&&sf.length>0){var Cf,Df;Df=Cf=sf[0].cloneNode(false);for(var Ef=1,Ff;Ff=sf[Ef++];){Cf.appendChild(Ff.cloneNode(false));Cf=Cf.firstChild}Bf=Cf}else{Bf=zf.document.createElement(qf)}if(rf){domUtils.setAttributes(Bf,rf)}Bf.appendChild(Af);zf.insertNode(sf?Df:Bf);var Gf;if(qf=="span"&&rf.style&&/text\-decoration/.test(rf.style)&&(Gf=domUtils.findParentByTagName(Bf,"a",true))){domUtils.setAttributes(Gf,rf);domUtils.remove(Bf,true);Bf=Gf}else{domUtils.mergeSibling(Bf);domUtils.clearEmptySibling(Bf)}domUtils.mergeChild(Bf,rf);wf=domUtils.getNextDomNode(Bf,false,vf);domUtils.mergeToParent(Bf);if(xf===uf){break}}else{wf=domUtils.getNextDomNode(wf,true,vf)}}return this.moveToBookmark(tf)},removeInlineStyle:function(Kf){if(this.collapsed)return this;Kf=utils.isArray(Kf)?Kf:[Kf];this.shrinkBoundary().adjustmentBoundary();var Lf=this.startContainer,Mf=this.endContainer;while(1){if(Lf.nodeType==1){if(utils.indexOf(Kf,Lf.tagName.toLowerCase())>-1){break}if(Lf.tagName.toLowerCase()=="body"){Lf=null;break}}Lf=Lf.parentNode}while(1){if(Mf.nodeType==1){if(utils.indexOf(Kf,Mf.tagName.toLowerCase())>-1){break}if(Mf.tagName.toLowerCase()=="body"){Mf=null;break}}Mf=Mf.parentNode}var Nf=this.createBookmark(),Of,Pf;if(Lf){Pf=this.cloneRange().setEndBefore(Nf.start).setStartBefore(Lf);Of=Pf.extractContents();Pf.insertNode(Of);domUtils.clearEmptySibling(Lf,true);Lf.parentNode.insertBefore(Nf.start,Lf)}if(Mf){Pf=this.cloneRange().setStartAfter(Nf.end).setEndAfter(Mf);Of=Pf.extractContents();Pf.insertNode(Of);domUtils.clearEmptySibling(Mf,false,true);Mf.parentNode.insertBefore(Nf.end,Mf.nextSibling)}var Qf=domUtils.getNextDomNode(Nf.start,false,function(Sf){return Sf.nodeType==1}),Rf;while(Qf&&Qf!==Nf.end){Rf=domUtils.getNextDomNode(Qf,true,function(Tf){return Tf.nodeType==1});if(utils.indexOf(Kf,Qf.tagName.toLowerCase())>-1){domUtils.remove(Qf,true)}Qf=Rf}return this.moveToBookmark(Nf)},getClosedNode:function(){var Uf;if(!this.collapsed){var Vf=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(se(Vf)){var Wf=Vf.startContainer.childNodes[Vf.startOffset];if(Wf&&Wf.nodeType==1&&(dtd.$empty[Wf.tagName]||dtd.$nonChild[Wf.tagName])){Uf=Wf}}}return Uf},select:browser.ie?function(Xf,Yf){var Zf;if(!this.collapsed)this.shrinkBoundary();var $f=this.getClosedNode();if($f&&!Yf){try{Zf=this.document.body.createControlRange();Zf.addElement($f);Zf.select()}catch(f5){}return this}var _f=this.createBookmark(),a5=_f.start,b5;Zf=this.document.body.createTextRange();Zf.moveToElementText(a5);Zf.moveStart("character",1);if(!this.collapsed){var c5=this.document.body.createTextRange();b5=_f.end;c5.moveToElementText(b5);Zf.setEndPoint("EndToEnd",c5)}else{if(!Xf&&this.startContainer.nodeType!=3){var d5=this.document.createTextNode(pe),e5=this.document.createElement("span");e5.appendChild(this.document.createTextNode(pe));a5.parentNode.insertBefore(e5,a5);a5.parentNode.insertBefore(d5,a5);we(this.document,d5);qe=d5;xe(e5,"previousSibling");xe(a5,"nextSibling");Zf.moveStart("character",-1);Zf.collapse(true)}}this.moveToBookmark(_f);e5&&domUtils.remove(e5);try{Zf.select()}catch(g5){}return this}:function(h5){function i5(p5){function q5(r5,s5,t5){if(r5.nodeType==3&&r5.nodeValue.length<s5){p5[t5+"Offset"]=r5.nodeValue.length}}q5(p5.startContainer,p5.startOffset,"start");q5(p5.endContainer,p5.endOffset,"end")}var j5=domUtils.getWindow(this.document),k5=j5.getSelection(),l5;browser.gecko?this.document.body.focus():j5.focus();if(k5){k5.removeAllRanges();if(this.collapsed&&!h5){var m5=this.startContainer,n5=m5;if(m5.nodeType==1){n5=m5.childNodes[this.startOffset]}if(!(m5.nodeType==3&&this.startOffset)&&(n5?!n5.previousSibling||n5.previousSibling.nodeType!=3:!m5.lastChild||m5.lastChild.nodeType!=3)){l5=this.document.createTextNode(pe);this.insertNode(l5);we(this.document,l5);xe(l5,"previousSibling");xe(l5,"nextSibling");qe=l5;this.setStart(l5,browser.webkit?1:0).collapse(true)}}var o5=this.document.createRange();if(this.collapsed&&browser.opera&&this.startContainer.nodeType==1){var n5=this.startContainer.childNodes[this.startOffset];if(!n5){n5=this.startContainer.lastChild;if(n5&&domUtils.isBr(n5)){this.setStartBefore(n5).collapse(true)}}else{while(n5&&domUtils.isBlockElm(n5)){if(n5.nodeType==1&&n5.childNodes[0]){n5=n5.childNodes[0]}else{break}}n5&&this.setStartBefore(n5).collapse(true)}}i5(this);o5.setStart(this.startContainer,this.startOffset);o5.setEnd(this.endContainer,this.endOffset);k5.addRange(o5)}return this},scrollToView:function(u5,v5){u5=u5?window:domUtils.getWindow(this.document);var w5=this,x5=w5.document.createElement("span");x5.innerHTML="&nbsp;";w5.cloneRange().insertNode(x5);domUtils.scrollToView(x5,u5,v5);domUtils.remove(x5);return w5},inFillChar:function(){var y5=this.startContainer;if(this.collapsed&&y5.nodeType==3&&y5.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1==y5.nodeValue.length){return true}return false},createAddress:function(z5,A5){var B5={},C5=this;function D5(E5){var F5=E5?C5.startContainer:C5.endContainer;var G5=domUtils.findParents(F5,true,function(N5){return!domUtils.isBody(N5)}),H5=[];for(var I5=0,J5;J5=G5[I5++];){H5.push(domUtils.getNodeIndex(J5,A5))}var K5=0;if(A5){if(F5.nodeType==3){var L5=F5.previousSibling;while(L5&&L5.nodeType==3){K5+=L5.nodeValue.replace(fillCharReg,"").length;L5=L5.previousSibling}K5+=E5?C5.startOffset:C5.endOffset}else{F5=F5.childNodes[E5?C5.startOffset:C5.endOffset];if(F5){K5=domUtils.getNodeIndex(F5,A5)}else{F5=E5?C5.startContainer:C5.endContainer;var M5=F5.firstChild;while(M5){if(domUtils.isFillChar(M5)){M5=M5.nextSibling;continue}K5++;if(M5.nodeType==3){while(M5&&M5.nodeType==3){M5=M5.nextSibling}}else{M5=M5.nextSibling}}}}}else{K5=E5?domUtils.isFillChar(F5)?0:C5.startOffset:C5.endOffset}if(K5<0){K5=0}H5.push(K5);return H5}B5.startAddress=D5(true);if(!z5){B5.endAddress=C5.collapsed?[].concat(B5.startAddress):D5()}return B5},moveToAddress:function(O5,P5){var Q5=this;function R5(S5,T5){var U5=Q5.document.body,V5,W5;for(var X5=0,Y5,Z5=S5.length;X5<Z5;X5++){Y5=S5[X5];V5=U5;U5=U5.childNodes[Y5];if(!U5){W5=Y5;break}}if(T5){if(U5){Q5.setStartBefore(U5)}else{Q5.setStart(V5,W5)}}else{if(U5){Q5.setEndBefore(U5)}else{Q5.setEnd(V5,W5)}}}R5(O5.startAddress,true);!P5&&O5.endAddress&&R5(O5.endAddress);return Q5},equals:function($5){for(var _5 in this){if(this.hasOwnProperty(_5)){if(this[_5]!==$5[_5])return false}}return true},traversal:function(ag,bg){if(this.collapsed)return this;var cg=this.createBookmark(),dg=cg.end,eg=domUtils.getNextDomNode(cg.start,false,bg);while(eg&&eg!==dg&&domUtils.getPosition(eg,dg)&domUtils.POSITION_PRECEDING){var fg=domUtils.getNextDomNode(eg,false,bg);ag(eg);eg=fg}return this.moveToBookmark(cg)}}})();(function(){function gg(kg,lg){var mg=domUtils.getNodeIndex;kg=kg.duplicate();kg.collapse(lg);var ng=kg.parentElement();if(!ng.hasChildNodes()){return{container:ng,offset:0}}var og=ng.children,pg,qg=kg.duplicate(),rg=0,sg=og.length-1,tg=-1,ug;while(rg<=sg){tg=Math.floor((rg+sg)/2);pg=og[tg];qg.moveToElementText(pg);var vg=qg.compareEndPoints("StartToStart",kg);if(vg>0){sg=tg-1}else if(vg<0){rg=tg+1}else{return{container:ng,offset:mg(pg)}}}if(tg==-1){qg.moveToElementText(ng);qg.setEndPoint("StartToStart",kg);ug=qg.text.replace(/(\r\n|\r)/g,"\n").length;og=ng.childNodes;if(!ug){pg=og[og.length-1];return{container:pg,offset:pg.nodeValue.length}}var wg=og.length;while(ug>0){ug-=og[--wg].nodeValue.length}return{container:og[wg],offset:-ug}}qg.collapse(vg>0);qg.setEndPoint(vg>0?"StartToStart":"EndToStart",kg);ug=qg.text.replace(/(\r\n|\r)/g,"\n").length;if(!ug){return dtd.$empty[pg.tagName]||dtd.$nonChild[pg.tagName]?{container:ng,offset:mg(pg)+(vg>0?0:1)}:{container:pg,offset:vg>0?0:pg.childNodes.length}}while(ug>0){try{var xg=pg;pg=pg[vg>0?"previousSibling":"nextSibling"];ug-=pg.nodeValue.length}catch(yg){return{container:ng,offset:mg(xg)}}}return{container:pg,offset:vg>0?-ug:pg.nodeValue.length+ug}}function hg(zg,Ag){if(zg.item){Ag.selectNode(zg.item(0))}else{var Bg=gg(zg,true);Ag.setStart(Bg.container,Bg.offset);if(zg.compareEndPoints("StartToEnd",zg)!=0){Bg=gg(zg,false);Ag.setEnd(Bg.container,Bg.offset)}}return Ag}function ig(Cg){var Dg;try{Dg=Cg.getNative().createRange()}catch(Fg){return null}var Eg=Dg.item?Dg.item(0):Dg.parentElement();if((Eg.ownerDocument||Eg)===Cg.document){return Dg}return null}var jg=dom.Selection=function(Gg){var Hg=this,Ig;Hg.document=Gg;if(browser.ie9below){Ig=domUtils.getWindow(Gg).frameElement;domUtils.on(Ig,"beforedeactivate",function(){Hg._bakIERange=Hg.getIERange()});domUtils.on(Ig,"activate",function(){try{if(!ig(Hg)&&Hg._bakIERange){Hg._bakIERange.select()}}catch(Jg){}Hg._bakIERange=null})}Ig=Gg=null};jg.prototype={rangeInBody:function(Kg,Lg){var Mg=browser.ie9below||Lg?Kg.item?Kg.item():Kg.parentElement():Kg.startContainer;return Mg===this.document.body||domUtils.inDoc(Mg,this.document)},getNative:function(){var Ng=this.document;try{return!Ng?null:browser.ie9below?Ng.selection:domUtils.getWindow(Ng).getSelection()}catch(Og){return null}},getIERange:function(){var Pg=ig(this);if(!Pg){if(this._bakIERange){return this._bakIERange}}return Pg},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath){return this._cachedStartElementPath}var Qg=this.getStart();if(Qg){return domUtils.findParents(Qg,true,null,true)}return[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var Rg=ig(this);return!!(Rg&&this.rangeInBody(Rg))}else{return!!this.getNative().rangeCount}}catch(Sg){return false}},getRange:function(){var Tg=this;function Ug($g){var _g=Tg.document.body.firstChild,a6=$g.collapsed;while(_g&&_g.firstChild){$g.setStart(_g,0);_g=_g.firstChild}if(!$g.startContainer){$g.setStart(Tg.document.body,0)}if(a6){$g.collapse(true)}}if(Tg._cachedRange!=null){return this._cachedRange}var Vg=new baidu.editor.dom.Range(Tg.document);if(browser.ie9below){var Wg=Tg.getIERange();if(Wg){try{hg(Wg,Vg)}catch(b6){Ug(Vg)}}else{Ug(Vg)}}else{var Xg=Tg.getNative();if(Xg&&Xg.rangeCount){var Yg=Xg.getRangeAt(0);var Zg=Xg.getRangeAt(Xg.rangeCount-1);Vg.setStart(Yg.startContainer,Yg.startOffset).setEnd(Zg.endContainer,Zg.endOffset);if(Vg.collapsed&&domUtils.isBody(Vg.startContainer)&&!Vg.startOffset){Ug(Vg)}}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document)){return this._bakRange}Ug(Vg)}}return this._bakRange=Vg},getStart:function(){if(this._cachedStartElement){return this._cachedStartElement}var c6=browser.ie9below?this.getIERange():this.getRange(),d6,e6,f6,g6;if(browser.ie9below){if(!c6){return this.document.body.firstChild}if(c6.item){return c6.item(0)}d6=c6.duplicate();d6.text.length>0&&d6.moveStart("character",1);d6.collapse(1);e6=d6.parentElement();g6=f6=c6.parentElement();while(f6=f6.parentNode){if(f6==e6){e6=g6;break}}}else{c6.shrinkBoundary();e6=c6.startContainer;if(e6.nodeType==1&&e6.hasChildNodes()){e6=e6.childNodes[Math.min(e6.childNodes.length-1,c6.startOffset)]}if(e6.nodeType==3){return e6.parentNode}}return e6},getText:function(){var h6,i6;if(this.isFocus()&&(h6=this.getNative())){i6=browser.ie9below?h6.createRange():h6.getRangeAt(0);return browser.ie9below?i6.text:i6.toString()}return""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}})();(function(){var j6=0,k6;function l6(q6,r6){var s6;if(r6.textarea){if(utils.isString(r6.textarea)){for(var t6=0,u6,v6=domUtils.getElementsByTagName(q6,"textarea");u6=v6[t6++];){if(u6.id=="ueditor_textarea_"+r6.options.textarea){s6=u6;break}}}else{s6=r6.textarea}}if(!s6){q6.appendChild(s6=domUtils.createElement(document,"textarea",{name:r6.options.textarea,id:"ueditor_textarea_"+r6.options.textarea,style:"display:none"}));r6.textarea=s6}!s6.getAttribute("name")&&s6.setAttribute("name",r6.options.textarea);s6.value=r6.hasContents()?r6.options.allHtmlEnabled?r6.getAllHtml():r6.getContent(null,null,true):""}function m6(w6){for(var x6 in UE.plugins){UE.plugins[x6].call(w6)}}function n6(y6){for(var z6 in y6){return z6}}function o6(A6){A6.langIsReady=true;A6.fireEvent("langReady")}var p6=UE.Editor=function(B6){var C6=this;C6.uid=j6++;EventBase.call(C6);C6.commands={};C6.options=utils.extend(utils.clone(B6||{}),UEDITOR_CONFIG,true);C6.shortcutkeys={};C6.inputRules=[];C6.outputRules=[];C6.setOpt(p6.defaultOptions(C6));C6.loadServerConfig();if(!utils.isEmptyObject(UE.I18N)){C6.options.lang=n6(UE.I18N);UE.plugin.load(C6);o6(C6)}else{utils.loadFile(document,{src:C6.options.langPath+C6.options.lang+"/"+C6.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(C6);o6(C6)})}UE.instants["ueditorInstant"+C6.uid]=C6};p6.prototype={registerCommand:function(D6,E6){this.commands[D6]=E6},ready:function(F6){var G6=this;if(F6){G6.isReady?F6.apply(G6):G6.addListener("ready",F6)}},setOpt:function(H6,I6){var J6={};if(utils.isString(H6)){J6[H6]=I6}else{J6=H6}utils.extend(this.options,J6,true)},getOpt:function(K6){return this.options[K6]},destroy:function(){var L6=this;L6.fireEvent("destroy");var M6=L6.container.parentNode;var N6=L6.textarea;if(!N6){N6=document.createElement("textarea");M6.parentNode.insertBefore(N6,M6)}else{N6.style.display=""}N6.style.width=L6.iframe.offsetWidth+"px";N6.style.height=L6.iframe.offsetHeight+"px";N6.value=L6.getContent();N6.id=L6.key;M6.innerHTML="";domUtils.remove(M6);var O6=L6.key;for(var P6 in L6){if(L6.hasOwnProperty(P6)){delete this[P6]}}UE.delEditor(O6)},render:function(Q6){var R6=this,S6=R6.options,T6=function(V6){return parseInt(domUtils.getComputedStyle(Q6,V6))};if(utils.isString(Q6)){Q6=document.getElementById(Q6)}if(Q6){if(S6.initialFrameWidth){S6.minFrameWidth=S6.initialFrameWidth}else{S6.minFrameWidth=S6.initialFrameWidth=Q6.offsetWidth}if(S6.initialFrameHeight){S6.minFrameHeight=S6.initialFrameHeight}else{S6.initialFrameHeight=S6.minFrameHeight=Q6.offsetHeight}Q6.style.width=/%$/.test(S6.initialFrameWidth)?"100%":S6.initialFrameWidth-T6("padding-left")-T6("padding-right")+"px";Q6.style.height=/%$/.test(S6.initialFrameHeight)?"100%":S6.initialFrameHeight-T6("padding-top")-T6("padding-bottom")+"px";Q6.style.zIndex=S6.zIndex;var U6=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head>"+"<style type='text/css'>"+".view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\n"+"body{margin:8px;font-family:sans-serif;font-size:16px;}"+"p{margin:5px 0;}</style>"+(S6.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(S6.iframeCssUrl)+"'/>":"")+(S6.initialStyle?"<style>"+S6.initialStyle+"</style>":"")+"</head><body class='view' ></body>"+"<script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>"+"setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+R6.uid+"'];editor._setup(document);},0);"+"var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);<\/script></html>";Q6.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+R6.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(S6.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+U6+'");document.close();}())'}));Q6.style.overflow="hidden";setTimeout(function(){if(/%$/.test(S6.initialFrameWidth)){S6.minFrameWidth=S6.initialFrameWidth=Q6.offsetWidth}if(/%$/.test(S6.initialFrameHeight)){S6.minFrameHeight=S6.initialFrameHeight=Q6.offsetHeight;Q6.style.height=S6.initialFrameHeight+"px"}})}},_setup:function(W6){var X6=this,Y6=X6.options;if(ie){W6.body.disabled=true;W6.body.contentEditable=true;W6.body.disabled=false}else{W6.body.contentEditable=true}W6.body.spellcheck=false;X6.document=W6;X6.window=W6.defaultView||W6.parentWindow;X6.iframe=X6.window.frameElement;X6.body=W6.body;X6.selection=new dom.Selection(W6);var Z6;if(browser.gecko&&(Z6=this.selection.getNative())){Z6.removeAllRanges()}this._initEvents();for(var $6=this.iframe.parentNode;!domUtils.isBody($6);$6=$6.parentNode){if($6.tagName=="FORM"){X6.form=$6;if(X6.options.autoSyncData){domUtils.on(X6.window,"blur",function(){l6($6,X6)})}else{domUtils.on($6,"submit",function(){l6(this,X6)})}break}}if(Y6.initialContent){if(Y6.autoClearinitialContent){var _6=X6.execCommand;X6.execCommand=function(){X6.fireEvent("firstBeforeExecCommand");return _6.apply(X6,arguments)};this._setDefaultContent(Y6.initialContent)}else this.setContent(Y6.initialContent,false,true)}if(domUtils.isEmptyNode(X6.body)){X6.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"}if(Y6.focus){setTimeout(function(){X6.focus(X6.options.focusInEnd);!X6.options.autoClearinitialContent&&X6._selectionChange()},0)}if(!X6.container){X6.container=this.iframe.parentNode}if(Y6.fullscreen&&X6.ui){X6.ui.setFullScreen(true)}try{X6.document.execCommand("2D-position",false,false)}catch(ah){}try{X6.document.execCommand("enableInlineTableEditing",false,false)}catch(bh){}try{X6.document.execCommand("enableObjectResizing",false,false)}catch(ch){}X6._bindshortcutKeys();X6.isReady=1;X6.fireEvent("ready");Y6.onready&&Y6.onready.call(X6);if(!browser.ie9below){domUtils.on(X6.window,["blur","focus"],function(dh){if(dh.type=="blur"){X6._bakRange=X6.selection.getRange();try{X6._bakNativeRange=X6.selection.getNative().getRangeAt(0);X6.selection.getNative().removeAllRanges()}catch(dh){X6._bakNativeRange=null}}else{try{X6._bakRange&&X6._bakRange.select()}catch(dh){}}})}if(browser.gecko&&browser.version<=10902){X6.body.contentEditable=false;setTimeout(function(){X6.body.contentEditable=true},100);setInterval(function(){X6.body.style.height=X6.iframe.offsetHeight-20+"px"},100)}!Y6.isShow&&X6.setHide();Y6.readonly&&X6.setDisabled()},sync:function(eh){var fh=this,gh=eh?document.getElementById(eh):domUtils.findParent(fh.iframe.parentNode,function(hh){return hh.tagName=="FORM"},true);gh&&l6(gh,fh)},setHeight:function(ih,jh){if(ih!==parseInt(this.iframe.parentNode.style.height)){this.iframe.parentNode.style.height=ih+"px"}!jh&&(this.options.minFrameHeight=this.options.initialFrameHeight=ih);this.body.style.height=ih+"px";!jh&&this.trigger("setHeight")},addshortcutkey:function(kh,lh){var mh={};if(lh){mh[kh]=lh}else{mh=kh}utils.extend(this.shortcutkeys,mh)},_bindshortcutKeys:function(){var nh=this,oh=this.shortcutkeys;nh.addListener("keydown",function(ph,qh){var rh=qh.keyCode||qh.which;for(var sh in oh){var th=oh[sh].split(",");for(var uh=0,vh;vh=th[uh++];){vh=vh.split(":");var wh=vh[0],xh=vh[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(wh.toLowerCase())||/^(\d+)$/.test(wh)){if((RegExp.$1=="ctrl"?qh.ctrlKey||qh.metaKey:0)&&(RegExp.$2!=""?qh[RegExp.$2.slice(1)+"Key"]:1)&&rh==RegExp.$3||rh==RegExp.$1){if(nh.queryCommandState(sh,xh)!=-1)nh.execCommand(sh,xh);domUtils.preventDefault(qh)}}}}})},getContent:function(yh,zh,Ah,Bh,Ch){var Dh=this;if(yh&&utils.isFunction(yh)){zh=yh;yh=""}if(zh?!zh():!this.hasContents()){return""}Dh.fireEvent("beforegetcontent");var Eh=UE.htmlparser(Dh.body.innerHTML,Bh);Dh.filterOutputRule(Eh);Dh.fireEvent("aftergetcontent",yh,Eh);return Eh.toHtml(Ch)},getAllHtml:function(){var Fh=this,Gh=[],Hh="";Fh.fireEvent("getAllHtml",Gh);if(browser.ie&&browser.version>8){var Ih="";utils.each(Fh.document.styleSheets,function(Jh){Ih+=Jh.href?'<link rel="stylesheet" type="text/css" href="'+Jh.href+'" />':"<style>"+Jh.cssText+"</style>"});utils.each(Fh.document.getElementsByTagName("script"),function(Kh){Ih+=Kh.outerHTML})}return"<html><head>"+(Fh.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+Fh.options.charset+'"/>':"")+(Ih||Fh.document.getElementsByTagName("head")[0].innerHTML)+Gh.join("\n")+"</head>"+"<body "+(ie&&browser.version<9?'class="view"':"")+">"+Fh.getContent(null,null,true)+"</body></html>"},getPlainTxt:function(){var Lh=new RegExp(domUtils.fillChar,"g"),Mh=this.body.innerHTML.replace(/[\n\r]/g,"");Mh=Mh.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(Nh,Oh,Ph){return dtd.$block[Ph]?"\n":Oh?Oh:""});return Mh.replace(Lh,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var Qh=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(Qh,"").replace(/\u00a0/g," ")},setContent:function(Rh,Sh,Th){var Uh=this;Uh.fireEvent("beforesetcontent",Rh);var Vh=UE.htmlparser(Rh);Uh.filterInputRule(Vh);Rh=Vh.toHtml();Uh.body.innerHTML=(Sh?Uh.body.innerHTML:"")+Rh;function Wh(_h){return _h.tagName=="DIV"&&_h.getAttribute("cdata_tag")}if(Uh.options.enterTag=="p"){var Xh=this.body.firstChild,Yh;if(!Xh||Xh.nodeType==1&&(dtd.$cdata[Xh.tagName]||Wh(Xh)||domUtils.isCustomeNode(Xh))&&Xh===this.body.lastChild){this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML}else{var Zh=Uh.document.createElement("p");while(Xh){while(Xh&&(Xh.nodeType==3||Xh.nodeType==1&&dtd.p[Xh.tagName]&&!dtd.$cdata[Xh.tagName])){Yh=Xh.nextSibling;Zh.appendChild(Xh);Xh=Yh}if(Zh.firstChild){if(!Xh){Uh.body.appendChild(Zh);break}else{Xh.parentNode.insertBefore(Zh,Xh);Zh=Uh.document.createElement("p")}}Xh=Xh.nextSibling}}}Uh.fireEvent("aftersetcontent");Uh.fireEvent("contentchange");!Th&&Uh._selectionChange();Uh._bakRange=Uh._bakIERange=Uh._bakNativeRange=null;var $h;if(browser.gecko&&($h=this.selection.getNative())){$h.removeAllRanges()}if(Uh.options.autoSyncData){Uh.form&&l6(Uh.form,Uh)}},focus:function(a7){try{var b7=this,c7=b7.selection.getRange();if(a7){var d7=b7.body.lastChild;if(d7&&d7.nodeType==1&&!dtd.$empty[d7.tagName]){if(domUtils.isEmptyBlock(d7)){c7.setStartAtFirst(d7)}else{c7.setStartAtLast(d7)}c7.collapse(true)}c7.setCursor(true)}else{if(!c7.collapsed&&domUtils.isBody(c7.startContainer)&&c7.startOffset==0){var d7=b7.body.firstChild;if(d7&&d7.nodeType==1&&!dtd.$empty[d7.tagName]){c7.setStartAtFirst(d7).collapse(true)}}c7.select(true)}this.fireEvent("focus selectionchange")}catch(e7){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var f7=this.selection.getNative();if(f7.empty&&browser.ie){var g7=document.body.createTextRange();g7.moveToElementText(document.body);g7.collapse(true);g7.select();f7.empty()}else{f7.removeAllRanges()}},_initEvents:function(){var h7=this,i7=h7.document,j7=h7.window;h7._proxyDomEvent=utils.bind(h7._proxyDomEvent,h7);domUtils.on(i7,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],h7._proxyDomEvent);domUtils.on(j7,["focus","blur"],h7._proxyDomEvent);domUtils.on(h7.body,"drop",function(k7){if(browser.gecko&&k7.stopPropagation){k7.stopPropagation()}h7.fireEvent("contentchange")});domUtils.on(i7,["mouseup","keydown"],function(l7){if(l7.type=="keydown"&&(l7.ctrlKey||l7.metaKey||l7.shiftKey||l7.altKey)){return}if(l7.button==2)return;h7._selectionChange(250,l7)})},_proxyDomEvent:function(m7){if(this.fireEvent("before"+m7.type.replace(/^on/,"").toLowerCase())===false){return false}if(this.fireEvent(m7.type.replace(/^on/,""),m7)===false){return false}return this.fireEvent("after"+m7.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(n7,o7){var p7=this;var q7=false;var r7,s7;if(browser.ie&&browser.version<9&&o7&&o7.type=="mouseup"){var t7=this.selection.getRange();if(!t7.collapsed){q7=true;r7=o7.clientX;s7=o7.clientY}}clearTimeout(k6);k6=setTimeout(function(){if(!p7.selection||!p7.selection.getNative()){return}var u7;if(q7&&p7.selection.getNative().type=="None"){u7=p7.document.body.createTextRange();try{u7.moveToPoint(r7,s7)}catch(w7){u7=null}}var v7;if(u7){v7=p7.selection.getIERange;p7.selection.getIERange=function(){return u7}}p7.selection.cache();if(v7){p7.selection.getIERange=v7}if(p7.selection._cachedRange&&p7.selection._cachedStartElement){p7.fireEvent("beforeselectionchange");p7.fireEvent("selectionchange",!!o7);p7.fireEvent("afterselectionchange");p7.selection.clear()}},n7||50)},_callCmdFn:function(x7,y7){var z7=y7[0].toLowerCase(),A7,B7;A7=this.commands[z7]||UE.commands[z7];B7=A7&&A7[x7];if((!A7||!B7)&&x7=="queryCommandState"){return 0}else if(B7){return B7.apply(this,y7)}},execCommand:function(C7){C7=C7.toLowerCase();var D7=this,E7,F7=D7.commands[C7]||UE.commands[C7];if(!F7||!F7.execCommand){return null}if(!F7.notNeedUndo&&!D7.__hasEnterExecCommand){D7.__hasEnterExecCommand=true;if(D7.queryCommandState.apply(D7,arguments)!=-1){D7.fireEvent("saveScene");D7.fireEvent.apply(D7,["beforeexeccommand",C7].concat(arguments));E7=this._callCmdFn("execCommand",arguments);D7.fireEvent.apply(D7,["afterexeccommand",C7].concat(arguments));D7.fireEvent("saveScene")}D7.__hasEnterExecCommand=false}else{E7=this._callCmdFn("execCommand",arguments);!D7.__hasEnterExecCommand&&!F7.ignoreContentChange&&!D7._ignoreContentChange&&D7.fireEvent("contentchange")}!D7.__hasEnterExecCommand&&!F7.ignoreContentChange&&!D7._ignoreContentChange&&D7._selectionChange();return E7},queryCommandState:function(G7){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(H7){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(I7){if(I7){for(var J7=0,K7;K7=I7[J7++];){if(this.document.getElementsByTagName(K7).length>0){return true}}}if(!domUtils.isEmptyBlock(this.body)){return true}I7=["div"];for(J7=0;K7=I7[J7++];){var L7=domUtils.getElementsByTagName(this.document,K7);for(var M7=0,N7;N7=L7[M7++];){if(domUtils.isCustomeNode(N7)){return true}}}return false},reset:function(){this.fireEvent("reset")},setEnabled:function(){var O7=this,P7;if(O7.body.contentEditable=="false"){O7.body.contentEditable=true;P7=O7.selection.getRange();try{P7.moveToBookmark(O7.lastBk);delete O7.lastBk}catch(Q7){P7.setStartAtFirst(O7.body).collapse(true)}P7.select(true);if(O7.bkqueryCommandState){O7.queryCommandState=O7.bkqueryCommandState;delete O7.bkqueryCommandState}if(O7.bkqueryCommandValue){O7.queryCommandValue=O7.bkqueryCommandValue;delete O7.bkqueryCommandValue}O7.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(R7){var S7=this;R7=R7?utils.isArray(R7)?R7:[R7]:[];if(S7.body.contentEditable=="true"){if(!S7.lastBk){S7.lastBk=S7.selection.getRange().createBookmark(true)}S7.body.contentEditable=false;S7.bkqueryCommandState=S7.queryCommandState;S7.bkqueryCommandValue=S7.queryCommandValue;S7.queryCommandState=function(T7){if(utils.indexOf(R7,T7)!=-1){return S7.bkqueryCommandState.apply(S7,arguments)}return-1};S7.queryCommandValue=function(U7){if(utils.indexOf(R7,U7)!=-1){return S7.bkqueryCommandValue.apply(S7,arguments)}return null};S7.fireEvent("selectionchange")}},disable:function(V7){return this.setDisabled(V7)},_setDefaultContent:function(){function W7(){var X7=this;if(X7.document.getElementById("initContent")){X7.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";X7.removeListener("firstBeforeExecCommand focus",W7);setTimeout(function(){X7.focus();X7._selectionChange()},0)}}return function(Y7){var Z7=this;Z7.body.innerHTML='<p id="initContent">'+Y7+"</p>";Z7.addListener("firstBeforeExecCommand focus",W7)}}(),setShow:function(){var $7=this,_7=$7.selection.getRange();if($7.container.style.display=="none"){try{_7.moveToBookmark($7.lastBk);delete $7.lastBk}catch(ai){_7.setStartAtFirst($7.body).collapse(true)}setTimeout(function(){_7.select(true)},100);$7.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var bi=this;if(!bi.lastBk){bi.lastBk=bi.selection.getRange().createBookmark(true)}bi.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(di){var ei=UE.I18N[this.options.lang];if(!ei){throw Error("not import language file")}di=(di||"").split(".");for(var fi=0,gi;gi=di[fi++];){ei=ei[gi];if(!ei)break}return ei},getContentLength:function(hi,ii){var ji=this.getContent(false,false,true).length;if(hi){ii=(ii||[]).concat(["hr","img","iframe"]);ji=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var ki=0,li;li=ii[ki++];){ji+=this.document.getElementsByTagName(li).length}}return ji},addInputRule:function(mi){this.inputRules.push(mi)},filterInputRule:function(ni){for(var oi=0,pi;pi=this.inputRules[oi++];){pi.call(this,ni)}},addOutputRule:function(qi){this.outputRules.push(qi)},filterOutputRule:function(ri){for(var si=0,ti;ti=this.outputRules[si++];){ti.call(this,ri)}},getActionUrl:function(ui){var vi=this.getOpt(ui)||ui,wi=this.getOpt("imageUrl"),xi=this.getOpt("serverUrl");if(!xi&&wi){xi=wi.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")}if(xi){xi=xi+(xi.indexOf("?")==-1?"?":"&")+"action="+(vi||"");return utils.formatUrl(xi)}else{return""}}};utils.inherits(p6,EventBase)})();UE.Editor.defaultOptions=function(yi){var zi=yi.options.UEDITOR_HOME_URL;return{isShow:true,initialContent:"",initialStyle:"",autoClearinitialContent:false,iframeCssUrl:zi+"themes/iframe.css",textarea:"editorValue",focus:false,focusInEnd:true,autoClearEmptyNode:true,fullscreen:false,readonly:false,zIndex:999,imagePopup:true,enterTag:"p",customDomain:false,lang:"zh-cn",langPath:zi+"lang/",theme:"default",themePath:zi+"themes/",allHtmlEnabled:false,scaleEnabled:false,tableNativeEditInFF:false,autoSyncData:true,fileNameFormat:"{time}{rand:6}"}};(function(){UE.Editor.prototype.loadServerConfig=function(){var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=false;configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config);me.fireEvent("serverConfigLoaded");me._serverConfigLoaded=true}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}});function showErrorMsg(Ai){console&&console.error(Ai)}};UE.Editor.prototype.isServerConfigLoaded=function(){var Bi=this;return Bi._serverConfigLoaded||false};UE.Editor.prototype.afterConfigReady=function(Ci){if(!Ci||!utils.isFunction(Ci))return;var Di=this;var Ei=function(){Ci.apply(Di,arguments);Di.removeListener("serverConfigLoaded",Ei)};if(Di.isServerConfigLoaded()){Ci.call(Di,"serverConfigLoaded")}else{Di.addListener("serverConfigLoaded",Ei)}}})();UE.ajax=function(){var Fi="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP");Fi="ActiveXObject('Msxml2.XMLHTTP')"}catch(Ki){try{new ActiveXObject("Microsoft.XMLHTTP");Fi="ActiveXObject('Microsoft.XMLHTTP')"}catch(Li){}}var Gi=new Function("return new "+Fi);function Hi(Mi){var Ni=[];for(var Oi in Mi){if(Oi=="method"||Oi=="timeout"||Oi=="async"||Oi=="dataType"||Oi=="callback")continue;if(Mi[Oi]==undefined||Mi[Oi]==null)continue;if(!((typeof Mi[Oi]).toLowerCase()=="function"||(typeof Mi[Oi]).toLowerCase()=="object")){Ni.push(encodeURIComponent(Oi)+"="+encodeURIComponent(Mi[Oi]))}else if(utils.isArray(Mi[Oi])){for(var Pi=0;Pi<Mi[Oi].length;Pi++){Ni.push(encodeURIComponent(Oi)+"[]="+encodeURIComponent(Mi[Oi][Pi]))}}}return Ni.join("&")}function Ii(Qi,Ri){var Si=Gi(),Ti=false,Ui={method:"POST",timeout:5e3,async:true,data:{},onsuccess:function(){},onerror:function(){}};if(typeof Qi==="object"){Ri=Qi;Qi=Ri.url}if(!Si||!Qi)return;var Vi=Ri?utils.extend(Ui,Ri):Ui;var Wi=Hi(Vi);if(!utils.isEmptyObject(Vi.data)){Wi+=(Wi?"&":"")+Hi(Vi.data)}var Xi=setTimeout(function(){if(Si.readyState!=4){Ti=true;Si.abort();clearTimeout(Xi)}},Vi.timeout);var Yi=Vi.method.toUpperCase();var Zi=Qi+(Qi.indexOf("?")==-1?"?":"&")+(Yi=="POST"?"":Wi+"&noCache="+ +new Date);Si.open(Yi,Zi,Vi.async);Si.onreadystatechange=function(){if(Si.readyState==4){if(!Ti&&Si.status==200){Vi.onsuccess(Si)}else{Vi.onerror(Si)}}};if(Yi=="POST"){Si.setRequestHeader("Content-Type","application/x-www-form-urlencoded");Si.send(Wi)}else{Si.send(null)}}function Ji($i,_i){var a8=_i.onsuccess||function(){},b8=document.createElement("SCRIPT"),c8=_i||{},d8=c8["charset"],e8=c8["jsonp"]||"callback",f8,g8=c8["timeOut"]||0,h8,i8=new RegExp("(\\?|&)"+e8+"=([^&]*)"),j8;if(utils.isFunction(a8)){f8="bd__editor__"+Math.floor(Math.random()*2147483648).toString(36);window[f8]=m8(0)}else if(utils.isString(a8)){f8=a8}else{if(j8=i8.exec($i)){f8=j8[2]}}$i=$i.replace(i8,"$1"+e8+"="+f8);if($i.search(i8)<0){$i+=($i.indexOf("?")<0?"?":"&")+e8+"="+f8}var k8=Hi(_i);if(!utils.isEmptyObject(_i.data)){k8+=(k8?"&":"")+Hi(_i.data)}if(k8){$i=$i.replace(/\?/,"?"+k8+"&")}b8.onerror=m8(1);if(g8){h8=setTimeout(m8(1),g8)}l8(b8,$i,d8);function l8(n8,o8,p8){n8.setAttribute("type","text/javascript");n8.setAttribute("defer","defer");p8&&n8.setAttribute("charset",p8);n8.setAttribute("src",o8);document.getElementsByTagName("head")[0].appendChild(n8)}function m8(q8){return function(){try{if(q8){c8.onerror&&c8.onerror()}else{try{clearTimeout(h8);a8.apply(window,arguments)}catch(r8){}}}catch(s8){c8.onerror&&c8.onerror.call(window,s8)}finally{c8.oncomplete&&c8.oncomplete.apply(window,arguments);b8.parentNode&&b8.parentNode.removeChild(b8);window[f8]=null;try{delete window[f8]}catch(t8){}}}}}return{request:function(u8,v8){if(v8&&v8.dataType=="jsonp"){Ji(u8,v8)}else{Ii(u8,v8)}},getJSONP:function(w8,x8,y8){var z8={data:x8,oncomplete:y8};Ji(w8,z8)}}}();var filterWord=UE.filterWord=function(){function A8(D8){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(D8)}function B8(E8){E8=E8.replace(/[\d.]+\w+/g,function(F8){return utils.transUnitToPx(F8)});return E8}function C8(G8){return G8.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(H8){if(browser.opera){return""}try{if(/Bitmap/i.test(H8)){return""}var I8=H8.match(/width:([ \d.]*p[tx])/i)[1],J8=H8.match(/height:([ \d.]*p[tx])/i)[1],K8=H8.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+B8(I8)+'" height="'+B8(J8)+'" src="'+K8+'" />'}catch(L8){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(M8,N8,O8,P8){return N8=="class"&&P8=="MsoListParagraph"?M8:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(Q8,R8,S8){return S8.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(T8,U8,V8,W8){var X8=[],Y8=W8.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(dj){return utils.transUnitToPx(dj)}).split(/;\s*/g);for(var Z8=0,$8;$8=Y8[Z8];Z8++){var _8,aj,bj=$8.split(":");if(bj.length==2){_8=bj[0].toLowerCase();aj=bj[1].toLowerCase();if(/^(background)\w*/.test(_8)&&aj.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(_8)&&/^0\w+$/.test(aj)){continue}switch(_8){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":if(!/<table/.test(U8))X8[Z8]=_8.replace(/^mso-|-alt$/g,"")+":"+B8(aj);continue;case"horiz-align":X8[Z8]="text-align:"+aj;continue;case"vert-align":X8[Z8]="vertical-align:"+aj;continue;case"font-color":case"mso-foreground":X8[Z8]="color:"+aj;continue;case"mso-background":case"mso-highlight":X8[Z8]="background:"+aj;continue;case"mso-default-height":X8[Z8]="min-height:"+B8(aj);continue;case"mso-default-width":X8[Z8]="min-width:"+B8(aj);continue;case"mso-padding-between-alt":X8[Z8]="border-collapse:separate;border-spacing:"+B8(aj);continue;case"text-line-through":if(aj=="single"||aj=="double"){X8[Z8]="text-decoration:line-through"}continue;case"mso-zero-height":if(aj=="yes"){X8[Z8]="display:none"}continue;case"margin":if(!/[1-9]/.test(aj)){continue}}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(_8)||/text\-indent|padding|margin/.test(_8)&&/\-[\d.]+/.test(aj)){continue}X8[Z8]=_8+":"+bj[1]}}return U8+(X8.length?' style="'+X8.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(ej){return A8(ej)?C8(ej):ej}}();(function(){var fj=UE.uNode=function(tj){this.type=tj.type;this.data=tj.data;this.tagName=tj.tagName;this.parentNode=tj.parentNode;this.attrs=tj.attrs||{};this.children=tj.children};var gj={href:1,src:1,_src:1,_href:1,cdata_data:1};var hj={style:1,script:1};var ij="    ",jj="\n";function kj(uj,vj,wj){uj.push(jj);return vj+(wj?1:-1)}function lj(xj,yj){for(var zj=0;zj<yj;zj++){xj.push(ij)}}fj.createElement=function(Aj){if(/[<>]/.test(Aj)){return UE.htmlparser(Aj).children[0]}else{return new fj({type:"element",children:[],tagName:Aj})}};fj.createText=function(Bj,Cj){return new UE.uNode({type:"text",data:Cj?Bj:utils.unhtml(Bj||"")})};function mj(Dj,Ej,Fj,Gj){switch(Dj.type){case"root":for(var Hj=0,Ij;Ij=Dj.children[Hj++];){if(Fj&&Ij.type=="element"&&!dtd.$inlineWithA[Ij.tagName]&&Hj>1){kj(Ej,Gj,true);lj(Ej,Gj)}mj(Ij,Ej,Fj,Gj)}break;case"text":nj(Dj,Ej);break;case"element":oj(Dj,Ej,Fj,Gj);break;case"comment":pj(Dj,Ej,Fj)}return Ej}function nj(Jj,Kj){if(Jj.parentNode.tagName=="pre"){Kj.push(Jj.data)}else{Kj.push(hj[Jj.parentNode.tagName]?utils.html(Jj.data):Jj.data.replace(/[ ]{2}/g," &nbsp;"))}}function oj(Lj,Mj,Nj,Oj){var Pj="";if(Lj.attrs){Pj=[];var Qj=Lj.attrs;for(var Rj in Qj){Pj.push(Rj+(Qj[Rj]!==undefined?'="'+(gj[Rj]?utils.html(Qj[Rj]).replace(/["]/g,function(Uj){return"&quot;"}):utils.unhtml(Qj[Rj]))+'"':""))}Pj=Pj.join(" ")}Mj.push("<"+Lj.tagName+(Pj?" "+Pj:"")+(dtd.$empty[Lj.tagName]?"/":"")+">");if(Nj&&!dtd.$inlineWithA[Lj.tagName]&&Lj.tagName!="pre"){if(Lj.children&&Lj.children.length){Oj=kj(Mj,Oj,true);lj(Mj,Oj)}}if(Lj.children&&Lj.children.length){for(var Sj=0,Tj;Tj=Lj.children[Sj++];){if(Nj&&Tj.type=="element"&&!dtd.$inlineWithA[Tj.tagName]&&Sj>1){kj(Mj,Oj);lj(Mj,Oj)}mj(Tj,Mj,Nj,Oj)}}if(!dtd.$empty[Lj.tagName]){if(Nj&&!dtd.$inlineWithA[Lj.tagName]&&Lj.tagName!="pre"){if(Lj.children&&Lj.children.length){Oj=kj(Mj,Oj);lj(Mj,Oj)}}Mj.push("</"+Lj.tagName+">")}}function pj(Vj,Wj){Wj.push("\x3c!--"+Vj.data+"--\x3e")}function qj(Xj,Yj){var Zj;if(Xj.type=="element"&&Xj.getAttr("id")==Yj){return Xj}if(Xj.children&&Xj.children.length){for(var $j=0,_j;_j=Xj.children[$j++];){if(Zj=qj(_j,Yj)){return Zj}}}}function rj(a9,b9,c9){if(a9.type=="element"&&a9.tagName==b9){c9.push(a9)}if(a9.children&&a9.children.length){for(var d9=0,e9;e9=a9.children[d9++];){rj(e9,b9,c9)}}}function sj(f9,g9){if(f9.children&&f9.children.length){for(var h9=0,i9;i9=f9.children[h9];){sj(i9,g9);if(i9.parentNode){if(i9.children&&i9.children.length){g9(i9)}if(i9.parentNode)h9++}}}else{g9(f9)}}fj.prototype={toHtml:function(j9){var k9=[];mj(this,k9,j9,0);return k9.join("")},innerHTML:function(l9){if(this.type!="element"||dtd.$empty[this.tagName]){return this}if(utils.isString(l9)){if(this.children){for(var m9=0,n9;n9=this.children[m9++];){n9.parentNode=null}}this.children=[];var o9=UE.htmlparser(l9);for(var m9=0,n9;n9=o9.children[m9++];){this.children.push(n9);n9.parentNode=this}return this}else{var o9=new UE.uNode({type:"root",children:this.children});return o9.toHtml()}},innerText:function(p9,q9){if(this.type!="element"||dtd.$empty[this.tagName]){return this}if(p9){if(this.children){for(var r9=0,s9;s9=this.children[r9++];){s9.parentNode=null}}this.children=[];this.appendChild(fj.createText(p9,q9));return this}else{return this.toHtml().replace(/<[^>]+>/g,"")}},getData:function(){if(this.type=="element")return"";return this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){var t9=this.parentNode;for(var u9=0,v9;v9=t9.children[u9];u9++){if(v9===this){return u9==0?null:t9.children[u9-1]}}},nextSibling:function(){var w9=this.parentNode;for(var x9=0,y9;y9=w9.children[x9++];){if(y9===this){return w9.children[x9]}}},replaceChild:function(z9,A9){if(this.children){if(z9.parentNode){z9.parentNode.removeChild(z9)}for(var B9=0,C9;C9=this.children[B9];B9++){if(C9===A9){this.children.splice(B9,1,z9);A9.parentNode=null;z9.parentNode=this;return z9}}}},appendChild:function(D9){if(this.type=="root"||this.type=="element"&&!dtd.$empty[this.tagName]){if(!this.children){this.children=[]}if(D9.parentNode){D9.parentNode.removeChild(D9)}for(var E9=0,F9;F9=this.children[E9];E9++){if(F9===D9){this.children.splice(E9,1);break}}this.children.push(D9);D9.parentNode=this;return D9}},insertBefore:function(G9,H9){if(this.children){if(G9.parentNode){G9.parentNode.removeChild(G9)}for(var I9=0,J9;J9=this.children[I9];I9++){if(J9===H9){this.children.splice(I9,0,G9);G9.parentNode=this;return G9}}}},insertAfter:function(K9,L9){if(this.children){if(K9.parentNode){K9.parentNode.removeChild(K9)}for(var M9=0,N9;N9=this.children[M9];M9++){if(N9===L9){this.children.splice(M9+1,0,K9);K9.parentNode=this;return K9}}}},removeChild:function(O9,P9){if(this.children){for(var Q9=0,R9;R9=this.children[Q9];Q9++){if(R9===O9){this.children.splice(Q9,1);R9.parentNode=null;if(P9&&R9.children&&R9.children.length){for(var S9=0,T9;T9=R9.children[S9];S9++){this.children.splice(Q9+S9,0,T9);T9.parentNode=this}}return R9}}}},getAttr:function(U9){return this.attrs&&this.attrs[U9.toLowerCase()]},setAttr:function(V9,W9){if(!V9){delete this.attrs;return}if(!this.attrs){this.attrs={}}if(utils.isObject(V9)){for(var X9 in V9){if(!V9[X9]){delete this.attrs[X9]}else{this.attrs[X9.toLowerCase()]=V9[X9]}}}else{if(!W9){delete this.attrs[V9]}else{this.attrs[V9.toLowerCase()]=W9}}},getIndex:function(){var Y9=this.parentNode;for(var Z9=0,$9;$9=Y9.children[Z9];Z9++){if($9===this){return Z9}}return-1},getNodeById:function(_9){var ak;if(this.children&&this.children.length){for(var bk=0,ck;ck=this.children[bk++];){if(ak=qj(ck,_9)){return ak}}}},getNodesByTagName:function(dk){dk=utils.trim(dk).replace(/[ ]{2,}/g," ").split(" ");var ek=[],fk=this;utils.each(dk,function(gk){if(fk.children&&fk.children.length){for(var hk=0,ik;ik=fk.children[hk++];){rj(ik,gk,ek)}}});return ek},getStyle:function(jk){var kk=this.getAttr("style");if(!kk){return""}var lk=new RegExp("(^|;)\\s*"+jk+":([^;]+)","i");var mk=kk.match(lk);if(mk&&mk[0]){return mk[2]}return""},setStyle:function(nk,ok){function pk(sk,tk){var uk=new RegExp("(^|;)\\s*"+sk+":([^;]+;?)","gi");qk=qk.replace(uk,"$1");if(tk){qk=sk+":"+utils.unhtml(tk)+";"+qk}}var qk=this.getAttr("style");if(!qk){qk=""}if(utils.isObject(nk)){for(var rk in nk){pk(rk,nk[rk])}}else{pk(nk,ok)}this.setAttr("style",utils.trim(qk))},traversal:function(vk){if(this.children&&this.children.length){sj(this,vk)}return this}}})();var htmlparser=UE.htmlparser=function(wk,xk){var yk=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,zk=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g;var Ak={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};wk=wk.replace(new RegExp(domUtils.fillChar,"g"),"");if(!xk){wk=wk.replace(new RegExp("[\\r\\t\\n"+(xk?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(xk?"":" ")+"]*","g"),function(Ok,Pk){if(Pk&&Ak[Pk.toLowerCase()]){return Ok.replace(/(^[\n\r]+)|([\n\r]+$)/g,"")}return Ok.replace(new RegExp("^[\\r\\n"+(xk?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(xk?"":" ")+"]+$"),"")})}var Bk={href:1,src:1};var Ck=UE.uNode,Dk={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},Ek={ol:"li",ul:"li"};function Fk(Qk,Rk){if(Ek[Qk.tagName]){var Sk=Ck.createElement(Ek[Qk.tagName]);Qk.appendChild(Sk);Sk.appendChild(Ck.createText(Rk));Qk=Sk}else{Qk.appendChild(Ck.createText(Rk))}}function Gk(Tk,Uk,Vk){var Wk;if(Wk=Dk[Uk]){var Xk=Tk,Yk;while(Xk.type!="root"){if(utils.isArray(Wk)?utils.indexOf(Wk,Xk.tagName)!=-1:Wk==Xk.tagName){Tk=Xk;Yk=true;break}Xk=Xk.parentNode}if(!Yk){Tk=Gk(Tk,utils.isArray(Wk)?Wk[0]:Wk)}}var Zk=new Ck({parentNode:Tk,type:"element",tagName:Uk.toLowerCase(),children:dtd.$empty[Uk]?null:[]});if(Vk){var $k={},_k;while(_k=zk.exec(Vk)){$k[_k[1].toLowerCase()]=Bk[_k[1].toLowerCase()]?_k[2]||_k[3]||_k[4]:utils.unhtml(_k[2]||_k[3]||_k[4])}Zk.attrs=$k}Tk.children.push(Zk);return dtd.$empty[Uk]?Tk:Zk}function Hk(al,bl){al.children.push(new Ck({type:"comment",data:bl,parentNode:al}))}var Ik,Jk=0,Kk=0;var Lk=new Ck({type:"root",children:[]});var Mk=Lk;while(Ik=yk.exec(wk)){Jk=Ik.index;try{if(Jk>Kk){Fk(Mk,wk.slice(Kk,Jk))}if(Ik[3]){if(dtd.$cdata[Mk.tagName]){Fk(Mk,Ik[0])}else{Mk=Gk(Mk,Ik[3].toLowerCase(),Ik[4])}}else if(Ik[1]){if(Mk.type!="root"){if(dtd.$cdata[Mk.tagName]&&!dtd.$cdata[Ik[1]]){Fk(Mk,Ik[0])}else{var Nk=Mk;while(Mk.type=="element"&&Mk.tagName!=Ik[1].toLowerCase()){Mk=Mk.parentNode;if(Mk.type=="root"){Mk=Nk;throw"break"}}Mk=Mk.parentNode}}}else if(Ik[2]){Hk(Mk,Ik[2])}}catch(cl){}Kk=yk.lastIndex}if(Kk<wk.length){Fk(Mk,wk.slice(Kk))}return Lk};var filterNode=UE.filterNode=function(){function dl(el,fl){switch(el.type){case"text":break;case"element":var gl;if(gl=fl[el.tagName]){if(gl==="-"){el.parentNode.removeChild(el)}else if(utils.isFunction(gl)){var hl=el.parentNode,il=el.getIndex();gl(el);if(el.parentNode){if(el.children){for(var jl=0,kl;kl=el.children[jl];){dl(kl,fl);if(kl.parentNode){jl++}}}}else{for(var jl=il,kl;kl=hl.children[jl];){dl(kl,fl);if(kl.parentNode){jl++}}}}else{var ll=gl["$"];if(ll&&el.attrs){var ml={},nl;for(var ol in ll){nl=el.getAttr(ol);if(ol=="style"&&utils.isArray(ll[ol])){var pl=[];utils.each(ll[ol],function(ql){var rl;if(rl=el.getStyle(ql)){pl.push(ql+":"+rl)}});nl=pl.join(";")}if(nl){ml[ol]=nl}}el.attrs=ml}if(el.children){for(var jl=0,kl;kl=el.children[jl];){dl(kl,fl);if(kl.parentNode){jl++}}}}}else{if(dtd.$cdata[el.tagName]){el.parentNode.removeChild(el)}else{var hl=el.parentNode,il=el.getIndex();el.parentNode.removeChild(el,true);for(var jl=il,kl;kl=hl.children[jl];){dl(kl,fl);if(kl.parentNode){jl++}}}}break;case"comment":el.parentNode.removeChild(el)}}return function(sl,tl){if(utils.isEmptyObject(tl)){return sl}var ul;if(ul=tl["-"]){utils.each(ul.split(" "),function(xl){tl[xl]="-"})}for(var vl=0,wl;wl=sl.children[vl];){dl(wl,tl);if(wl.parentNode){vl++}}return sl}}();UE.plugin=function(){var yl={};return{register:function(zl,Al,Bl,Cl){if(Bl&&utils.isFunction(Bl)){Cl=Bl;Bl=null}yl[zl]={optionName:Bl||zl,execFn:Al,afterDisabled:Cl}},load:function(Dl){utils.each(yl,function(El){var Fl=El.execFn.call(Dl);if(Dl.options[El.optionName]!==false){if(Fl){utils.each(Fl,function(Gl,Hl){switch(Hl.toLowerCase()){case"shortcutkey":Dl.addshortcutkey(Gl);break;case"bindevents":utils.each(Gl,function(Il,Jl){Dl.addListener(Jl,Il)});break;case"bindmultievents":utils.each(utils.isArray(Gl)?Gl:[Gl],function(Kl){var Ll=utils.trim(Kl.type).split(/\s+/);utils.each(Ll,function(Ml){Dl.addListener(Ml,Kl.handler)})});break;case"commands":utils.each(Gl,function(Nl,Ol){Dl.commands[Ol]=Nl});break;case"outputrule":Dl.addOutputRule(Gl);break;case"inputrule":Dl.addInputRule(Gl);break;case"defaultoptions":Dl.setOpt(Gl)}})}}else if(El.afterDisabled){El.afterDisabled.call(Dl)}});utils.each(UE.plugins,function(Pl){Pl.call(Dl)})},run:function(Ql,Rl){var Sl=yl[Ql];if(Sl){Sl.exeFn.call(Rl)}}}}();var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78};var LocalStorage=UE.LocalStorage=function(){var Tl=window.localStorage||Vl()||null,Ul="localStorage";return{saveLocalData:function(Wl,Xl){if(Tl&&Xl){Tl.setItem(Wl,Xl);return true}return false},getLocalData:function(Yl){if(Tl){return Tl.getItem(Yl)}return null},removeItem:function(Zl){Tl&&Tl.removeItem(Zl)}};function Vl(){var $l=document.createElement("div");$l.style.display="none";if(!$l.addBehavior){return null}$l.addBehavior("#default#userdata");return{getItem:function(_l){var am=null;try{document.body.appendChild($l);$l.load(Ul);am=$l.getAttribute(_l);document.body.removeChild($l)}catch(bm){}return am},setItem:function(cm,dm){document.body.appendChild($l);$l.setAttribute(cm,dm);$l.save(Ul);document.body.removeChild($l)},removeItem:function(em){document.body.appendChild($l);$l.removeAttribute(em);$l.save(Ul);document.body.removeChild($l)}}}}();(function(){var fm="ueditor_preference";UE.Editor.prototype.setPreferences=function(gm,hm){var im={};if(utils.isString(gm)){im[gm]=hm}else{im=gm}var jm=LocalStorage.getLocalData(fm);if(jm&&(jm=utils.str2json(jm))){utils.extend(jm,im)}else{jm=im}jm&&LocalStorage.saveLocalData(fm,utils.json2str(jm))};UE.Editor.prototype.getPreferences=function(km){var lm=LocalStorage.getLocalData(fm);if(lm&&(lm=utils.str2json(lm))){return km?lm[km]:lm}return null};UE.Editor.prototype.removePreferences=function(mm){var nm=LocalStorage.getLocalData(fm);if(nm&&(nm=utils.str2json(nm))){nm[mm]=undefined;delete nm[mm]}nm&&LocalStorage.saveLocalData(fm,utils.json2str(nm))}})();UE.plugins["defaultfilter"]=function(){var om=this;om.setOpt({allowDivTransToP:false,disabledTableInTable:true});om.addInputRule(function(pm){var qm=this.options.allowDivTransToP;var rm;function sm(tm){while(tm&&tm.type=="element"){if(tm.tagName=="td"){return true}tm=tm.parentNode}return false}pm.traversal(function(um){if(um.type=="element"){if(!dtd.$cdata[um.tagName]&&om.options.autoClearEmptyNode&&dtd.$inline[um.tagName]&&!dtd.$empty[um.tagName]&&(!um.attrs||utils.isEmptyObject(um.attrs))){if(!um.firstChild())um.parentNode.removeChild(um);else if(um.tagName=="span"&&(!um.attrs||utils.isEmptyObject(um.attrs))){um.parentNode.removeChild(um,true)}return}switch(um.tagName){case"style":case"script":um.setAttr({cdata_tag:um.tagName,cdata_data:um.innerHTML()||"",_ue_custom_node_:"true"});um.tagName="div";um.innerHTML("");break;case"a":if(rm=um.getAttr("href")){um.setAttr("_href",rm)}break;case"img":if(rm=um.getAttr("src")){if(/^data:/.test(rm)){um.parentNode.removeChild(um);break}}um.setAttr("_src",um.getAttr("src"));break;case"span":if(browser.webkit&&(rm=um.getStyle("white-space"))){if(/nowrap|normal/.test(rm)){um.setStyle("white-space","");if(om.options.autoClearEmptyNode&&utils.isEmptyObject(um.attrs)){um.parentNode.removeChild(um,true)}}}rm=um.getAttr("id");if(rm&&/^_baidu_bookmark_/i.test(rm)){um.parentNode.removeChild(um)}break;case"p":if(rm=um.getAttr("align")){um.setAttr("align");um.setStyle("text-align",rm)}utils.each(um.children,function(zm){if(zm.type=="element"&&zm.tagName=="p"){var Am=zm.nextSibling();um.parentNode.insertAfter(zm,um);var Bm=zm;while(Am){var Cm=Am.nextSibling();um.parentNode.insertAfter(Am,Bm);Bm=Am;Am=Cm}return false}});if(!um.firstChild()){um.innerHTML(browser.ie?"&nbsp;":"<br/>")}break;case"div":if(um.getAttr("cdata_tag")){break}rm=um.getAttr("class");if(rm&&/^line number\d+/.test(rm)){break}if(!qm){break}var vm,wm=UE.uNode.createElement("p");while(vm=um.firstChild()){if(vm.type=="text"||!UE.dom.dtd.$block[vm.tagName]){wm.appendChild(vm)}else{if(wm.firstChild()){um.parentNode.insertBefore(wm,um);wm=UE.uNode.createElement("p")}else{um.parentNode.insertBefore(vm,um)}}}if(wm.firstChild()){um.parentNode.insertBefore(wm,um)}um.parentNode.removeChild(um);break;case"dl":um.tagName="ul";break;case"dt":case"dd":um.tagName="li";break;case"li":var xm=um.getAttr("class");if(!xm||!/list\-/.test(xm)){um.setAttr()}var ym=um.getNodesByTagName("ol ul");UE.utils.each(ym,function(Dm){um.parentNode.insertAfter(Dm,um)});break;case"td":case"th":case"caption":if(!um.children||!um.children.length){um.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"))}break;case"table":if(om.options.disabledTableInTable&&sm(um)){um.parentNode.insertBefore(UE.uNode.createText(um.innerText()),um);um.parentNode.removeChild(um)}}}})});om.addOutputRule(function(Em){var Fm;Em.traversal(function(Gm){if(Gm.type=="element"){if(om.options.autoClearEmptyNode&&dtd.$inline[Gm.tagName]&&!dtd.$empty[Gm.tagName]&&(!Gm.attrs||utils.isEmptyObject(Gm.attrs))){if(!Gm.firstChild())Gm.parentNode.removeChild(Gm);else if(Gm.tagName=="span"&&(!Gm.attrs||utils.isEmptyObject(Gm.attrs))){Gm.parentNode.removeChild(Gm,true)}return}switch(Gm.tagName){case"div":if(Fm=Gm.getAttr("cdata_tag")){Gm.tagName=Fm;Gm.appendChild(UE.uNode.createText(Gm.getAttr("cdata_data")));Gm.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""})}break;case"a":if(Fm=Gm.getAttr("_href")){Gm.setAttr({href:utils.html(Fm),_href:""})}break;break;case"span":Fm=Gm.getAttr("id");if(Fm&&/^_baidu_bookmark_/i.test(Fm)){Gm.parentNode.removeChild(Gm)}break;case"img":if(Fm=Gm.getAttr("_src")){Gm.setAttr({src:Gm.getAttr("_src"),_src:""})}}}})})};UE.commands["inserthtml"]={execCommand:function(Hm,Im,Jm){var Km=this,Lm,Mm;if(!Im){return}if(Km.fireEvent("beforeinserthtml",Im)===true){return}Lm=Km.selection.getRange();Mm=Lm.document.createElement("div");Mm.style.display="inline";if(!Jm){var Nm=UE.htmlparser(Im);if(Km.options.filterRules){UE.filterNode(Nm,Km.options.filterRules)}Km.filterInputRule(Nm);Im=Nm.toHtml()}Mm.innerHTML=utils.trim(Im);if(!Lm.collapsed){var Om=Lm.startContainer;if(domUtils.isFillChar(Om)){Lm.setStartBefore(Om)}Om=Lm.endContainer;if(domUtils.isFillChar(Om)){Lm.setEndAfter(Om)}Lm.txtToElmBoundary();if(Lm.endContainer&&Lm.endContainer.nodeType==1){Om=Lm.endContainer.childNodes[Lm.endOffset];if(Om&&domUtils.isBr(Om)){Lm.setEndAfter(Om)}}if(Lm.startOffset==0){Om=Lm.startContainer;if(domUtils.isBoundaryNode(Om,"firstChild")){Om=Lm.endContainer;if(Lm.endOffset==(Om.nodeType==3?Om.nodeValue.length:Om.childNodes.length)&&domUtils.isBoundaryNode(Om,"lastChild")){Km.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";Lm.setStart(Km.body.firstChild,0).collapse(true)}}}!Lm.collapsed&&Lm.deleteContents();if(Lm.startContainer.nodeType==1){var Pm=Lm.startContainer.childNodes[Lm.startOffset],Qm;if(Pm&&domUtils.isBlockElm(Pm)&&(Qm=Pm.previousSibling)&&domUtils.isBlockElm(Qm)){Lm.setEnd(Qm,Qm.childNodes.length).collapse();while(Pm.firstChild){Qm.appendChild(Pm.firstChild)}domUtils.remove(Pm)}}}var Pm,Rm,Qm,Sm,Tm=0,Um;if(Lm.inFillChar()){Pm=Lm.startContainer;if(domUtils.isFillChar(Pm)){Lm.setStartBefore(Pm).collapse(true);domUtils.remove(Pm)}else if(domUtils.isFillChar(Pm,true)){Pm.nodeValue=Pm.nodeValue.replace(fillCharReg,"");Lm.startOffset--;Lm.collapsed&&Lm.collapse(true)}}var Vm=domUtils.findParentByTagName(Lm.startContainer,"li",true);if(Vm){var Wm,Xm;while(Pm=Mm.firstChild){while(Pm&&(Pm.nodeType==3||!domUtils.isBlockElm(Pm)||Pm.tagName=="HR")){Wm=Pm.nextSibling;Lm.insertNode(Pm).collapse();Xm=Pm;Pm=Wm}if(Pm){if(/^(ol|ul)$/i.test(Pm.tagName)){while(Pm.firstChild){Xm=Pm.firstChild;domUtils.insertAfter(Vm,Pm.firstChild);Vm=Vm.nextSibling}domUtils.remove(Pm)}else{var Ym;Wm=Pm.nextSibling;Ym=Km.document.createElement("li");domUtils.insertAfter(Vm,Ym);Ym.appendChild(Pm);Xm=Pm;Pm=Wm;Vm=Ym}}}Vm=domUtils.findParentByTagName(Lm.startContainer,"li",true);if(domUtils.isEmptyBlock(Vm)){domUtils.remove(Vm)}if(Xm){Lm.setStartAfter(Xm).collapse(true).select(true)}}else{while(Pm=Mm.firstChild){if(Tm){var Zm=Km.document.createElement("p");while(Pm&&(Pm.nodeType==3||!dtd.$block[Pm.tagName])){Um=Pm.nextSibling;Zm.appendChild(Pm);Pm=Um}if(Zm.firstChild){Pm=Zm}}Lm.insertNode(Pm);Um=Pm.nextSibling;if(!Tm&&Pm.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(Pm)){Rm=domUtils.findParent(Pm,function($m){return domUtils.isBlockElm($m)});if(Rm&&Rm.tagName.toLowerCase()!="body"&&!(dtd[Rm.tagName][Pm.nodeName]&&Pm.parentNode===Rm)){if(!dtd[Rm.tagName][Pm.nodeName]){Qm=Rm}else{Sm=Pm.parentNode;while(Sm!==Rm){Qm=Sm;Sm=Sm.parentNode}}domUtils.breakParent(Pm,Qm||Sm);var Qm=Pm.previousSibling;domUtils.trimWhiteTextNode(Qm);if(!Qm.childNodes.length){domUtils.remove(Qm)}if(!browser.ie&&(Wm=Pm.nextSibling)&&domUtils.isBlockElm(Wm)&&Wm.lastChild&&!domUtils.isBr(Wm.lastChild)){Wm.appendChild(Km.document.createElement("br"))}Tm=1}}var Wm=Pm.nextSibling;if(!Mm.firstChild&&Wm&&domUtils.isBlockElm(Wm)){Lm.setStart(Wm,0).collapse(true);break}Lm.setEndAfter(Pm).collapse()}Pm=Lm.startContainer;if(Um&&domUtils.isBr(Um)){domUtils.remove(Um)}if(domUtils.isBlockElm(Pm)&&domUtils.isEmptyNode(Pm)){if(Um=Pm.nextSibling){domUtils.remove(Pm);if(Um.nodeType==1&&dtd.$block[Um.tagName]){Lm.setStart(Um,0).collapse(true).shrinkBoundary()}}else{try{Pm.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(_m){Lm.setStartBefore(Pm);domUtils.remove(Pm)}}}try{Lm.select(true)}catch(an){}}setTimeout(function(){Lm=Km.selection.getRange();Lm.scrollToView(Km.autoHeightEnabled,Km.autoHeightEnabled?domUtils.getXY(Km.iframe).y:0);Km.fireEvent("afterinserthtml",Im)},200)}};UE.plugins["autotypeset"]=function(){this.setOpt({autotypeset:{mergeEmptyline:true,removeClass:true,removeEmptyline:false,textAlign:"left",imageBlockLine:"center",pasteFilter:false,clearFontSize:false,clearFontFamily:false,removeEmptyNode:false,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:false,indentValue:"2em",bdc2sb:false,tobdc:false}});var bn=this,cn=bn.options.autotypeset,dn={selectTdClass:1,pagebreak:1,anchorclass:1},en={li:1},fn={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1},gn;if(!cn){return}nn();function hn(on,pn){if(!on||on.nodeType==3)return 0;if(domUtils.isBr(on))return 1;if(on&&on.parentNode&&fn[on.tagName.toLowerCase()]){if(gn&&gn.contains(on)||on.getAttribute("pagebreak")){return 0}return pn?!domUtils.isEmptyBlock(on):domUtils.isEmptyBlock(on,new RegExp("[\\s"+domUtils.fillChar+"]","g"))}}function jn(qn){if(!qn.style.cssText){domUtils.removeAttributes(qn,["style"]);if(qn.tagName.toLowerCase()=="span"&&domUtils.hasNoAttributes(qn)){domUtils.remove(qn,true)}}}function kn(rn,sn){var tn=this,un;if(sn){if(!cn.pasteFilter){return}un=tn.document.createElement("div");un.innerHTML=sn.html}else{un=tn.document.body}var vn=domUtils.getElementsByTagName(un,"*");for(var wn=0,xn;xn=vn[wn++];){if(tn.fireEvent("excludeNodeinautotype",xn)===true){continue}if(cn.clearFontSize&&xn.style.fontSize){domUtils.removeStyle(xn,"font-size");jn(xn)}if(cn.clearFontFamily&&xn.style.fontFamily){domUtils.removeStyle(xn,"font-family");jn(xn)}if(hn(xn)){if(cn.mergeEmptyline){var yn=xn.nextSibling,zn,An=domUtils.isBr(xn);while(hn(yn)){zn=yn;yn=zn.nextSibling;if(An&&(!yn||yn&&!domUtils.isBr(yn))){break}domUtils.remove(zn)}}if(cn.removeEmptyline&&domUtils.inDoc(xn,un)&&!en[xn.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(xn)){yn=xn.nextSibling;if(yn&&!domUtils.isBr(yn)){continue}}domUtils.remove(xn);continue}}if(hn(xn,true)&&xn.tagName!="SPAN"){if(cn.indent){xn.style.textIndent=cn.indentValue}if(cn.textAlign){xn.style.textAlign=cn.textAlign}}if(cn.removeClass&&xn.className&&!dn[xn.className.toLowerCase()]){if(gn&&gn.contains(xn)){continue}domUtils.removeAttributes(xn,["class"])}if(cn.imageBlockLine&&xn.tagName.toLowerCase()=="img"&&!xn.getAttribute("emotion")){if(sn){var Bn=xn;switch(cn.imageBlockLine){case"left":case"right":case"none":var Cn=Bn.parentNode,zn,Dn,yn;while(dtd.$inline[Cn.tagName]||Cn.tagName=="A"){Cn=Cn.parentNode}zn=Cn;if(zn.tagName=="P"&&domUtils.getStyle(zn,"text-align")=="center"){if(!domUtils.isBody(zn)&&domUtils.getChildCount(zn,function(Hn){return!domUtils.isBr(Hn)&&!domUtils.isWhitespace(Hn)})==1){Dn=zn.previousSibling;yn=zn.nextSibling;if(Dn&&yn&&Dn.nodeType==1&&yn.nodeType==1&&Dn.tagName==yn.tagName&&domUtils.isBlockElm(Dn)){Dn.appendChild(zn.firstChild);while(yn.firstChild){Dn.appendChild(yn.firstChild)}domUtils.remove(zn);domUtils.remove(yn)}else{domUtils.setStyle(zn,"text-align","")}}}domUtils.setStyle(Bn,"float",cn.imageBlockLine);break;case"center":if(tn.queryCommandValue("imagefloat")!="center"){Cn=Bn.parentNode;domUtils.setStyle(Bn,"float","none");zn=Bn;while(Cn&&domUtils.getChildCount(Cn,function(In){return!domUtils.isBr(In)&&!domUtils.isWhitespace(In)})==1&&(dtd.$inline[Cn.tagName]||Cn.tagName=="A")){zn=Cn;Cn=Cn.parentNode}var En=tn.document.createElement("p");domUtils.setAttributes(En,{style:"text-align:center"});zn.parentNode.insertBefore(En,zn);En.appendChild(zn);domUtils.setStyle(zn,"float","")}}}else{var Fn=tn.selection.getRange();Fn.selectNode(xn).select();tn.execCommand("imagefloat",cn.imageBlockLine)}}if(cn.removeEmptyNode){if(cn.removeTagNames[xn.tagName.toLowerCase()]&&domUtils.hasNoAttributes(xn)&&domUtils.isEmptyBlock(xn)){domUtils.remove(xn)}}}if(cn.tobdc){var Gn=UE.htmlparser(un.innerHTML);Gn.traversal(function(Jn){if(Jn.type=="text"){Jn.data=mn(Jn.data)}});un.innerHTML=Gn.toHtml()}if(cn.bdc2sb){var Gn=UE.htmlparser(un.innerHTML);Gn.traversal(function(Kn){if(Kn.type=="text"){Kn.data=ln(Kn.data)}});un.innerHTML=Gn.toHtml()}if(sn){sn.html=un.innerHTML}}if(cn.pasteFilter){bn.addListener("beforepaste",kn)}function ln(Ln){var Mn="";for(var Nn=0;Nn<Ln.length;Nn++){var On=Ln.charCodeAt(Nn);if(On>=65281&&On<=65373){Mn+=String.fromCharCode(Ln.charCodeAt(Nn)-65248)}else if(On==12288){Mn+=String.fromCharCode(Ln.charCodeAt(Nn)-12288+32)}else{Mn+=Ln.charAt(Nn)}}return Mn}function mn(Pn){Pn=utils.html(Pn);var Qn="";var Rn="";for(var Sn=0;Sn<Pn.length;Sn++){if(Pn.charCodeAt(Sn)==32){Qn=Qn+String.fromCharCode(12288)}else if(Pn.charCodeAt(Sn)<127){Qn=Qn+String.fromCharCode(Pn.charCodeAt(Sn)+65248)}else{Qn+=Pn.charAt(Sn)}}return Qn}function nn(){var Tn=bn.getPreferences("autotypeset");utils.extend(bn.options.autotypeset,Tn)}bn.commands["autotypeset"]={execCommand:function(){bn.removeListener("beforepaste",kn);if(cn.pasteFilter){bn.addListener("beforepaste",kn)}kn.call(bn)}}};UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var Un=this,Vn=domUtils.findParentByTagName(Un.iframe,"form",false);if(Vn){if(Un.fireEvent("beforesubmit")===false){return}Un.sync();Vn.submit()}}}}}});UE.plugin.register("background",function(){var Wn=this,Xn="editor_background",Yn,Zn=new RegExp("body[\\s]*\\{(.+)\\}","i");function $n(bo){var co={},eo=bo.split(";");utils.each(eo,function(fo){var go=fo.indexOf(":"),ho=utils.trim(fo.substr(0,go)).toLowerCase();ho&&(co[ho]=utils.trim(fo.substr(go+1)||""))});return co}function _n(io){if(io){var jo=[];for(var ko in io){if(io.hasOwnProperty(ko)){jo.push(ko+":"+io[ko]+"; ")}}utils.cssRule(Xn,jo.length?"body{"+jo.join("")+"}":"",Wn.document)}else{utils.cssRule(Xn,"",Wn.document)}}var ao=Wn.hasContents;Wn.hasContents=function(){if(Wn.queryCommandValue("background")){return true}return ao.apply(Wn,arguments)};return{bindEvents:{getAllHtml:function(lo,mo){var no=this.body,oo=domUtils.getComputedStyle(no,"background-image"),po="";if(oo.indexOf(Wn.options.imagePath)>0){po=oo.substring(oo.indexOf(Wn.options.imagePath),oo.length-1).replace(/"|\(|\)/gi,"")}else{po=oo!="none"?oo.replace(/url\("?|"?\)/gi,""):""}var qo='<style type="text/css">body{';var ro={"background-color":domUtils.getComputedStyle(no,"background-color")||"#ffffff","background-image":po?"url("+po+")":"","background-repeat":domUtils.getComputedStyle(no,"background-repeat")||"","background-position":browser.ie?domUtils.getComputedStyle(no,"background-position-x")+" "+domUtils.getComputedStyle(no,"background-position-y"):domUtils.getComputedStyle(no,"background-position"),height:domUtils.getComputedStyle(no,"height")};for(var so in ro){if(ro.hasOwnProperty(so)){qo+=so+":"+ro[so]+"; "}}qo+="}</style> ";mo.push(qo)},aftersetcontent:function(){if(Yn==false)_n()}},inputRule:function(to){Yn=false;utils.each(to.getNodesByTagName("p"),function(uo){var vo=uo.getAttr("data-background");if(vo){Yn=true;_n($n(vo));uo.parentNode.removeChild(uo)}})},outputRule:function(wo){var xo=this,yo=(utils.cssRule(Xn,xo.document)||"").replace(/[\n\r]+/g,"").match(Zn);if(yo){wo.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(yo[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))}},commands:{background:{execCommand:function(zo,Ao){_n(Ao)},queryCommandValue:function(){var Bo=this,Co=(utils.cssRule(Xn,Bo.document)||"").replace(/[\n\r]+/g,"").match(Zn);return Co?$n(Co[1]):null},notNeedUndo:true}}}});UE.commands["imagefloat"]={execCommand:function(Do,Eo){var Fo=this,Go=Fo.selection.getRange();if(!Go.collapsed){var Ho=Go.getClosedNode();if(Ho&&Ho.tagName=="IMG"){switch(Eo){case"left":case"right":case"none":var Io=Ho.parentNode,Jo,Ko,Lo;while(dtd.$inline[Io.tagName]||Io.tagName=="A"){Io=Io.parentNode}Jo=Io;if(Jo.tagName=="P"&&domUtils.getStyle(Jo,"text-align")=="center"){if(!domUtils.isBody(Jo)&&domUtils.getChildCount(Jo,function(Mo){return!domUtils.isBr(Mo)&&!domUtils.isWhitespace(Mo)})==1){Ko=Jo.previousSibling;Lo=Jo.nextSibling;if(Ko&&Lo&&Ko.nodeType==1&&Lo.nodeType==1&&Ko.tagName==Lo.tagName&&domUtils.isBlockElm(Ko)){Ko.appendChild(Jo.firstChild);while(Lo.firstChild){Ko.appendChild(Lo.firstChild)}domUtils.remove(Jo);domUtils.remove(Lo)}else{domUtils.setStyle(Jo,"text-align","")}}Go.selectNode(Ho).select()}domUtils.setStyle(Ho,"float",Eo=="none"?"":Eo);if(Eo=="none"){domUtils.removeAttributes(Ho,"align")}break;case"center":if(Fo.queryCommandValue("imagefloat")!="center"){Io=Ho.parentNode;domUtils.setStyle(Ho,"float","");domUtils.removeAttributes(Ho,"align");Jo=Ho;while(Io&&domUtils.getChildCount(Io,function(No){return!domUtils.isBr(No)&&!domUtils.isWhitespace(No)})==1&&(dtd.$inline[Io.tagName]||Io.tagName=="A")){Jo=Io;Io=Io.parentNode}Go.setStartBefore(Jo).setCursor(false);Io=Fo.document.createElement("div");Io.appendChild(Jo);domUtils.setStyle(Jo,"float","");Fo.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+Io.innerHTML+"</p>");Jo=Fo.document.getElementById("_img_parent_tmp");Jo.removeAttribute("id");Jo=Jo.firstChild;Go.selectNode(Jo).select();Lo=Jo.parentNode.nextSibling;if(Lo&&domUtils.isEmptyNode(Lo)){domUtils.remove(Lo)}}break}}}},queryCommandValue:function(){var Oo=this.selection.getRange(),Po,Qo;if(Oo.collapsed){return"none"}Po=Oo.getClosedNode();if(Po&&Po.nodeType==1&&Po.tagName=="IMG"){Qo=domUtils.getComputedStyle(Po,"float")||Po.getAttribute("align");if(Qo=="none"){Qo=domUtils.getComputedStyle(Po.parentNode,"text-align")=="center"?"center":Qo}return{left:1,right:1,center:1}[Qo]?Qo:"none"}return"none"},queryCommandState:function(){var Ro=this.selection.getRange(),So;if(Ro.collapsed)return-1;So=Ro.getClosedNode();if(So&&So.nodeType==1&&So.tagName=="IMG"){return 0}return-1}};UE.commands["insertimage"]={execCommand:function(To,Uo){Uo=utils.isArray(Uo)?Uo:[Uo];if(!Uo.length){return}var Vo=this,Wo=Vo.selection.getRange(),Xo=Wo.getClosedNode();if(Vo.fireEvent("beforeinsertimage",Uo)===true){return}function Yo(dp){utils.each("width,height,border,hspace,vspace".split(","),function(ep){if(dp[ep]){dp[ep]=parseInt(dp[ep],10)||0}});utils.each("src,_src".split(","),function(fp){if(dp[fp]){dp[fp]=utils.unhtmlForUrl(dp[fp])}});utils.each("title,alt".split(","),function(gp){if(dp[gp]){dp[gp]=utils.unhtml(dp[gp])}})}if(Xo&&/img/i.test(Xo.tagName)&&(Xo.className!="edui-faked-video"||Xo.className.indexOf("edui-upload-video")!=-1)&&!Xo.getAttribute("word_img")){var Zo=Uo.shift();var $o=Zo["floatStyle"];delete Zo["floatStyle"];domUtils.setAttributes(Xo,Zo);Vo.execCommand("imagefloat",$o);if(Uo.length>0){Wo.setStartAfter(Xo).setCursor(false,true);Vo.execCommand("insertimage",Uo)}}else{var _o=[],ap="",bp;bp=Uo[0];if(Uo.length==1){Yo(bp);ap='<img src="'+bp.src+'" '+(bp._src?' _src="'+bp._src+'" ':"")+(bp.width?'width="'+bp.width+'" ':"")+(bp.height?' height="'+bp.height+'" ':"")+(bp["floatStyle"]=="left"||bp["floatStyle"]=="right"?' style="float:'+bp["floatStyle"]+';"':"")+(bp.title&&bp.title!=""?' title="'+bp.title+'"':"")+(bp.border&&bp.border!="0"?' border="'+bp.border+'"':"")+(bp.alt&&bp.alt!=""?' alt="'+bp.alt+'"':"")+(bp.hspace&&bp.hspace!="0"?' hspace = "'+bp.hspace+'"':"")+(bp.vspace&&bp.vspace!="0"?' vspace = "'+bp.vspace+'"':"")+"/>";if(bp["floatStyle"]=="center"){ap='<p style="text-align: center">'+ap+"</p>"}_o.push(ap)}else{for(var cp=0;bp=Uo[cp++];){Yo(bp);ap="<p "+(bp["floatStyle"]=="center"?'style="text-align: center" ':"")+'><img src="'+bp.src+'" '+(bp.width?'width="'+bp.width+'" ':"")+(bp._src?' _src="'+bp._src+'" ':"")+(bp.height?' height="'+bp.height+'" ':"")+' style="'+(bp["floatStyle"]&&bp["floatStyle"]!="center"?"float:"+bp["floatStyle"]+";":"")+(bp.border||"")+'" '+(bp.title?' title="'+bp.title+'"':"")+" /></p>";_o.push(ap)}}Vo.execCommand("insertHtml",_o.join(""))}Vo.fireEvent("afterinsertimage",Uo)}};UE.plugins["justify"]=function(){var hp=this,ip=domUtils.isBlockElm,jp={left:1,right:1,center:1,justify:1},kp=function(lp,mp){var np=lp.createBookmark(),op=function(wp){return wp.nodeType==1?wp.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(wp):!domUtils.isWhitespace(wp)};lp.enlarge(true);var pp=lp.createBookmark(),qp=domUtils.getNextDomNode(pp.start,false,op),rp=lp.cloneRange(),sp;while(qp&&!(domUtils.getPosition(qp,pp.end)&domUtils.POSITION_FOLLOWING)){if(qp.nodeType==3||!ip(qp)){rp.setStartBefore(qp);while(qp&&qp!==pp.end&&!ip(qp)){sp=qp;qp=domUtils.getNextDomNode(qp,false,null,function(xp){return!ip(xp)})}rp.setEndAfter(sp);var tp=rp.getCommonAncestor();if(!domUtils.isBody(tp)&&ip(tp)){domUtils.setStyles(tp,utils.isString(mp)?{"text-align":mp}:mp);qp=tp}else{var up=lp.document.createElement("p");domUtils.setStyles(up,utils.isString(mp)?{"text-align":mp}:mp);var vp=rp.extractContents();up.appendChild(vp);rp.insertNode(up);qp=up}qp=domUtils.getNextDomNode(qp,false,op)}else{qp=domUtils.getNextDomNode(qp,true,op)}}return lp.moveToBookmark(pp).moveToBookmark(np)};UE.commands["justify"]={execCommand:function(yp,zp){var Ap=this.selection.getRange(),Bp;if(Ap.collapsed){Bp=this.document.createTextNode("p");Ap.insertNode(Bp)}kp(Ap,zp);if(Bp){Ap.setStartBefore(Bp).collapse(true);domUtils.remove(Bp)}Ap.select();return true},queryCommandValue:function(){var Cp=this.selection.getStart(),Dp=domUtils.getComputedStyle(Cp,"text-align");return jp[Dp]?Dp:"left"},queryCommandState:function(){var Ep=this.selection.getStart(),Fp=Ep&&domUtils.findParentByTagName(Ep,["td","th","caption"],true);return Fp?-1:0}}};UE.plugins["font"]=function(){var Gp=this,Hp={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},Ip={underline:1,strikethrough:1,fontborder:1},Jp={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};Gp.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]});function Kp(Op){var Pp;while(Pp=Op.parentNode){if(Pp.tagName=="SPAN"&&domUtils.getChildCount(Pp,function(Qp){return!domUtils.isBookmarkNode(Qp)&&!domUtils.isBr(Qp)})==1){Pp.style.cssText+=Op.style.cssText;domUtils.remove(Op,true);Op=Pp}else{break}}}function Lp(Rp,Sp,Tp){if(Jp[Sp]){Rp.adjustmentBoundary();if(!Rp.collapsed&&Rp.startContainer.nodeType==1){var Up=Rp.startContainer.childNodes[Rp.startOffset];if(Up&&domUtils.isTagNode(Up,"span")){var Vp=Rp.createBookmark();utils.each(domUtils.getElementsByTagName(Up,"span"),function(Wp){if(!Wp.parentNode||domUtils.isBookmarkNode(Wp))return;if(Sp=="backcolor"&&domUtils.getComputedStyle(Wp,"background-color").toLowerCase()===Tp){return}domUtils.removeStyle(Wp,Jp[Sp]);if(Wp.style.cssText.replace(/^\s+$/,"").length==0){domUtils.remove(Wp,true)}});Rp.moveToBookmark(Vp)}}}}function Mp(Xp,Yp,Zp){var $p=Xp.collapsed,_p=Xp.createBookmark(),aq;if($p){aq=_p.start.parentNode;while(dtd.$inline[aq.tagName]){aq=aq.parentNode}}else{aq=domUtils.getCommonAncestor(_p.start,_p.end)}utils.each(domUtils.getElementsByTagName(aq,"span"),function(bq){if(!bq.parentNode||domUtils.isBookmarkNode(bq))return;if(/\s*border\s*:\s*none;?\s*/i.test(bq.style.cssText)){if(/^\s*border\s*:\s*none;?\s*$/.test(bq.style.cssText)){domUtils.remove(bq,true)}else{domUtils.removeStyle(bq,"border")}return}if(/border/i.test(bq.style.cssText)&&bq.parentNode.tagName=="SPAN"&&/border/i.test(bq.parentNode.style.cssText)){bq.style.cssText=bq.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")}if(!(Yp=="fontborder"&&Zp=="none")){var cq=bq.nextSibling;while(cq&&cq.nodeType==1&&cq.tagName=="SPAN"){if(domUtils.isBookmarkNode(cq)&&Yp=="fontborder"){bq.appendChild(cq);cq=bq.nextSibling;continue}if(cq.style.cssText==bq.style.cssText){domUtils.moveChild(cq,bq);domUtils.remove(cq)}if(bq.nextSibling===cq)break;cq=bq.nextSibling}}Kp(bq);if(browser.ie&&browser.version>8){var dq=domUtils.findParent(bq,function(eq){return eq.tagName=="SPAN"&&/background-color/.test(eq.style.cssText)});if(dq&&!/background-color/.test(bq.style.cssText)){bq.style.backgroundColor=dq.style.backgroundColor}}});Xp.moveToBookmark(_p);Lp(Xp,Yp,Zp)}Gp.addInputRule(function(fq){utils.each(fq.getNodesByTagName("u s del font strike"),function(gq){if(gq.tagName=="font"){var hq=[];for(var iq in gq.attrs){switch(iq){case"size":hq.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[gq.attrs[iq]]||gq.attrs[iq])+"px");break;case"color":hq.push("color:"+gq.attrs[iq]);break;case"face":hq.push("font-family:"+gq.attrs[iq]);break;case"style":hq.push(gq.attrs[iq])}}gq.attrs={style:hq.join(";")}}else{var jq=gq.tagName=="u"?"underline":"line-through";gq.attrs={style:(gq.getAttr("style")||"")+"text-decoration:"+jq+";"}}gq.tagName="span"})});for(var Np in Hp){(function(kq,lq){UE.commands[kq]={execCommand:function(mq,nq){nq=nq||(this.queryCommandState(mq)?"none":mq=="underline"?"underline":mq=="fontborder"?"1px solid #000":"line-through");var oq=this,pq=this.selection.getRange(),qq;if(nq=="default"){if(pq.collapsed){qq=oq.document.createTextNode("font");pq.insertNode(qq).select()}oq.execCommand("removeFormat","span,a",lq);if(qq){pq.setStartBefore(qq).collapse(true);domUtils.remove(qq)}Mp(pq,mq,nq);pq.select()}else{if(!pq.collapsed){if(Ip[kq]&&oq.queryCommandValue(kq)){oq.execCommand("removeFormat","span,a",lq)}pq=oq.selection.getRange();pq.applyInlineStyle("span",{style:lq+":"+nq});Mp(pq,mq,nq);pq.select()}else{var rq=domUtils.findParentByTagName(pq.startContainer,"span",true);qq=oq.document.createTextNode("font");if(rq&&!rq.children.length&&!rq[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length){pq.insertNode(qq);if(Ip[kq]){pq.selectNode(qq).select();oq.execCommand("removeFormat","span,a",lq,null);rq=domUtils.findParentByTagName(qq,"span",true);pq.setStartBefore(qq)}rq&&(rq.style.cssText+=";"+lq+":"+nq);pq.collapse(true).select()}else{pq.insertNode(qq);pq.selectNode(qq).select();rq=pq.document.createElement("span");if(Ip[kq]){if(domUtils.findParentByTagName(qq,"a",true)){pq.setStartBefore(qq).setCursor();domUtils.remove(qq);return}oq.execCommand("removeFormat","span,a",lq)}rq.style.cssText=lq+":"+nq;qq.parentNode.insertBefore(rq,qq);if(!browser.ie||browser.ie&&browser.version==9){var sq=rq.parentNode;while(!domUtils.isBlockElm(sq)){if(sq.tagName=="SPAN"){rq.style.cssText=sq.style.cssText+";"+rq.style.cssText}sq=sq.parentNode}}if(opera){setTimeout(function(){pq.setStart(rq,0).collapse(true);Mp(pq,mq,nq);pq.select()})}else{pq.setStart(rq,0).collapse(true);Mp(pq,mq,nq);pq.select()}}domUtils.remove(qq)}}return true},queryCommandValue:function(tq){var uq=this.selection.getStart();if(tq=="underline"||tq=="strikethrough"){var vq=uq,wq;while(vq&&!domUtils.isBlockElm(vq)&&!domUtils.isBody(vq)){if(vq.nodeType==1){wq=domUtils.getComputedStyle(vq,lq);if(wq!="none"){return wq}}vq=vq.parentNode}return"none"}if(tq=="fontborder"){var xq=uq,yq;while(xq&&dtd.$inline[xq.tagName]){if(yq=domUtils.getComputedStyle(xq,"border")){if(/1px/.test(yq)&&/solid/.test(yq)){return yq}}xq=xq.parentNode}return""}if(tq=="FontSize"){var zq=domUtils.getComputedStyle(uq,lq),xq=/^([\d\.]+)(\w+)$/.exec(zq);if(xq){return Math.floor(xq[1])+xq[2]}return zq}return domUtils.getComputedStyle(uq,lq)},queryCommandState:function(Aq){if(!Ip[Aq])return 0;var Bq=this.queryCommandValue(Aq);if(Aq=="fontborder"){return/1px/.test(Bq)&&/solid/.test(Bq)}else{return Aq=="underline"?/underline/.test(Bq):/line\-through/.test(Bq)}}}})(Np,Hp[Np])}};UE.plugins["link"]=function(){function Cq(Eq){var Fq=Eq.startContainer,Gq=Eq.endContainer;if(Fq=domUtils.findParentByTagName(Fq,"a",true)){Eq.setStartBefore(Fq)}if(Gq=domUtils.findParentByTagName(Gq,"a",true)){Eq.setEndAfter(Gq)}}UE.commands["unlink"]={execCommand:function(){var Hq=this.selection.getRange(),Iq;if(Hq.collapsed&&!domUtils.findParentByTagName(Hq.startContainer,"a",true)){return}Iq=Hq.createBookmark();Cq(Hq);Hq.removeInlineStyle("a").moveToBookmark(Iq).select()},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}};function Dq(Jq,Kq,Lq){var Mq=Jq.cloneRange(),Nq=Lq.queryCommandValue("link");Cq(Jq=Jq.adjustmentBoundary());var Oq=Jq.startContainer;if(Oq.nodeType==1&&Nq){Oq=Oq.childNodes[Jq.startOffset];if(Oq&&Oq.nodeType==1&&Oq.tagName=="A"&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(Oq[browser.ie?"innerText":"textContent"])){Oq[browser.ie?"innerText":"textContent"]=utils.html(Kq.textValue||Kq.href)}}if(!Mq.collapsed||Nq){Jq.removeInlineStyle("a");Mq=Jq.cloneRange()}if(Mq.collapsed){var Pq=Jq.document.createElement("a"),Qq="";if(Kq.textValue){Qq=utils.html(Kq.textValue);delete Kq.textValue}else{Qq=utils.html(Kq.href)}domUtils.setAttributes(Pq,Kq);Oq=domUtils.findParentByTagName(Mq.startContainer,"a",true);if(Oq&&domUtils.isInNodeEndBoundary(Mq,Oq)){Jq.setStartAfter(Oq).collapse(true)}Pq[browser.ie?"innerText":"textContent"]=Qq;Jq.insertNode(Pq).selectNode(Pq)}else{Jq.applyInlineStyle("a",Kq)}}UE.commands["link"]={execCommand:function(Rq,Sq){var Tq;Sq._href&&(Sq._href=utils.unhtml(Sq._href,/[<">]/g));Sq.href&&(Sq.href=utils.unhtml(Sq.href,/[<">]/g));Sq.textValue&&(Sq.textValue=utils.unhtml(Sq.textValue,/[<">]/g));Dq(Tq=this.selection.getRange(),Sq,this);Tq.collapse().select(true)},queryCommandValue:function(){var Uq=this.selection.getRange(),Vq;if(Uq.collapsed){Vq=Uq.startContainer;Vq=Vq.nodeType==1?Vq:Vq.parentNode;if(Vq&&(Vq=domUtils.findParentByTagName(Vq,"a",true))&&!domUtils.isInNodeEndBoundary(Uq,Vq)){return Vq}}else{Uq.shrinkBoundary();var Wq=Uq.startContainer.nodeType==3||!Uq.startContainer.childNodes[Uq.startOffset]?Uq.startContainer:Uq.startContainer.childNodes[Uq.startOffset],Xq=Uq.endContainer.nodeType==3||Uq.endOffset==0?Uq.endContainer:Uq.endContainer.childNodes[Uq.endOffset-1],Yq=Uq.getCommonAncestor();Vq=domUtils.findParentByTagName(Yq,"a",true);if(!Vq&&Yq.nodeType==1){var Zq=Yq.getElementsByTagName("a"),$q,_q;for(var ar=0,br;br=Zq[ar++];){$q=domUtils.getPosition(br,Wq),_q=domUtils.getPosition(br,Xq);if(($q&domUtils.POSITION_FOLLOWING||$q&domUtils.POSITION_CONTAINS)&&(_q&domUtils.POSITION_PRECEDING||_q&domUtils.POSITION_CONTAINS)){Vq=br;break}}}return Vq}},queryCommandState:function(){var cr=this.selection.getRange().getClosedNode(),dr=cr&&(cr.className=="edui-faked-video"||cr.className.indexOf("edui-upload-video")!=-1);return dr?-1:0}}};UE.plugins["insertframe"]=function(){var er=this;function fr(){er._iframe&&delete er._iframe}er.addListener("selectionchange",function(){fr()})};UE.commands["scrawl"]={queryCommandState:function(){return browser.ie&&browser.version<=8?-1:0}};UE.plugins["removeformat"]=function(){var gr=this;gr.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"});gr.commands["removeformat"]={execCommand:function(hr,ir,jr,kr,lr){var mr=new RegExp("^(?:"+(ir||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),nr=jr?[]:(kr||this.options.removeFormatAttributes).split(","),or=new dom.Range(this.document),pr,qr,rr,sr=function(vr){return vr.nodeType==1};function tr(wr){if(wr.nodeType==3||wr.tagName.toLowerCase()!="span"){return 0}if(browser.ie){var xr=wr.attributes;if(xr.length){for(var yr=0,zr=xr.length;yr<zr;yr++){if(xr[yr].specified){return 0}}return 1}}return!wr.attributes.length}function ur(Ar){var Br=Ar.createBookmark();if(Ar.collapsed){Ar.enlarge(true)}if(!lr){var Cr=domUtils.findParentByTagName(Ar.startContainer,"a",true);if(Cr){Ar.setStartBefore(Cr)}Cr=domUtils.findParentByTagName(Ar.endContainer,"a",true);if(Cr){Ar.setEndAfter(Cr)}}pr=Ar.createBookmark();Gr=pr.start;while((rr=Gr.parentNode)&&!domUtils.isBlockElm(rr)){domUtils.breakParent(Gr,rr);domUtils.clearEmptySibling(Gr)}if(pr.end){Gr=pr.end;while((rr=Gr.parentNode)&&!domUtils.isBlockElm(rr)){domUtils.breakParent(Gr,rr);domUtils.clearEmptySibling(Gr)}var Dr=domUtils.getNextDomNode(pr.start,false,sr),Er;while(Dr){if(Dr==pr.end){break}Er=domUtils.getNextDomNode(Dr,true,sr);if(!dtd.$empty[Dr.tagName.toLowerCase()]&&!domUtils.isBookmarkNode(Dr)){if(mr.test(Dr.tagName)){if(jr){domUtils.removeStyle(Dr,jr);if(tr(Dr)&&jr!="text-decoration"){domUtils.remove(Dr,true)}}else{domUtils.remove(Dr,true)}}else{if(!dtd.$tableContent[Dr.tagName]&&!dtd.$list[Dr.tagName]){domUtils.removeAttributes(Dr,nr);if(tr(Dr)){domUtils.remove(Dr,true)}}}}Dr=Er}}var Fr=pr.start.parentNode;if(domUtils.isBlockElm(Fr)&&!dtd.$tableContent[Fr.tagName]&&!dtd.$list[Fr.tagName]){domUtils.removeAttributes(Fr,nr)}Fr=pr.end.parentNode;if(pr.end&&domUtils.isBlockElm(Fr)&&!dtd.$tableContent[Fr.tagName]&&!dtd.$list[Fr.tagName]){domUtils.removeAttributes(Fr,nr)}Ar.moveToBookmark(pr).moveToBookmark(Br);var Gr=Ar.startContainer,Hr,Ir=Ar.collapsed;while(Gr.nodeType==1&&domUtils.isEmptyNode(Gr)&&dtd.$removeEmpty[Gr.tagName]){Hr=Gr.parentNode;Ar.setStartBefore(Gr);if(Ar.startContainer===Ar.endContainer){Ar.endOffset--}domUtils.remove(Gr);Gr=Hr}if(!Ir){Gr=Ar.endContainer;while(Gr.nodeType==1&&domUtils.isEmptyNode(Gr)&&dtd.$removeEmpty[Gr.tagName]){Hr=Gr.parentNode;Ar.setEndBefore(Gr);domUtils.remove(Gr);Gr=Hr}}}or=this.selection.getRange();ur(or);or.select()}}};UE.plugins["blockquote"]=function(){var Jr=this;function Kr(Lr){return domUtils.filterNodeList(Lr.selection.getStartElementPath(),"blockquote")}Jr.commands["blockquote"]={execCommand:function(Mr,Nr){var Or=this.selection.getRange(),Pr=Kr(this),Qr=dtd.blockquote,Rr=Or.createBookmark();if(Pr){var Sr=Or.startContainer,Tr=domUtils.isBlockElm(Sr)?Sr:domUtils.findParent(Sr,function(ds){return domUtils.isBlockElm(ds)}),Ur=Or.endContainer,Vr=domUtils.isBlockElm(Ur)?Ur:domUtils.findParent(Ur,function(es){return domUtils.isBlockElm(es)});Tr=domUtils.findParentByTagName(Tr,"li",true)||Tr;Vr=domUtils.findParentByTagName(Vr,"li",true)||Vr;if(Tr.tagName=="LI"||Tr.tagName=="TD"||Tr===Pr||domUtils.isBody(Tr)){domUtils.remove(Pr,true)}else{domUtils.breakParent(Tr,Pr)}if(Tr!==Vr){Pr=domUtils.findParentByTagName(Vr,"blockquote");if(Pr){if(Vr.tagName=="LI"||Vr.tagName=="TD"||domUtils.isBody(Vr)){Pr.parentNode&&domUtils.remove(Pr,true)}else{domUtils.breakParent(Vr,Pr)}}}var Wr=domUtils.getElementsByTagName(this.document,"blockquote");for(var Xr=0,Yr;Yr=Wr[Xr++];){if(!Yr.childNodes.length){domUtils.remove(Yr)}else if(domUtils.getPosition(Yr,Tr)&domUtils.POSITION_FOLLOWING&&domUtils.getPosition(Yr,Vr)&domUtils.POSITION_PRECEDING){domUtils.remove(Yr,true)}}}else{var Zr=Or.cloneRange(),$r=Zr.startContainer.nodeType==1?Zr.startContainer:Zr.startContainer.parentNode,_r=$r,as=1;while(1){if(domUtils.isBody($r)){if(_r!==$r){if(Or.collapsed){Zr.selectNode(_r);as=0}else{Zr.setStartBefore(_r)}}else{Zr.setStart($r,0)}break}if(!Qr[$r.tagName]){if(Or.collapsed){Zr.selectNode(_r)}else{Zr.setStartBefore(_r)}break}_r=$r;$r=$r.parentNode}if(as){_r=$r=$r=Zr.endContainer.nodeType==1?Zr.endContainer:Zr.endContainer.parentNode;while(1){if(domUtils.isBody($r)){if(_r!==$r){Zr.setEndAfter(_r)}else{Zr.setEnd($r,$r.childNodes.length)}break}if(!Qr[$r.tagName]){Zr.setEndAfter(_r);break}_r=$r;$r=$r.parentNode}}$r=Or.document.createElement("blockquote");domUtils.setAttributes($r,Nr);$r.appendChild(Zr.extractContents());Zr.insertNode($r);var bs=domUtils.getElementsByTagName($r,"blockquote");for(var Xr=0,cs;cs=bs[Xr++];){if(cs.parentNode){domUtils.remove(cs,true)}}}Or.moveToBookmark(Rr).select()},queryCommandState:function(){return Kr(this)?1:0}}};UE.commands["touppercase"]=UE.commands["tolowercase"]={execCommand:function(fs){var gs=this;var hs=gs.selection.getRange();if(hs.collapsed){return hs}var is=hs.createBookmark(),js=is.end,ks=function(ms){return!domUtils.isBr(ms)&&!domUtils.isWhitespace(ms)},ls=domUtils.getNextDomNode(is.start,false,ks);while(ls&&domUtils.getPosition(ls,js)&domUtils.POSITION_PRECEDING){if(ls.nodeType==3){ls.nodeValue=ls.nodeValue[fs=="touppercase"?"toUpperCase":"toLowerCase"]()}ls=domUtils.getNextDomNode(ls,true,ks);if(ls===js){break}}hs.moveToBookmark(is).select()}};UE.commands["indent"]={execCommand:function(){var ns=this,os=ns.queryCommandState("indent")?"0em":ns.options.indentValue||"2em";ns.execCommand("Paragraph","p",{style:"text-indent:"+os})},queryCommandState:function(){var ps=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return ps&&ps.style.textIndent&&parseInt(ps.style.textIndent)?1:0}};UE.commands["print"]={execCommand:function(){this.window.print()},notNeedUndo:1};UE.commands["preview"]={execCommand:function(){var qs=window.open("","_blank",""),ss=qs.document;ss.open();ss.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+'ueditor.parse.js"><\/script><script>'+"setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)"+"<\/script></head><body><div>"+this.getContent(null,null,true)+"</div></body></html>");ss.close()},notNeedUndo:1};UE.plugins["selectall"]=function(){var ts=this;ts.commands["selectall"]={execCommand:function(){var us=this,vs=us.body,ws=us.selection.getRange();ws.selectNodeContents(vs);if(domUtils.isEmptyBlock(vs)){if(browser.opera&&vs.firstChild&&vs.firstChild.nodeType==1){ws.setStartAtFirst(vs.firstChild)}ws.collapse(true)}ws.select(true)},notNeedUndo:1};ts.addshortcutkey({selectAll:"ctrl+65"})};UE.plugins["paragraph"]=function(){var xs=this,ys=domUtils.isBlockElm,zs=["TD","LI","PRE"],As=function(Bs,Cs,Ds,Es){var Fs=Bs.createBookmark(),Gs=function(Ns){return Ns.nodeType==1?Ns.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(Ns):!domUtils.isWhitespace(Ns)},Hs;Bs.enlarge(true);var Is=Bs.createBookmark(),Js=domUtils.getNextDomNode(Is.start,false,Gs),Ks=Bs.cloneRange(),Ls;while(Js&&!(domUtils.getPosition(Js,Is.end)&domUtils.POSITION_FOLLOWING)){if(Js.nodeType==3||!ys(Js)){Ks.setStartBefore(Js);while(Js&&Js!==Is.end&&!ys(Js)){Ls=Js;Js=domUtils.getNextDomNode(Js,false,null,function(Os){return!ys(Os)})}Ks.setEndAfter(Ls);Hs=Bs.document.createElement(Cs);if(Ds){domUtils.setAttributes(Hs,Ds);if(Es&&Es=="customstyle"&&Ds.style){Hs.style.cssText=Ds.style}}Hs.appendChild(Ks.extractContents());if(domUtils.isEmptyNode(Hs)){domUtils.fillChar(Bs.document,Hs)}Ks.insertNode(Hs);var Ms=Hs.parentNode;if(ys(Ms)&&!domUtils.isBody(Hs.parentNode)&&utils.indexOf(zs,Ms.tagName)==-1){if(!(Es&&Es=="customstyle")){Ms.getAttribute("dir")&&Hs.setAttribute("dir",Ms.getAttribute("dir"));Ms.style.cssText&&(Hs.style.cssText=Ms.style.cssText+";"+Hs.style.cssText);Ms.style.textAlign&&!Hs.style.textAlign&&(Hs.style.textAlign=Ms.style.textAlign);Ms.style.textIndent&&!Hs.style.textIndent&&(Hs.style.textIndent=Ms.style.textIndent);Ms.style.padding&&!Hs.style.padding&&(Hs.style.padding=Ms.style.padding)}if(Ds&&/h\d/i.test(Ms.tagName)&&!/h\d/i.test(Hs.tagName)){domUtils.setAttributes(Ms,Ds);if(Es&&Es=="customstyle"&&Ds.style){Ms.style.cssText=Ds.style}domUtils.remove(Hs,true);Hs=Ms}else{domUtils.remove(Hs.parentNode,true)}}if(utils.indexOf(zs,Ms.tagName)!=-1){Js=Ms}else{Js=Hs}Js=domUtils.getNextDomNode(Js,false,Gs)}else{Js=domUtils.getNextDomNode(Js,true,Gs)}}return Bs.moveToBookmark(Is).moveToBookmark(Fs)};xs.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""});xs.commands["paragraph"]={execCommand:function(Ps,Qs,Rs,Ss){var Ts=this.selection.getRange();if(Ts.collapsed){var Us=this.document.createTextNode("p");Ts.insertNode(Us);if(browser.ie){var Vs=Us.previousSibling;if(Vs&&domUtils.isWhitespace(Vs)){domUtils.remove(Vs)}Vs=Us.nextSibling;if(Vs&&domUtils.isWhitespace(Vs)){domUtils.remove(Vs)}}}Ts=As(Ts,Qs,Rs,Ss);if(Us){Ts.setStartBefore(Us).collapse(true);pN=Us.parentNode;domUtils.remove(Us);if(domUtils.isBlockElm(pN)&&domUtils.isEmptyNode(pN)){domUtils.fillNode(this.document,pN)}}if(browser.gecko&&Ts.collapsed&&Ts.startContainer.nodeType==1){var Ws=Ts.startContainer.childNodes[Ts.startOffset];if(Ws&&Ws.nodeType==1&&Ws.tagName.toLowerCase()==Qs){Ts.setStart(Ws,0).collapse(true)}}Ts.select();return true},queryCommandValue:function(){var Xs=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return Xs?Xs.tagName.toLowerCase():""}}};(function(){var Ys=domUtils.isBlockElm,Zs=function(_s){return domUtils.filterNodeList(_s.selection.getStartElementPath(),function(at){return at&&at.nodeType==1&&at.getAttribute("dir")})},$s=function(bt,ct,dt){var et,ft=function(ot){return ot.nodeType==1?!domUtils.isBookmarkNode(ot):!domUtils.isWhitespace(ot)},gt=Zs(ct);if(gt&&bt.collapsed){gt.setAttribute("dir",dt);return bt}et=bt.createBookmark();bt.enlarge(true);var ht=bt.createBookmark(),it=domUtils.getNextDomNode(ht.start,false,ft),jt=bt.cloneRange(),kt;while(it&&!(domUtils.getPosition(it,ht.end)&domUtils.POSITION_FOLLOWING)){if(it.nodeType==3||!Ys(it)){jt.setStartBefore(it);while(it&&it!==ht.end&&!Ys(it)){kt=it;it=domUtils.getNextDomNode(it,false,null,function(pt){return!Ys(pt)})}jt.setEndAfter(kt);var lt=jt.getCommonAncestor();if(!domUtils.isBody(lt)&&Ys(lt)){lt.setAttribute("dir",dt);it=lt}else{var mt=bt.document.createElement("p");mt.setAttribute("dir",dt);var nt=jt.extractContents();mt.appendChild(nt);jt.insertNode(mt);it=mt}it=domUtils.getNextDomNode(it,false,ft)}else{it=domUtils.getNextDomNode(it,true,ft)}}return bt.moveToBookmark(ht).moveToBookmark(et)};UE.commands["directionality"]={execCommand:function(qt,rt){var st=this.selection.getRange();if(st.collapsed){var tt=this.document.createTextNode("d");st.insertNode(tt)}$s(st,this,rt);if(tt){st.setStartBefore(tt).collapse(true);domUtils.remove(tt)}st.select();return true},queryCommandValue:function(){var vt=Zs(this);return vt?vt.getAttribute("dir"):"ltr"}}})();UE.plugins["horizontal"]=function(){var wt=this;wt.commands["horizontal"]={execCommand:function(xt){var yt=this;if(yt.queryCommandState(xt)!==-1){yt.execCommand("insertHtml","<hr>");var zt=yt.selection.getRange(),At=zt.startContainer;if(At.nodeType==1&&!At.childNodes[zt.startOffset]){var Bt;if(Bt=At.childNodes[zt.startOffset-1]){if(Bt.nodeType==1&&Bt.tagName=="HR"){if(yt.options.enterTag=="p"){Bt=yt.document.createElement("p");zt.insertNode(Bt);zt.setStart(Bt,0).setCursor()}else{Bt=yt.document.createElement("br");zt.insertNode(Bt);zt.setStartBefore(Bt).setCursor()}}}}return true}},queryCommandState:function(){return domUtils.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}};wt.addListener("delkeydown",function(Ct,Dt){var Et=this.selection.getRange();Et.txtToElmBoundary(true);if(domUtils.isStartInblock(Et)){var Ft=Et.startContainer;var Gt=Ft.previousSibling;if(Gt&&domUtils.isTagNode(Gt,"hr")){domUtils.remove(Gt);Et.select();domUtils.preventDefault(Dt);return true}}})};UE.commands["time"]=UE.commands["date"]={execCommand:function(Ht,It){var Jt=new Date;function Kt(Mt,Nt){var Ot=("0"+Mt.getHours()).slice(-2),Pt=("0"+Mt.getMinutes()).slice(-2),Qt=("0"+Mt.getSeconds()).slice(-2);Nt=Nt||"hh:ii:ss";return Nt.replace(/hh/gi,Ot).replace(/ii/gi,Pt).replace(/ss/gi,Qt)}function Lt(Rt,St){var Tt=("000"+Rt.getFullYear()).slice(-4),Ut=Tt.slice(-2),Vt=("0"+(Rt.getMonth()+1)).slice(-2),Wt=("0"+Rt.getDate()).slice(-2);St=St||"yyyy-mm-dd";return St.replace(/yyyy/gi,Tt).replace(/yy/gi,Ut).replace(/mm/gi,Vt).replace(/dd/gi,Wt)}this.execCommand("insertHtml",Ht=="time"?Kt(Jt,It):Lt(Jt,It))}};UE.plugins["rowspacing"]=function(){var Xt=this;Xt.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]});Xt.commands["rowspacing"]={execCommand:function(Yt,Zt,$t){this.execCommand("paragraph","p",{style:"margin-"+$t+":"+Zt+"px"});return true},queryCommandValue:function(_t,au){var bu=domUtils.filterNodeList(this.selection.getStartElementPath(),function(du){return domUtils.isBlockElm(du)}),cu;if(bu){cu=domUtils.getComputedStyle(bu,"margin-"+au).replace(/[^\d]/g,"");return!cu?0:cu}return 0}}};UE.plugins["lineheight"]=function(){var eu=this;eu.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]});eu.commands["lineheight"]={execCommand:function(fu,gu){this.execCommand("paragraph","p",{style:"line-height:"+(gu=="1"?"normal":gu+"em")});return true},queryCommandValue:function(){var hu=domUtils.filterNodeList(this.selection.getStartElementPath(),function(ju){return domUtils.isBlockElm(ju)});if(hu){var iu=domUtils.getComputedStyle(hu,"line-height");return iu=="normal"?1:iu.replace(/[^\d.]*/gi,"")}}}};UE.plugins["insertcode"]=function(){var ku=this;ku.ready(function(){utils.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",ku.document)});ku.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"});ku.commands["insertcode"]={execCommand:function(mu,nu){var ou=this,pu=ou.selection.getRange(),qu=domUtils.findParentByTagName(pu.startContainer,"pre",true);if(qu){qu.className="brush:"+nu+";toolbar:false;"}else{var ru="";if(pu.collapsed){ru=browser.ie&&browser.ie11below?browser.version<=8?"&nbsp;":"":"<br/>"}else{var su=pu.extractContents();var tu=ou.document.createElement("div");tu.appendChild(su);utils.each(UE.filterNode(UE.htmlparser(tu.innerHTML.replace(/[\r\t]/g,"")),ou.options.filterTxtRules).children,function(vu){if(browser.ie&&browser.ie11below&&browser.version>8){if(vu.type=="element"){if(vu.tagName=="br"){ru+="\n"}else if(!dtd.$empty[vu.tagName]){utils.each(vu.children,function(wu){if(wu.type=="element"){if(wu.tagName=="br"){ru+="\n"}else if(!dtd.$empty[vu.tagName]){ru+=wu.innerText()}}else{ru+=wu.data}});if(!/\n$/.test(ru)){ru+="\n"}}}else{ru+=vu.data+"\n"}if(!vu.nextSibling()&&/\n$/.test(ru)){ru=ru.replace(/\n$/,"")}}else{if(browser.ie&&browser.ie11below){if(vu.type=="element"){if(vu.tagName=="br"){ru+="<br>"}else if(!dtd.$empty[vu.tagName]){utils.each(vu.children,function(xu){if(xu.type=="element"){if(xu.tagName=="br"){ru+="<br>"}else if(!dtd.$empty[vu.tagName]){ru+=xu.innerText()}}else{ru+=xu.data}});if(!/br>$/.test(ru)){ru+="<br>"}}}else{ru+=vu.data+"<br>"}if(!vu.nextSibling()&&/<br>$/.test(ru)){ru=ru.replace(/<br>$/,"")}}else{ru+=vu.type=="element"?dtd.$empty[vu.tagName]?"":vu.innerText():vu.data;if(!/br\/?\s*>$/.test(ru)){if(!vu.nextSibling())return;ru+="<br>"}}}})}ou.execCommand("inserthtml",'<pre id="coder"class="brush:'+nu+';toolbar:false">'+ru+"</pre>",true);qu=ou.document.getElementById("coder");domUtils.removeAttributes(qu,"id");var uu=qu.previousSibling;if(uu&&(uu.nodeType==3&&uu.nodeValue.length==1&&browser.ie&&browser.version==6||domUtils.isEmptyBlock(uu))){domUtils.remove(uu)}var pu=ou.selection.getRange();if(domUtils.isEmptyBlock(qu)){pu.setStart(qu,0).setCursor(false,true)}else{pu.selectNodeContents(qu).select()}}},queryCommandValue:function(){var yu=this.selection.getStartElementPath();var zu="";utils.each(yu,function(Au){if(Au.nodeName=="PRE"){var Bu=Au.className.match(/brush:([^;]+)/);zu=Bu&&Bu[1]?Bu[1]:"";return false}});return zu}};ku.addInputRule(function(Cu){utils.each(Cu.getNodesByTagName("pre"),function(Du){var Eu=Du.getNodesByTagName("br");if(Eu.length){browser.ie&&browser.ie11below&&browser.version>8&&utils.each(Eu,function(Gu){var Hu=UE.uNode.createText("\n");Gu.parentNode.insertBefore(Hu,Gu);Gu.parentNode.removeChild(Gu)});return}if(browser.ie&&browser.ie11below&&browser.version>8)return;var Fu=Du.innerText().split(/\n/);Du.innerHTML("");utils.each(Fu,function(Iu){if(Iu.length){Du.appendChild(UE.uNode.createText(Iu))}Du.appendChild(UE.uNode.createElement("br"))})})});ku.addOutputRule(function(Ju){utils.each(Ju.getNodesByTagName("pre"),function(Ku){var Lu="";utils.each(Ku.children,function(Mu){if(Mu.type=="text"){Lu+=Mu.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,"")}else{if(Mu.tagName=="br"){Lu+="\n"}else{Lu+=!dtd.$empty[Mu.tagName]?"":Mu.innerText()}}});Ku.innerText(Lu.replace(/(&nbsp;|\n)+$/,""))})});ku.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};var lu=ku.queryCommandState;ku.queryCommandState=function(Nu){var Ou=this;if(!Ou.notNeedCodeQuery[Nu.toLowerCase()]&&Ou.selection&&Ou.queryCommandValue("insertcode")){return-1}return UE.Editor.prototype.queryCommandState.apply(this,arguments)};ku.addListener("beforeenterkeydown",function(){var Pu=ku.selection.getRange();var Qu=domUtils.findParentByTagName(Pu.startContainer,"pre",true);if(Qu){ku.fireEvent("saveScene");if(!Pu.collapsed){Pu.deleteContents()}if(!browser.ie||browser.ie9above){var Ru=ku.document.createElement("br"),Qu;Pu.insertNode(Ru).setStartAfter(Ru).collapse(true);var Su=Ru.nextSibling;if(!Su&&(!browser.ie||browser.version>10)){Pu.insertNode(Ru.cloneNode(false))}else{Pu.setStartAfter(Ru)}Qu=Ru.previousSibling;var Tu;while(Qu){Tu=Qu;Qu=Qu.previousSibling;if(!Qu||Qu.nodeName=="BR"){Qu=Tu;break}}if(Qu){var Uu="";while(Qu&&Qu.nodeName!="BR"&&new RegExp("^[\\s"+domUtils.fillChar+"]*$").test(Qu.nodeValue)){Uu+=Qu.nodeValue;Qu=Qu.nextSibling}if(Qu.nodeName!="BR"){var Vu=Qu.nodeValue.match(new RegExp("^([\\s"+domUtils.fillChar+"]+)"));if(Vu&&Vu[1]){Uu+=Vu[1]}}if(Uu){Uu=ku.document.createTextNode(Uu);Pu.insertNode(Uu).setStartAfter(Uu)}}Pu.collapse(true).select(true)}else{if(browser.version>8){var Wu=ku.document.createTextNode("\n");var Xu=Pu.startContainer;if(Pu.startOffset==0){var Yu=Xu.previousSibling;if(Yu){Pu.insertNode(Wu);var Zu=ku.document.createTextNode(" ");Pu.setStartAfter(Wu).insertNode(Zu).setStart(Zu,0).collapse(true).select(true)}}else{Pu.insertNode(Wu).setStartAfter(Wu);var Zu=ku.document.createTextNode(" ");Xu=Pu.startContainer.childNodes[Pu.startOffset];if(Xu&&!/^\n/.test(Xu.nodeValue)){Pu.setStartBefore(Wu)}Pu.insertNode(Zu).setStart(Zu,0).collapse(true).select(true)}}else{var Ru=ku.document.createElement("br");Pu.insertNode(Ru);Pu.insertNode(ku.document.createTextNode(domUtils.fillChar));Pu.setStartAfter(Ru);Qu=Ru.previousSibling;var Tu;while(Qu){Tu=Qu;Qu=Qu.previousSibling;if(!Qu||Qu.nodeName=="BR"){Qu=Tu;break}}if(Qu){var Uu="";while(Qu&&Qu.nodeName!="BR"&&new RegExp("^[ "+domUtils.fillChar+"]*$").test(Qu.nodeValue)){Uu+=Qu.nodeValue;Qu=Qu.nextSibling}if(Qu.nodeName!="BR"){var Vu=Qu.nodeValue.match(new RegExp("^([ "+domUtils.fillChar+"]+)"));if(Vu&&Vu[1]){Uu+=Vu[1]}}Uu=ku.document.createTextNode(Uu);Pu.insertNode(Uu).setStartAfter(Uu)}Pu.collapse(true).select()}}ku.fireEvent("saveScene");return true}});ku.addListener("tabkeydown",function($u,_u){var av=ku.selection.getRange();var bv=domUtils.findParentByTagName(av.startContainer,"pre",true);if(bv){ku.fireEvent("saveScene");if(_u.shiftKey){}else{if(!av.collapsed){var cv=av.createBookmark();var dv=cv.start.previousSibling;while(dv){if(bv.firstChild===dv&&!domUtils.isBr(dv)){bv.insertBefore(ku.document.createTextNode("    "),dv);break}if(domUtils.isBr(dv)){bv.insertBefore(ku.document.createTextNode("    "),dv.nextSibling);break}dv=dv.previousSibling}var ev=cv.end;dv=cv.start.nextSibling;if(bv.firstChild===cv.start){bv.insertBefore(ku.document.createTextNode("    "),dv.nextSibling)}while(dv&&dv!==ev){if(domUtils.isBr(dv)&&dv.nextSibling){if(dv.nextSibling===ev){break}bv.insertBefore(ku.document.createTextNode("    "),dv.nextSibling)}dv=dv.nextSibling}av.moveToBookmark(cv).select()}else{var fv=ku.document.createTextNode("    ");av.insertNode(fv).setStartAfter(fv).collapse(true).select(true)}}ku.fireEvent("saveScene");return true}});ku.addListener("beforeinserthtml",function(gv,hv){var iv=this,jv=iv.selection.getRange(),kv=domUtils.findParentByTagName(jv.startContainer,"pre",true);if(kv){if(!jv.collapsed){jv.deleteContents()}var lv="";if(browser.ie&&browser.version>8){utils.each(UE.filterNode(UE.htmlparser(hv),iv.options.filterTxtRules).children,function(ov){if(ov.type=="element"){if(ov.tagName=="br"){lv+="\n"}else if(!dtd.$empty[ov.tagName]){utils.each(ov.children,function(pv){if(pv.type=="element"){if(pv.tagName=="br"){lv+="\n"}else if(!dtd.$empty[ov.tagName]){lv+=pv.innerText()}}else{lv+=pv.data}});if(!/\n$/.test(lv)){lv+="\n"}}}else{lv+=ov.data+"\n"}if(!ov.nextSibling()&&/\n$/.test(lv)){lv=lv.replace(/\n$/,"")}});var mv=iv.document.createTextNode(utils.html(lv.replace(/&nbsp;/g," ")));jv.insertNode(mv).selectNode(mv).select()}else{var nv=iv.document.createDocumentFragment();utils.each(UE.filterNode(UE.htmlparser(hv),iv.options.filterTxtRules).children,function(qv){if(qv.type=="element"){if(qv.tagName=="br"){nv.appendChild(iv.document.createElement("br"))}else if(!dtd.$empty[qv.tagName]){utils.each(qv.children,function(rv){if(rv.type=="element"){if(rv.tagName=="br"){nv.appendChild(iv.document.createElement("br"))}else if(!dtd.$empty[qv.tagName]){nv.appendChild(iv.document.createTextNode(utils.html(rv.innerText().replace(/&nbsp;/g," "))))}}else{nv.appendChild(iv.document.createTextNode(utils.html(rv.data.replace(/&nbsp;/g," "))))}});if(nv.lastChild.nodeName!="BR"){nv.appendChild(iv.document.createElement("br"))}}}else{nv.appendChild(iv.document.createTextNode(utils.html(qv.data.replace(/&nbsp;/g," "))))}if(!qv.nextSibling()&&nv.lastChild.nodeName=="BR"){nv.removeChild(nv.lastChild)}});jv.insertNode(nv).select()}return true}});ku.addListener("keydown",function(sv,tv){var uv=this,vv=tv.keyCode||tv.which;if(vv==40){var wv=uv.selection.getRange(),xv,yv=wv.startContainer;if(wv.collapsed&&(xv=domUtils.findParentByTagName(wv.startContainer,"pre",true))&&!xv.nextSibling){var zv=xv.lastChild;while(zv&&zv.nodeName=="BR"){zv=zv.previousSibling}if(zv===yv||wv.startContainer===xv&&wv.startOffset==xv.childNodes.length){uv.execCommand("insertparagraph");domUtils.preventDefault(tv)}}}});ku.addListener("delkeydown",function(Av,Bv){var Cv=this.selection.getRange();Cv.txtToElmBoundary(true);var Dv=Cv.startContainer;if(domUtils.isTagNode(Dv,"pre")&&Cv.collapsed&&domUtils.isStartInblock(Cv)){var Ev=ku.document.createElement("p");domUtils.fillNode(ku.document,Ev);Dv.parentNode.insertBefore(Ev,Dv);domUtils.remove(Dv);Cv.setStart(Ev,0).setCursor(false,true);domUtils.preventDefault(Bv);return true}})};UE.commands["cleardoc"]={execCommand:function(Fv){var Gv=this,Hv=Gv.options.enterTag,Iv=Gv.selection.getRange();if(Hv=="br"){Gv.body.innerHTML="<br/>";Iv.setStart(Gv.body,0).setCursor()}else{Gv.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";Iv.setStart(Gv.body.firstChild,0).setCursor(false,true)}setTimeout(function(){Gv.fireEvent("clearDoc")},0)}};UE.commands["uploaderbtn"]={execCommand:function(Jv){var Kv=this;FileManager.selectActionFunction=function(Lv,Mv,Nv){var Ov="";console.log(Lv,Mv,Nv);for(var Pv=0;Pv<Nv.length;Pv++){var Qv=Nv[Pv].url;var Rv=Nv[Pv].ext;var Sv=Nv[Pv].name;var Tv=Qv.lastIndexOf("?");if(Tv>0){Qv=Qv.substr(0,Tv)}if(Nv[Pv].isImage){Ov+='<img src="'+Qv+'" />'}else if(Rv=="mp4"){Ov+='<video class="edui-faked-video video-js" controls="controls" height="320" src="'+Qv+'" width="450">&nbsp;</video>'}else{var Uv=Rv=="zip"||Rv=="rar"?"_self":"_blank";Ov+='<a href="'+Qv+'" target="'+Uv+'" />'+Sv+"</a>"}Ov+="<br/>"}Ov=Ov.substr(0,Ov.length-5);Kv.execCommand("insertHtml",Ov)};FileManager.popup()}};UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){utils.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(Vv){utils.each(Vv.getNodesByTagName("img"),function(Wv){var Xv;if(Xv=Wv.getAttr("anchorname")){Wv.tagName="a";Wv.setAttr({anchorname:"",name:Xv,class:""})}})},inputRule:function(Yv){utils.each(Yv.getNodesByTagName("a"),function(Zv){var $v;if(($v=Zv.getAttr("name"))&&!Zv.getAttr("href")){Zv.tagName="img";Zv.setAttr({anchorname:Zv.getAttr("name"),class:"anchorclass"});Zv.setAttr("name")}})},commands:{anchor:{execCommand:function(_v,aw){var bw=this.selection.getRange(),cw=bw.getClosedNode();if(cw&&cw.getAttribute("anchorname")){if(aw){cw.setAttribute("anchorname",aw)}else{bw.setStartBefore(cw).setCursor();domUtils.remove(cw)}}else{if(aw){var dw=this.document.createElement("img");bw.collapse(true);domUtils.setAttributes(dw,{anchorname:aw,class:"anchorclass"});bw.insertNode(dw).setStartAfter(dw).setCursor(false,true)}}}}}}});UE.plugins["wordcount"]=function(){var ew=this;ew.setOpt("wordCount",true);ew.addListener("contentchange",function(){ew.fireEvent("wordcount")});var fw;ew.addListener("ready",function(){var gw=this;domUtils.on(gw.body,"keyup",function(hw){var iw=hw.keyCode||hw.which,jw={16:1,18:1,20:1,37:1,38:1,39:1,40:1};if(iw in jw)return;clearTimeout(fw);fw=setTimeout(function(){gw.fireEvent("wordcount")},200)})})};UE.plugins["pagebreak"]=function(){var kw=this,lw=["td"];kw.setOpt("pageBreakTag","_ueditor_page_break_tag_");function mw(ow){if(domUtils.isEmptyBlock(ow)){var pw=ow.firstChild,qw;while(pw&&pw.nodeType==1&&domUtils.isEmptyBlock(pw)){qw=pw;pw=pw.firstChild}!qw&&(qw=ow);domUtils.fillNode(kw.document,qw)}}kw.ready(function(){utils.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",kw.document)});function nw(rw){return rw&&rw.nodeType==1&&rw.tagName=="HR"&&rw.className=="pagebreak"}kw.addInputRule(function(sw){sw.traversal(function(tw){if(tw.type=="text"&&tw.data==kw.options.pageBreakTag){var uw=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');tw.parentNode.insertBefore(uw,tw);tw.parentNode.removeChild(tw)}})});kw.addOutputRule(function(vw){utils.each(vw.getNodesByTagName("hr"),function(ww){if(ww.getAttr("class")=="pagebreak"){var xw=UE.uNode.createText(kw.options.pageBreakTag);ww.parentNode.insertBefore(xw,ww);ww.parentNode.removeChild(ww)}})});kw.commands["pagebreak"]={execCommand:function(){var yw=kw.selection.getRange(),zw=kw.document.createElement("hr");domUtils.setAttributes(zw,{class:"pagebreak",noshade:"noshade",size:"5"});domUtils.unSelectable(zw);var Aw=domUtils.findParentByTagName(yw.startContainer,lw,true),Bw=[],Cw;if(Aw){switch(Aw.tagName){case"TD":Cw=Aw.parentNode;if(!Cw.previousSibling){var Dw=domUtils.findParentByTagName(Cw,"table");Dw.parentNode.insertBefore(zw,Dw);Bw=domUtils.findParents(zw,true)}else{Cw.parentNode.insertBefore(zw,Cw);Bw=domUtils.findParents(zw)}Cw=Bw[1];if(zw!==Cw){domUtils.breakParent(zw,Cw)}kw.fireEvent("afteradjusttable",kw.document)}}else{if(!yw.collapsed){yw.deleteContents();var Ew=yw.startContainer;while(!domUtils.isBody(Ew)&&domUtils.isBlockElm(Ew)&&domUtils.isEmptyNode(Ew)){yw.setStartBefore(Ew).collapse(true);domUtils.remove(Ew);Ew=yw.startContainer}}yw.insertNode(zw);var Cw=zw.parentNode,Fw;while(!domUtils.isBody(Cw)){domUtils.breakParent(zw,Cw);Fw=zw.nextSibling;if(Fw&&domUtils.isEmptyBlock(Fw)){domUtils.remove(Fw)}Cw=zw.parentNode}Fw=zw.nextSibling;var Gw=zw.previousSibling;if(nw(Gw)){domUtils.remove(Gw)}else{Gw&&mw(Gw)}if(!Fw){var Hw=kw.document.createElement("p");zw.parentNode.appendChild(Hw);domUtils.fillNode(kw.document,Hw);yw.setStart(Hw,0).collapse(true)}else{if(nw(Fw)){domUtils.remove(Fw)}else{mw(Fw)}yw.setEndAfter(zw).collapse(false)}yw.select(true)}}}};UE.plugin.register("wordimage",function(){var Iw=this,Jw=[];return{commands:{wordimage:{execCommand:function(){var Kw=domUtils.getElementsByTagName(Iw.body,"img");var Lw=[];for(var Mw=0,Nw;Nw=Kw[Mw++];){var Ow=Nw.getAttribute("word_img");Ow&&Lw.push(Ow)}return Lw},queryCommandState:function(){Jw=domUtils.getElementsByTagName(Iw.body,"img");for(var Pw=0,Qw;Qw=Jw[Pw++];){if(Qw.getAttribute("word_img")){return 1}}return-1},notNeedUndo:true}},inputRule:function(Rw){utils.each(Rw.getNodesByTagName("img"),function(Sw){var Tw=Sw.attrs,Uw=parseInt(Tw.width)<128||parseInt(Tw.height)<43,Vw=Iw.options,Ww=Vw.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";if(Tw["src"]&&/^(?:(file:\/+))/.test(Tw["src"])){Sw.setAttr({width:Tw.width,height:Tw.height,alt:Tw.alt,word_img:Tw.src,src:Ww,style:"background:url("+(Uw?Vw.themePath+Vw.theme+"/images/word.gif":Vw.langPath+Vw.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})}})}}});UE.plugins["dragdrop"]=function(){var Xw=this;Xw.ready(function(){domUtils.on(this.body,"dragend",function(){var Yw=Xw.selection.getRange();var Zw=Yw.getClosedNode()||Xw.selection.getStart();if(Zw&&Zw.tagName=="IMG"){var $w=Zw.previousSibling,_w;while(_w=Zw.nextSibling){if(_w.nodeType==1&&_w.tagName=="SPAN"&&!_w.firstChild){domUtils.remove(_w)}else{break}}if(($w&&$w.nodeType==1&&!domUtils.isEmptyBlock($w)||!$w)&&(!_w||_w&&!domUtils.isEmptyBlock(_w))){if($w&&$w.tagName=="P"&&!domUtils.isEmptyBlock($w)){$w.appendChild(Zw);domUtils.moveChild(_w,$w);domUtils.remove(_w)}else if(_w&&_w.tagName=="P"&&!domUtils.isEmptyBlock(_w)){_w.insertBefore(Zw,_w.firstChild)}if($w&&$w.tagName=="P"&&domUtils.isEmptyBlock($w)){domUtils.remove($w)}if(_w&&_w.tagName=="P"&&domUtils.isEmptyBlock(_w)){domUtils.remove(_w)}Yw.selectNode(Zw).select();Xw.fireEvent("saveScene")}}})});Xw.addListener("keyup",function(ax,bx){var cx=bx.keyCode||bx.which;if(cx==13){var dx=Xw.selection.getRange(),ex;if(ex=domUtils.findParentByTagName(dx.startContainer,"p",true)){if(domUtils.getComputedStyle(ex,"text-align")=="center"){domUtils.removeStyle(ex,"text-align")}}}})};UE.plugins["undo"]=function(){var fx;var gx=this,hx=gx.options.maxUndoCount||20,ix=gx.options.maxInputCount||20,jx=new RegExp(domUtils.fillChar+"|</hr>","gi");var kx={ol:1,ul:1,table:1,tbody:1,tr:1,body:1};var lx=gx.options.autoClearEmptyNode;function mx(vx,wx){if(vx.length!=wx.length)return 0;for(var xx=0,yx=vx.length;xx<yx;xx++){if(vx[xx]!=wx[xx])return 0}return 1}function nx(zx,Ax){if(zx.collapsed!=Ax.collapsed){return 0}if(!mx(zx.startAddress,Ax.startAddress)||!mx(zx.endAddress,Ax.endAddress)){return 0}return 1}function ox(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0){return this.restore(0)}}this.restore(--this.index)}};this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1){return this.restore(this.index)}}this.restore(++this.index)}};this.restore=function(){var Bx=this.editor;var Cx=this.list[this.index];var Dx=UE.htmlparser(Cx.content.replace(jx,""));Bx.options.autoClearEmptyNode=false;Bx.filterInputRule(Dx);Bx.options.autoClearEmptyNode=lx;Bx.document.body.innerHTML=Dx.toHtml();Bx.fireEvent("afterscencerestore");if(browser.ie){utils.each(domUtils.getElementsByTagName(Bx.document,"td th caption p"),function(Fx){if(domUtils.isEmptyNode(Fx)){domUtils.fillNode(Bx.document,Fx)}})}try{var Ex=new dom.Range(Bx.document).moveToAddress(Cx.address);Ex.select(kx[Ex.startContainer.nodeName.toLowerCase()])}catch(Gx){}this.update();this.clearKey();Bx.fireEvent("reset",true)};this.getScene=function(){var Hx=this.editor;var Ix=Hx.selection.getRange(),Jx=Ix.createAddress(false,true);Hx.fireEvent("beforegetscene");var Kx=UE.htmlparser(Hx.body.innerHTML);Hx.options.autoClearEmptyNode=false;Hx.filterOutputRule(Kx);Hx.options.autoClearEmptyNode=lx;var Lx=Kx.toHtml();Hx.fireEvent("aftergetscene");return{address:Jx,content:Lx}};this.save=function(Mx,Nx){clearTimeout(fx);var Ox=this.getScene(Nx),Px=this.list[this.index];if(Px&&Px.content!=Ox.content){gx.trigger("contentchange")}if(Px&&Px.content==Ox.content&&(Mx?1:nx(Px.address,Ox.address))){return}this.list=this.list.slice(0,this.index+1);this.list.push(Ox);if(this.list.length>hx){this.list.shift()}this.index=this.list.length-1;this.clearKey();this.update()};this.update=function(){this.hasRedo=!!this.list[this.index+1];this.hasUndo=!!this.list[this.index-1]};this.reset=function(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.clearKey()};this.clearKey=function(){rx=0;sx=null}}gx.undoManger=new ox;gx.undoManger.editor=gx;function px(){this.undoManger.save()}gx.addListener("saveScene",function(){var Qx=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,Qx)});gx.addListener("reset",function(Rx,Sx){if(!Sx){this.undoManger.reset()}});gx.commands["redo"]=gx.commands["undo"]={execCommand:function(Tx){this.undoManger[Tx]()},queryCommandState:function(Ux){return this.undoManger["has"+(Ux.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var qx={16:1,17:1,18:1,37:1,38:1,39:1,40:1},rx=0,sx;var tx=false;gx.addListener("ready",function(){domUtils.on(this.body,"compositionstart",function(){tx=true});domUtils.on(this.body,"compositionend",function(){tx=false})});gx.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var ux=true;gx.addListener("keydown",function(Vx,Wx){var Xx=this;var Yx=Wx.keyCode||Wx.which;if(!qx[Yx]&&!Wx.ctrlKey&&!Wx.metaKey&&!Wx.shiftKey&&!Wx.altKey){if(tx)return;if(!Xx.selection.getRange().collapsed){Xx.undoManger.save(false,true);ux=false;return}if(Xx.undoManger.list.length==0){Xx.undoManger.save(true)}clearTimeout(fx);function Zx($x){$x.undoManger.save(false,true);$x.fireEvent("selectionchange")}fx=setTimeout(function(){if(tx){var _x=setInterval(function(){if(!tx){Zx(Xx);clearInterval(_x)}},300);return}Zx(Xx)},200);sx=Yx;rx++;if(rx>=ix){Zx(Xx)}}});gx.addListener("keyup",function(ay,by){var cy=by.keyCode||by.which;if(!qx[cy]&&!by.ctrlKey&&!by.metaKey&&!by.shiftKey&&!by.altKey){if(tx)return;if(!ux){this.undoManger.save(false,true);ux=true}}});gx.stopCmdUndo=function(){gx.__hasEnterExecCommand=true};gx.startCmdUndo=function(){gx.__hasEnterExecCommand=false}};UE.plugin.register("copy",function(){var dy=this;function ey(){ZeroClipboard.config({debug:false,swfPath:dy.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var fy=dy.zeroclipboard=new ZeroClipboard;fy.on("copy",function(gy){var hy=gy.client,iy=dy.selection.getRange(),jy=document.createElement("div");jy.appendChild(iy.cloneContents());hy.setText(jy.innerText||jy.textContent);hy.setHtml(jy.innerHTML);iy.select()});fy.on("mouseover mouseout",function(ky){var ly=ky.target;if(ky.type=="mouseover"){domUtils.addClass(ly,"edui-state-hover")}else if(ky.type=="mouseout"){domUtils.removeClasses(ly,"edui-state-hover")}});fy.on("wrongflash noflash",function(){ZeroClipboard.destroy()})}return{bindEvents:{ready:function(){if(!browser.ie){if(window.ZeroClipboard){ey()}else{utils.loadFile(document,{src:dy.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){ey()})}}}},commands:{copy:{execCommand:function(my){if(!dy.document.execCommand("copy")){alert(dy.getLang("copymsg"))}}}}}});UE.plugins["paste"]=function(){function ny(uy){var vy=this.document;if(vy.getElementById("baidu_pastebin")){return}var wy=this.selection.getRange(),xy=wy.createBookmark(),yy=vy.createElement("div");yy.id="baidu_pastebin";browser.webkit&&yy.appendChild(vy.createTextNode(domUtils.fillChar+domUtils.fillChar));vy.body.appendChild(yy);xy.start.style.display="";yy.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(xy.start).y+"px";wy.selectNodeContents(yy).select(true);setTimeout(function(){if(browser.webkit){for(var zy=0,Ay=vy.querySelectorAll("#baidu_pastebin"),By;By=Ay[zy++];){if(domUtils.isEmptyNode(By)){domUtils.remove(By)}else{yy=By;break}}}try{yy.parentNode.removeChild(yy)}catch(Cy){}wy.moveToBookmark(xy).select(true);uy(yy)},0)}var oy=this;oy.setOpt({retainOnlyLabelPasted:false});var py,qy,ry;function sy(Dy){return Dy.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(Ey,Fy,Gy,Hy){Gy=Gy.toLowerCase();if({img:1}[Gy]){return Ey}Hy=Hy.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(Iy,Jy,Ky){if({src:1,href:1,name:1}[Jy.toLowerCase()]){return Jy+"="+Ky+" "}return""});if({span:1,div:1}[Gy]){return""}else{return"<"+Fy+Gy+" "+utils.trim(Hy)+">"}})}function ty(Ly){var My;if(Ly.firstChild){var Ny=domUtils.getElementsByTagName(Ly,"span");for(var Oy=0,Py;Py=Ny[Oy++];){if(Py.id=="_baidu_cut_start"||Py.id=="_baidu_cut_end"){domUtils.remove(Py)}}if(browser.webkit){var Qy=Ly.querySelectorAll("div br");for(var Oy=0,Ry;Ry=Qy[Oy++];){var Sy=Ry.parentNode;if(Sy.tagName=="DIV"&&Sy.childNodes.length==1){Sy.innerHTML="<p><br/></p>";domUtils.remove(Sy)}}var Ty=Ly.querySelectorAll("#baidu_pastebin");for(var Oy=0,Uy;Uy=Ty[Oy++];){var Vy=oy.document.createElement("p");Uy.parentNode.insertBefore(Vy,Uy);while(Uy.firstChild){Vy.appendChild(Uy.firstChild)}domUtils.remove(Uy)}var Wy=Ly.querySelectorAll("meta");for(var Oy=0,Xy;Xy=Wy[Oy++];){domUtils.remove(Xy)}var Qy=Ly.querySelectorAll("br");for(Oy=0;Xy=Qy[Oy++];){if(/^apple-/i.test(Xy.className)){domUtils.remove(Xy)}}}if(browser.gecko){var Yy=Ly.querySelectorAll("[_moz_dirty]");for(Oy=0;Xy=Yy[Oy++];){Xy.removeAttribute("_moz_dirty")}}if(!browser.ie){var Zy=Ly.querySelectorAll("span.Apple-style-span");for(var Oy=0,Xy;Xy=Zy[Oy++];){domUtils.remove(Xy,true)}}My=Ly.innerHTML;My=UE.filterWord(My);var $y=UE.htmlparser(My);if(oy.options.filterRules){UE.filterNode($y,oy.options.filterRules)}oy.filterInputRule($y);if(browser.webkit){var _y=$y.lastChild();if(_y&&_y.type=="element"&&_y.tagName=="br"){$y.removeChild(_y)}utils.each(oy.body.querySelectorAll("div"),function(az){if(domUtils.isEmptyBlock(az)){domUtils.remove(az,true)}})}My={html:$y.toHtml()};oy.fireEvent("beforepaste",My,$y);if(!My.html){return}$y=UE.htmlparser(My.html,true);if(oy.queryCommandState("pasteplain")===1){oy.execCommand("insertHtml",UE.filterNode($y,oy.options.filterTxtRules).toHtml(),true)}else{UE.filterNode($y,oy.options.filterTxtRules);py=$y.toHtml();qy=My.html;ry=oy.selection.getRange().createAddress(true);oy.execCommand("insertHtml",oy.getOpt("retainOnlyLabelPasted")===true?sy(qy):qy,true)}oy.fireEvent("afterpaste",My)}}oy.addListener("pasteTransfer",function(bz,cz){if(ry&&py&&qy&&py!=qy){var dz=oy.selection.getRange();dz.moveToAddress(ry,true);if(!dz.collapsed){while(!domUtils.isBody(dz.startContainer)){var ez=dz.startContainer;if(ez.nodeType==1){ez=ez.childNodes[dz.startOffset];if(!ez){dz.setStartBefore(dz.startContainer);continue}var fz=ez.previousSibling;if(fz&&fz.nodeType==3&&new RegExp("^[\n\r\t "+domUtils.fillChar+"]*$").test(fz.nodeValue)){dz.setStartBefore(fz)}}if(dz.startOffset==0){dz.setStartBefore(dz.startContainer)}else{break}}while(!domUtils.isBody(dz.endContainer)){var gz=dz.endContainer;if(gz.nodeType==1){gz=gz.childNodes[dz.endOffset];if(!gz){dz.setEndAfter(dz.endContainer);continue}var hz=gz.nextSibling;if(hz&&hz.nodeType==3&&new RegExp("^[\n\r\t"+domUtils.fillChar+"]*$").test(hz.nodeValue)){dz.setEndAfter(hz)}}if(dz.endOffset==dz.endContainer[dz.endContainer.nodeType==3?"nodeValue":"childNodes"].length){dz.setEndAfter(dz.endContainer)}else{break}}}dz.deleteContents();dz.select(true);oy.__hasEnterExecCommand=true;var iz=qy;if(cz===2){iz=sy(iz)}else if(cz){iz=py}oy.execCommand("inserthtml",iz,true);oy.__hasEnterExecCommand=false;var jz=oy.selection.getRange();while(!domUtils.isBody(jz.startContainer)&&!jz.startOffset&&jz.startContainer[jz.startContainer.nodeType==3?"nodeValue":"childNodes"].length){jz.setStartBefore(jz.startContainer)}var kz=jz.createAddress(true);ry.endAddress=kz.startAddress}});oy.addListener("ready",function(){domUtils.on(oy.body,"cut",function(){var lz=oy.selection.getRange();if(!lz.collapsed&&oy.undoManger){oy.undoManger.save()}});domUtils.on(oy.body,browser.ie||browser.opera?"keydown":"paste",function(mz){if((browser.ie||browser.opera)&&(!mz.ctrlKey&&!mz.metaKey||mz.keyCode!="86")){return}ny.call(oy,function(nz){ty(nz)})})});oy.commands["paste"]={execCommand:function(oz){if(browser.ie){ny.call(oy,function(pz){ty(pz)});oy.document.execCommand("paste")}else{alert(oy.getLang("pastemsg"))}}}};UE.plugins["pasteplain"]=function(){var qz=this;qz.setOpt({pasteplain:false,filterTxtRules:function(){function sz(uz){uz.tagName="p";uz.setStyle()}function tz(vz){vz.parentNode.removeChild(vz,true)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(wz){var xz,yz=UE.uNode.createElement("p");while(xz=wz.firstChild()){if(xz.type=="text"||!UE.dom.dtd.$block[xz.tagName]){yz.appendChild(xz)}else{if(yz.firstChild()){wz.parentNode.insertBefore(yz,wz);yz=UE.uNode.createElement("p")}else{wz.parentNode.insertBefore(xz,wz)}}}if(yz.firstChild()){wz.parentNode.insertBefore(yz,wz)}wz.parentNode.removeChild(wz)},ol:tz,ul:tz,dl:tz,dt:tz,dd:tz,li:tz,caption:sz,th:sz,tr:sz,h1:sz,h2:sz,h3:sz,h4:sz,h5:sz,h6:sz,td:function(zz){var Az=!!zz.innerText();if(Az){zz.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),zz)}zz.parentNode.removeChild(zz,zz.innerText())}}}()});var rz=qz.options.pasteplain;qz.commands["pasteplain"]={queryCommandState:function(){return rz?1:0},execCommand:function(){rz=!rz|0},notNeedUndo:1}};UE.plugins["list"]=function(){var Bz=this,Cz={TD:1,PRE:1,BLOCKQUOTE:1};var Dz={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};Bz.setOpt({autoTransWordToList:false,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:false});function Ez(Oz){var Pz=[];for(var Qz in Oz){Pz.push(Qz)}return Pz}var Fz={OL:Ez(Bz.options.insertorderedlist),UL:Ez(Bz.options.insertunorderedlist)};var Gz=Bz.options.listiconpath;for(var Hz in Dz){if(!Bz.options.insertorderedlist.hasOwnProperty(Hz)&&!Bz.options.insertunorderedlist.hasOwnProperty(Hz)){delete Dz[Hz]}}Bz.ready(function(){var Rz=[];for(var Sz in Dz){if(Sz=="dash"||Sz=="dot"){Rz.push("li.list-"+Dz[Sz]+"{background-image:url("+Gz+Dz[Sz]+".gif)}");Rz.push("ul.custom_"+Sz+"{list-style:none;}ul.custom_"+Sz+" li{background-position:0 3px;background-repeat:no-repeat}")}else{for(var Tz=0;Tz<99;Tz++){Rz.push("li.list-"+Dz[Sz]+Tz+"{background-image:url("+Gz+"list-"+Dz[Sz]+Tz+".gif)}")}Rz.push("ol.custom_"+Sz+"{list-style:none;}ol.custom_"+Sz+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(Sz){case"cn":Rz.push("li.list-"+Sz+"-paddingleft-1{padding-left:25px}");Rz.push("li.list-"+Sz+"-paddingleft-2{padding-left:40px}");Rz.push("li.list-"+Sz+"-paddingleft-3{padding-left:55px}");break;case"cn1":Rz.push("li.list-"+Sz+"-paddingleft-1{padding-left:30px}");Rz.push("li.list-"+Sz+"-paddingleft-2{padding-left:40px}");Rz.push("li.list-"+Sz+"-paddingleft-3{padding-left:55px}");break;case"cn2":Rz.push("li.list-"+Sz+"-paddingleft-1{padding-left:40px}");Rz.push("li.list-"+Sz+"-paddingleft-2{padding-left:55px}");Rz.push("li.list-"+Sz+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":Rz.push("li.list-"+Sz+"-paddingleft-1{padding-left:25px}");break;case"num2":Rz.push("li.list-"+Sz+"-paddingleft-1{padding-left:35px}");Rz.push("li.list-"+Sz+"-paddingleft-2{padding-left:40px}");break;case"dash":Rz.push("li.list-"+Sz+"-paddingleft{padding-left:35px}");break;case"dot":Rz.push("li.list-"+Sz+"-paddingleft{padding-left:20px}")}}Rz.push(".list-paddingleft-1{padding-left:0}");Rz.push(".list-paddingleft-2{padding-left:"+Bz.options.listDefaultPaddingLeft+"px}");Rz.push(".list-paddingleft-3{padding-left:"+Bz.options.listDefaultPaddingLeft*2+"px}");utils.cssRule("list","ol,ul{margin:0;pading:0;"+(browser.ie?"":"width:95%")+"}li{clear:both;}"+Rz.join("\n"),Bz.document)});Bz.ready(function(){domUtils.on(Bz.body,"cut",function(){setTimeout(function(){var Uz=Bz.selection.getRange(),Vz;if(!Uz.collapsed){if(Vz=domUtils.findParentByTagName(Uz.startContainer,"li",true)){if(!Vz.nextSibling&&domUtils.isEmptyBlock(Vz)){var Wz=Vz.parentNode,Xz;if(Xz=Wz.previousSibling){domUtils.remove(Wz);Uz.setStartAtLast(Xz).collapse(true);Uz.select(true)}else if(Xz=Wz.nextSibling){domUtils.remove(Wz);Uz.setStartAtFirst(Xz).collapse(true);Uz.select(true)}else{var Yz=Bz.document.createElement("p");domUtils.fillNode(Bz.document,Yz);Wz.parentNode.insertBefore(Yz,Wz);domUtils.remove(Wz);Uz.setStart(Yz,0).collapse(true);Uz.select(true)}}}}})})});function Iz(Zz){var $z=Zz.className;if(domUtils.hasClass(Zz,/custom_/)){return $z.match(/custom_(\w+)/)[1]}return domUtils.getStyle(Zz,"list-style-type")}Bz.addListener("beforepaste",function(_z,aA){var bA=this,cA=bA.selection.getRange(),dA;var eA=UE.htmlparser(aA.html,true);if(dA=domUtils.findParentByTagName(cA.startContainer,"li",true)){var fA=dA.parentNode,gA=fA.tagName=="OL"?"ul":"ol";utils.each(eA.getNodesByTagName(gA),function(hA){hA.tagName=fA.tagName;hA.setAttr();if(hA.parentNode===eA){_z=Iz(fA)||(fA.tagName=="OL"?"decimal":"disc")}else{var iA=hA.parentNode.getAttr("class");if(iA&&/custom_/.test(iA)){_z=iA.match(/custom_(\w+)/)[1]}else{_z=hA.parentNode.getStyle("list-style-type")}if(!_z){_z=fA.tagName=="OL"?"decimal":"disc"}}var jA=utils.indexOf(Fz[fA.tagName],_z);if(hA.parentNode!==eA)jA=jA+1==Fz[fA.tagName].length?0:jA+1;var kA=Fz[fA.tagName][jA];if(Dz[kA]){hA.setAttr("class","custom_"+kA)}else{hA.setStyle("list-style-type",kA)}})}aA.html=eA.toHtml()});Bz.getOpt("disablePInList")===true&&Bz.addOutputRule(function(lA){utils.each(lA.getNodesByTagName("li"),function(mA){var nA=[],oA=0;utils.each(mA.children,function(pA){if(pA.tagName=="p"){var qA;while(qA=pA.children.pop()){nA.splice(oA,0,qA);qA.parentNode=mA;lastNode=qA}qA=nA[nA.length-1];if(!qA||qA.type!="element"||qA.tagName!="br"){var rA=UE.uNode.createElement("br");rA.parentNode=mA;nA.push(rA)}oA=nA.length}});if(nA.length){mA.children=nA}})});Bz.addInputRule(function(sA){utils.each(sA.getNodesByTagName("li"),function(wA){var xA=UE.uNode.createElement("p");for(var yA=0,zA;zA=wA.children[yA];){if(zA.type=="text"||dtd.p[zA.tagName]){xA.appendChild(zA)}else{if(xA.firstChild()){wA.insertBefore(xA,zA);xA=UE.uNode.createElement("p");yA=yA+2}else{yA++}}}if(xA.firstChild()&&!xA.parentNode||!wA.firstChild()){wA.appendChild(xA)}if(!xA.firstChild()){xA.innerHTML(browser.ie?"&nbsp;":"<br/>")}var AA=wA.firstChild();var BA=AA.lastChild();if(BA&&BA.type=="text"&&/^\s*$/.test(BA.data)){AA.removeChild(BA)}});if(Bz.options.autoTransWordToList){var tA={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},uA={square:"n"};function vA(CA,DA){var EA=DA.firstChild();if(EA&&EA.type=="element"&&EA.tagName=="span"&&/Wingdings|Symbol/.test(EA.getStyle("font-family"))){for(var FA in uA){if(uA[FA]==EA.data){return FA}}return"disc"}for(var FA in tA){if(tA[FA].test(CA)){return FA}}}utils.each(sA.getNodesByTagName("p"),function(GA){if(GA.getAttr("class")!="MsoListParagraph"){return}GA.setStyle("margin","");GA.setStyle("margin-left","");GA.setAttr("class","");function HA(NA,OA,PA){if(NA.tagName=="ol"){if(browser.ie){var QA=OA.firstChild();if(QA.type=="element"&&QA.tagName=="span"&&tA[PA].test(QA.innerText())){OA.removeChild(QA)}}else{OA.innerHTML(OA.innerHTML().replace(tA[PA],""))}}else{OA.removeChild(OA.firstChild())}var RA=UE.uNode.createElement("li");RA.appendChild(OA);NA.appendChild(RA)}var IA=GA,JA,KA=GA;if(GA.parentNode.tagName!="li"&&(JA=vA(GA.innerText(),GA))){var LA=UE.uNode.createElement(Bz.options.insertorderedlist.hasOwnProperty(JA)?"ol":"ul");if(Dz[JA]){LA.setAttr("class","custom_"+JA)}else{LA.setStyle("list-style-type",JA)}while(GA&&GA.parentNode.tagName!="li"&&vA(GA.innerText(),GA)){IA=GA.nextSibling();if(!IA){GA.parentNode.insertBefore(LA,GA)}HA(LA,GA,JA);GA=IA}if(!LA.parentNode&&GA&&GA.parentNode){GA.parentNode.insertBefore(LA,GA)}}var MA=KA.firstChild();if(MA&&MA.type=="element"&&MA.tagName=="span"&&/^\s*(&nbsp;)+\s*$/.test(MA.innerText())){MA.parentNode.removeChild(MA)}})}});Bz.addListener("contentchange",function(){Jz(Bz.document)});function Jz(SA,TA){utils.each(domUtils.getElementsByTagName(SA,"ol ul"),function(UA){if(!domUtils.inDoc(UA,SA))return;var VA=UA.parentNode;if(VA.tagName==UA.tagName){var WA=Iz(UA)||(UA.tagName=="OL"?"decimal":"disc"),XA=Iz(VA)||(VA.tagName=="OL"?"decimal":"disc");if(WA==XA){var YA=utils.indexOf(Fz[UA.tagName],WA);YA=YA+1==Fz[UA.tagName].length?0:YA+1;Lz(UA,Fz[UA.tagName][YA])}}var ZA=0,$A=2;if(domUtils.hasClass(UA,/custom_/)){if(!(/[ou]l/i.test(VA.tagName)&&domUtils.hasClass(VA,/custom_/))){$A=1}}else{if(/[ou]l/i.test(VA.tagName)&&domUtils.hasClass(VA,/custom_/)){$A=3}}var _A=domUtils.getStyle(UA,"list-style-type");_A&&(UA.style.cssText="list-style-type:"+_A);UA.className=utils.trim(UA.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+$A;utils.each(domUtils.getElementsByTagName(UA,"li"),function(aB){aB.style.cssText&&(aB.style.cssText="");if(!aB.firstChild){domUtils.remove(aB);return}if(aB.parentNode!==UA){return}ZA++;if(domUtils.hasClass(UA,/custom_/)){var bB=1,cB=Iz(UA);if(UA.tagName=="OL"){if(cB){switch(cB){case"cn":case"cn1":case"cn2":if(ZA>10&&(ZA%10==0||ZA>10&&ZA<20)){bB=2}else if(ZA>20){bB=3}break;case"num2":if(ZA>9){bB=2}}}aB.className="list-"+Dz[cB]+ZA+" "+"list-"+cB+"-paddingleft-"+bB}else{aB.className="list-"+Dz[cB]+" "+"list-"+cB+"-paddingleft"}}else{aB.className=aB.className.replace(/list-[\w\-]+/gi,"")}var dB=aB.getAttribute("class");if(dB!==null&&!dB.replace(/\s/g,"")){domUtils.removeAttributes(aB,"class")}});!TA&&Kz(UA,UA.tagName.toLowerCase(),Iz(UA)||domUtils.getStyle(UA,"list-style-type"),true)})}function Kz(eB,fB,gB,hB){var iB=eB.nextSibling;if(iB&&iB.nodeType==1&&iB.tagName.toLowerCase()==fB&&(Iz(iB)||domUtils.getStyle(iB,"list-style-type")||(fB=="ol"?"decimal":"disc"))==gB){domUtils.moveChild(iB,eB);if(iB.childNodes.length==0){domUtils.remove(iB)}}if(iB&&domUtils.isFillChar(iB)){domUtils.remove(iB)}var jB=eB.previousSibling;if(jB&&jB.nodeType==1&&jB.tagName.toLowerCase()==fB&&(Iz(jB)||domUtils.getStyle(jB,"list-style-type")||(fB=="ol"?"decimal":"disc"))==gB){domUtils.moveChild(eB,jB)}if(jB&&domUtils.isFillChar(jB)){domUtils.remove(jB)}!hB&&domUtils.isEmptyBlock(eB)&&domUtils.remove(eB);if(Iz(eB)){Jz(eB.ownerDocument,true)}}function Lz(kB,lB){if(Dz[lB]){kB.className="custom_"+lB}try{domUtils.setStyle(kB,"list-style-type",lB)}catch(mB){}}function Mz(nB){var oB=nB.previousSibling;if(oB&&domUtils.isEmptyBlock(oB)){domUtils.remove(oB)}oB=nB.nextSibling;if(oB&&domUtils.isEmptyBlock(oB)){domUtils.remove(oB)}}Bz.addListener("keydown",function(pB,qB){function rB(){qB.preventDefault?qB.preventDefault():qB.returnValue=false;Bz.fireEvent("contentchange");Bz.undoManger&&Bz.undoManger.save()}function sB(JB,KB){while(JB&&!domUtils.isBody(JB)){if(KB(JB)){return null}if(JB.nodeType==1&&/[ou]l/i.test(JB.tagName)){return JB}JB=JB.parentNode}return null}var tB=qB.keyCode||qB.which;if(tB==13&&!qB.shiftKey){var uB=Bz.selection.getRange(),vB=domUtils.findParent(uB.startContainer,function(LB){return domUtils.isBlockElm(LB)},true),wB=domUtils.findParentByTagName(uB.startContainer,"li",true);if(vB&&vB.tagName!="PRE"&&!wB){var xB=vB.innerHTML.replace(new RegExp(domUtils.fillChar,"g"),"");if(/^\s*1\s*\.[^\d]/.test(xB)){vB.innerHTML=xB.replace(/^\s*1\s*\./,"");uB.setStartAtLast(vB).collapse(true).select();Bz.__hasEnterExecCommand=true;Bz.execCommand("insertorderedlist");Bz.__hasEnterExecCommand=false}}var yB=Bz.selection.getRange(),zB=sB(yB.startContainer,function(MB){return MB.tagName=="TABLE"}),AB=yB.collapsed?zB:sB(yB.endContainer,function(NB){return NB.tagName=="TABLE"});if(zB&&AB&&zB===AB){if(!yB.collapsed){zB=domUtils.findParentByTagName(yB.startContainer,"li",true);AB=domUtils.findParentByTagName(yB.endContainer,"li",true);if(zB&&AB&&zB===AB){yB.deleteContents();wB=domUtils.findParentByTagName(yB.startContainer,"li",true);if(wB&&domUtils.isEmptyBlock(wB)){IB=wB.previousSibling;next=wB.nextSibling;FB=Bz.document.createElement("p");domUtils.fillNode(Bz.document,FB);DB=wB.parentNode;if(IB&&next){yB.setStart(next,0).collapse(true).select(true);domUtils.remove(wB)}else{if(!IB&&!next||!IB){DB.parentNode.insertBefore(FB,DB)}else{wB.parentNode.parentNode.insertBefore(FB,DB.nextSibling)}domUtils.remove(wB);if(!DB.firstChild){domUtils.remove(DB)}yB.setStart(FB,0).setCursor()}rB();return}}else{var BB=yB.cloneRange(),CB=BB.collapse(false).createBookmark();yB.deleteContents();BB.moveToBookmark(CB);var wB=domUtils.findParentByTagName(BB.startContainer,"li",true);Mz(wB);BB.select();rB();return}}wB=domUtils.findParentByTagName(yB.startContainer,"li",true);if(wB){if(domUtils.isEmptyBlock(wB)){CB=yB.createBookmark();var DB=wB.parentNode;if(wB!==DB.lastChild){domUtils.breakParent(wB,DB);Mz(wB)}else{DB.parentNode.insertBefore(wB,DB.nextSibling);if(domUtils.isEmptyNode(DB)){domUtils.remove(DB)}}if(!dtd.$list[wB.parentNode.tagName]){if(!domUtils.isBlockElm(wB.firstChild)){FB=Bz.document.createElement("p");wB.parentNode.insertBefore(FB,wB);while(wB.firstChild){FB.appendChild(wB.firstChild)}domUtils.remove(wB)}else{domUtils.remove(wB,true)}}yB.moveToBookmark(CB).select()}else{var EB=wB.firstChild;if(!EB||!domUtils.isBlockElm(EB)){var FB=Bz.document.createElement("p");!wB.firstChild&&domUtils.fillNode(Bz.document,FB);while(wB.firstChild){FB.appendChild(wB.firstChild)}wB.appendChild(FB);EB=FB}var GB=Bz.document.createElement("span");yB.insertNode(GB);domUtils.breakParent(GB,wB);var HB=GB.nextSibling;EB=HB.firstChild;if(!EB){FB=Bz.document.createElement("p");domUtils.fillNode(Bz.document,FB);HB.appendChild(FB);EB=FB}if(domUtils.isEmptyNode(EB)){EB.innerHTML="";domUtils.fillNode(Bz.document,EB)}yB.setStart(EB,0).collapse(true).shrinkBoundary().select();domUtils.remove(GB);var IB=HB.previousSibling;if(IB&&domUtils.isEmptyBlock(IB)){IB.innerHTML="<p></p>";domUtils.fillNode(Bz.document,IB.firstChild)}}rB()}}}if(tB==8){yB=Bz.selection.getRange();if(yB.collapsed&&domUtils.isStartInblock(yB)){BB=yB.cloneRange().trimBoundary();wB=domUtils.findParentByTagName(yB.startContainer,"li",true);if(wB&&domUtils.isStartInblock(BB)){zB=domUtils.findParentByTagName(yB.startContainer,"p",true);if(zB&&zB!==wB.firstChild){var DB=domUtils.findParentByTagName(zB,["ol","ul"]);domUtils.breakParent(zB,DB);Mz(zB);Bz.fireEvent("contentchange");yB.setStart(zB,0).setCursor(false,true);Bz.fireEvent("saveScene");domUtils.preventDefault(qB);return}if(wB&&(IB=wB.previousSibling)){if(tB==46&&wB.childNodes.length){return}if(dtd.$list[IB.tagName]){IB=IB.lastChild}Bz.undoManger&&Bz.undoManger.save();EB=wB.firstChild;if(domUtils.isBlockElm(EB)){if(domUtils.isEmptyNode(EB)){IB.appendChild(EB);yB.setStart(EB,0).setCursor(false,true);while(wB.firstChild){IB.appendChild(wB.firstChild)}}else{GB=Bz.document.createElement("span");yB.insertNode(GB);if(domUtils.isEmptyBlock(IB)){IB.innerHTML=""}domUtils.moveChild(wB,IB);yB.setStartBefore(GB).collapse(true).select(true);domUtils.remove(GB)}}else{if(domUtils.isEmptyNode(wB)){var FB=Bz.document.createElement("p");IB.appendChild(FB);yB.setStart(FB,0).setCursor()}else{yB.setEnd(IB,IB.childNodes.length).collapse().select(true);while(wB.firstChild){IB.appendChild(wB.firstChild)}}}domUtils.remove(wB);Bz.fireEvent("contentchange");Bz.fireEvent("saveScene");domUtils.preventDefault(qB);return}if(wB&&!wB.previousSibling){var DB=wB.parentNode;var CB=yB.createBookmark();if(domUtils.isTagNode(DB.parentNode,"ol ul")){DB.parentNode.insertBefore(wB,DB);if(domUtils.isEmptyNode(DB)){domUtils.remove(DB)}}else{while(wB.firstChild){DB.parentNode.insertBefore(wB.firstChild,DB)}domUtils.remove(wB);if(domUtils.isEmptyNode(DB)){domUtils.remove(DB)}}yB.moveToBookmark(CB).setCursor(false,true);Bz.fireEvent("contentchange");Bz.fireEvent("saveScene");domUtils.preventDefault(qB);return}}}}});Bz.addListener("keyup",function(OB,PB){var QB=PB.keyCode||PB.which;if(QB==8){var RB=Bz.selection.getRange(),SB;if(SB=domUtils.findParentByTagName(RB.startContainer,["ol","ul"],true)){Kz(SB,SB.tagName.toLowerCase(),Iz(SB)||domUtils.getComputedStyle(SB,"list-style-type"),true)}}});Bz.addListener("tabkeydown",function(){var TB=Bz.selection.getRange();function UB(fC){if(Bz.options.maxListLevel!=-1){var gC=fC.parentNode,hC=0;while(/[ou]l/i.test(gC.tagName)){hC++;gC=gC.parentNode}if(hC>=Bz.options.maxListLevel){return true}}}var VB=domUtils.findParentByTagName(TB.startContainer,"li",true);if(VB){var WB;if(TB.collapsed){if(UB(VB))return true;var XB=VB.parentNode,YB=Bz.document.createElement(XB.tagName),ZB=utils.indexOf(Fz[YB.tagName],Iz(XB)||domUtils.getComputedStyle(XB,"list-style-type"));ZB=ZB+1==Fz[YB.tagName].length?0:ZB+1;var $B=Fz[YB.tagName][ZB];Lz(YB,$B);if(domUtils.isStartInblock(TB)){Bz.fireEvent("saveScene");WB=TB.createBookmark();XB.insertBefore(YB,VB);YB.appendChild(VB);Kz(YB,YB.tagName.toLowerCase(),$B);Bz.fireEvent("contentchange");TB.moveToBookmark(WB).select(true);return true}}else{Bz.fireEvent("saveScene");WB=TB.createBookmark();for(var _B=0,aC,bC=domUtils.findParents(VB),cC;cC=bC[_B++];){if(domUtils.isTagNode(cC,"ol ul")){aC=cC;break}}var dC=VB;if(WB.end){while(dC&&!(domUtils.getPosition(dC,WB.end)&domUtils.POSITION_FOLLOWING)){if(UB(dC)){dC=domUtils.getNextDomNode(dC,false,null,function(iC){return iC!==aC});continue}var XB=dC.parentNode,YB=Bz.document.createElement(XB.tagName),ZB=utils.indexOf(Fz[YB.tagName],Iz(XB)||domUtils.getComputedStyle(XB,"list-style-type"));var eC=ZB+1==Fz[YB.tagName].length?0:ZB+1;var $B=Fz[YB.tagName][eC];Lz(YB,$B);XB.insertBefore(YB,dC);while(dC&&!(domUtils.getPosition(dC,WB.end)&domUtils.POSITION_FOLLOWING)){VB=dC.nextSibling;YB.appendChild(dC);if(!VB||domUtils.isTagNode(VB,"ol ul")){if(VB){while(VB=VB.firstChild){if(VB.tagName=="LI"){break}}}else{VB=domUtils.getNextDomNode(dC,false,null,function(jC){return jC!==aC})}break}dC=VB}Kz(YB,YB.tagName.toLowerCase(),$B);dC=VB}}Bz.fireEvent("contentchange");TB.moveToBookmark(WB).select();return true}}});function Nz(kC){while(kC&&!domUtils.isBody(kC)){if(kC.nodeName=="TABLE"){return null}if(kC.nodeName=="LI"){return kC}kC=kC.parentNode}}Bz.commands["insertorderedlist"]=Bz.commands["insertunorderedlist"]={execCommand:function(lC,mC){if(!mC){mC=lC.toLowerCase()=="insertorderedlist"?"decimal":"disc"}var nC=this,oC=this.selection.getRange(),pC=function(RC){return RC.nodeType==1?RC.tagName.toLowerCase()!="br":!domUtils.isWhitespace(RC)},qC=lC.toLowerCase()=="insertorderedlist"?"ol":"ul",rC=nC.document.createDocumentFragment();oC.adjustmentBoundary().shrinkBoundary();var sC=oC.createBookmark(true),tC=Nz(nC.document.getElementById(sC.start)),uC=0,vC=Nz(nC.document.getElementById(sC.end)),wC=0,xC,yC,zC,AC;if(tC||vC){tC&&(xC=tC.parentNode);if(!sC.end){vC=tC}vC&&(yC=vC.parentNode);if(xC===yC){while(tC!==vC){AC=tC;tC=tC.nextSibling;if(!domUtils.isBlockElm(AC.firstChild)){var BC=nC.document.createElement("p");while(AC.firstChild){BC.appendChild(AC.firstChild)}AC.appendChild(BC)}rC.appendChild(AC)}AC=nC.document.createElement("span");xC.insertBefore(AC,vC);if(!domUtils.isBlockElm(vC.firstChild)){BC=nC.document.createElement("p");while(vC.firstChild){BC.appendChild(vC.firstChild)}vC.appendChild(BC)}rC.appendChild(vC);domUtils.breakParent(AC,xC);if(domUtils.isEmptyNode(AC.previousSibling)){domUtils.remove(AC.previousSibling)}if(domUtils.isEmptyNode(AC.nextSibling)){domUtils.remove(AC.nextSibling)}var CC=Iz(xC)||domUtils.getComputedStyle(xC,"list-style-type")||(lC.toLowerCase()=="insertorderedlist"?"decimal":"disc");if(xC.tagName.toLowerCase()==qC&&CC==mC){for(var DC=0,EC,FC=nC.document.createDocumentFragment();EC=rC.firstChild;){if(domUtils.isTagNode(EC,"ol ul")){FC.appendChild(EC)}else{while(EC.firstChild){FC.appendChild(EC.firstChild);domUtils.remove(EC)}}}AC.parentNode.insertBefore(FC,AC)}else{zC=nC.document.createElement(qC);Lz(zC,mC);zC.appendChild(rC);AC.parentNode.insertBefore(zC,AC)}domUtils.remove(AC);zC&&Kz(zC,qC,mC);oC.moveToBookmark(sC).select();return}if(tC){while(tC){AC=tC.nextSibling;if(domUtils.isTagNode(tC,"ol ul")){rC.appendChild(tC)}else{var GC=nC.document.createDocumentFragment(),HC=0;while(tC.firstChild){if(domUtils.isBlockElm(tC.firstChild)){HC=1}GC.appendChild(tC.firstChild)}if(!HC){var IC=nC.document.createElement("p");IC.appendChild(GC);rC.appendChild(IC)}else{rC.appendChild(GC)}domUtils.remove(tC)}tC=AC}xC.parentNode.insertBefore(rC,xC.nextSibling);if(domUtils.isEmptyNode(xC)){oC.setStartBefore(xC);domUtils.remove(xC)}else{oC.setStartAfter(xC)}uC=1}if(vC&&domUtils.inDoc(yC,nC.document)){tC=yC.firstChild;while(tC&&tC!==vC){AC=tC.nextSibling;if(domUtils.isTagNode(tC,"ol ul")){rC.appendChild(tC)}else{GC=nC.document.createDocumentFragment();HC=0;while(tC.firstChild){if(domUtils.isBlockElm(tC.firstChild)){HC=1}GC.appendChild(tC.firstChild)}if(!HC){IC=nC.document.createElement("p");IC.appendChild(GC);rC.appendChild(IC)}else{rC.appendChild(GC)}domUtils.remove(tC)}tC=AC}var JC=domUtils.createElement(nC.document,"div",{tmpDiv:1});domUtils.moveChild(vC,JC);rC.appendChild(JC);domUtils.remove(vC);yC.parentNode.insertBefore(rC,yC);oC.setEndBefore(yC);if(domUtils.isEmptyNode(yC)){domUtils.remove(yC)}wC=1}}if(!uC){oC.setStartBefore(nC.document.getElementById(sC.start))}if(sC.end&&!wC){oC.setEndAfter(nC.document.getElementById(sC.end))}oC.enlarge(true,function(SC){return Cz[SC.tagName]});rC=nC.document.createDocumentFragment();var KC=oC.createBookmark(),LC=domUtils.getNextDomNode(KC.start,false,pC),MC=oC.cloneRange(),NC,OC=domUtils.isBlockElm;while(LC&&LC!==KC.end&&domUtils.getPosition(LC,KC.end)&domUtils.POSITION_PRECEDING){if(LC.nodeType==3||dtd.li[LC.tagName]){if(LC.nodeType==1&&dtd.$list[LC.tagName]){while(LC.firstChild){rC.appendChild(LC.firstChild)}NC=domUtils.getNextDomNode(LC,false,pC);domUtils.remove(LC);LC=NC;continue}NC=LC;MC.setStartBefore(LC);while(LC&&LC!==KC.end&&(!OC(LC)||domUtils.isBookmarkNode(LC))){NC=LC;LC=domUtils.getNextDomNode(LC,false,null,function(TC){return!Cz[TC.tagName]})}if(LC&&OC(LC)){AC=domUtils.getNextDomNode(NC,false,pC);if(AC&&domUtils.isBookmarkNode(AC)){LC=domUtils.getNextDomNode(AC,false,pC);NC=AC}}MC.setEndAfter(NC);LC=domUtils.getNextDomNode(NC,false,pC);var PC=oC.document.createElement("li");PC.appendChild(MC.extractContents());if(domUtils.isEmptyNode(PC)){var NC=oC.document.createElement("p");while(PC.firstChild){NC.appendChild(PC.firstChild)}PC.appendChild(NC)}rC.appendChild(PC)}else{LC=domUtils.getNextDomNode(LC,true,pC)}}oC.moveToBookmark(KC).collapse(true);zC=nC.document.createElement(qC);Lz(zC,mC);zC.appendChild(rC);oC.insertNode(zC);Kz(zC,qC,mC);for(var DC=0,EC,QC=domUtils.getElementsByTagName(zC,"div");EC=QC[DC++];){if(EC.getAttribute("tmpDiv")){domUtils.remove(EC,true)}}oC.moveToBookmark(sC).select()},queryCommandState:function(UC){var VC=UC.toLowerCase()=="insertorderedlist"?"ol":"ul";var WC=this.selection.getStartElementPath();for(var XC=0,YC;YC=WC[XC++];){if(YC.nodeName=="TABLE"){return 0}if(VC==YC.nodeName.toLowerCase()){return 1}}return 0},queryCommandValue:function(ZC){var $C=ZC.toLowerCase()=="insertorderedlist"?"ol":"ul";var _C=this.selection.getStartElementPath(),aD;for(var bD=0,cD;cD=_C[bD++];){if(cD.nodeName=="TABLE"){aD=null;break}if($C==cD.nodeName.toLowerCase()){aD=cD;break}}return aD?Iz(aD)||domUtils.getComputedStyle(aD,"list-style-type"):null}}};(function(){var dD={textarea:function(eD,fD){var gD=fD.ownerDocument.createElement("textarea");gD.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;";if(browser.ie&&browser.version<8){gD.style.width=fD.offsetWidth+"px";gD.style.height=fD.offsetHeight+"px";fD.onresize=function(){gD.style.width=fD.offsetWidth+"px";gD.style.height=fD.offsetHeight+"px"}}fD.appendChild(gD);return{setContent:function(hD){gD.value=hD},getContent:function(){return gD.value},select:function(){var iD;if(browser.ie){iD=gD.createTextRange();iD.collapse(true);iD.select()}else{gD.setSelectionRange(0,0);gD.focus()}},dispose:function(){fD.removeChild(gD);fD.onresize=null;gD=null;fD=null}}},codemirror:function(jD,kD){var lD=window.CodeMirror(kD,{mode:"text/html",tabMode:"indent",lineNumbers:true,lineWrapping:true});var mD=lD.getWrapperElement();mD.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;';lD.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;";lD.refresh();return{getCodeMirror:function(){return lD},setContent:function(nD){lD.setValue(nD)},getContent:function(){return lD.getValue()},select:function(){lD.focus()},dispose:function(){kD.removeChild(mD);mD=null;lD=null}}}};UE.plugins["source"]=function(){var oD=this;var pD=this.options;var qD=false;var rD;var sD;pD.sourceEditor=browser.ie?"textarea":pD.sourceEditor||"codemirror";oD.setOpt({sourceEditorFirst:false});function tD(yD){return dD[pD.sourceEditor=="codemirror"&&window.CodeMirror?"codemirror":"textarea"](oD,yD)}var uD;var vD,wD;oD.commands["source"]={execCommand:function(){qD=!qD;if(qD){wD=oD.selection.getRange().createAddress(false,true);oD.undoManger&&oD.undoManger.save(true);if(browser.gecko){oD.body.contentEditable=false}uD=oD.iframe.style.cssText;oD.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;";oD.fireEvent("beforegetcontent");var zD=UE.htmlparser(oD.body.innerHTML);oD.filterOutputRule(zD);zD.traversal(function(ED){if(ED.type=="element"){switch(ED.tagName){case"td":case"th":case"caption":if(ED.children&&ED.children.length==1){if(ED.firstChild().tagName=="br"){ED.removeChild(ED.firstChild())}};break;case"pre":ED.innerText(ED.innerText().replace(/&nbsp;/g," "))}}});oD.fireEvent("aftergetcontent");var AD=zD.toHtml(true);rD=tD(oD.iframe.parentNode);rD.setContent(AD);sD=oD.setContent;oD.setContent=function(FD){var GD=UE.htmlparser(FD);oD.filterInputRule(GD);FD=GD.toHtml();rD.setContent(FD)};setTimeout(function(){rD.select();oD.addListener("fullscreenchanged",function(){try{rD.getCodeMirror().refresh()}catch(HD){}})});vD=oD.getContent;oD.getContent=function(){return rD.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>"}}else{oD.iframe.style.cssText=uD;var BD=rD.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>";BD=BD.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(ID,JD){if(JD&&!dtd.$inlineWithA[JD.toLowerCase()]){return ID.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,"")}return ID.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")});oD.setContent=sD;oD.setContent(BD);rD.dispose();rD=null;oD.getContent=vD;var CD=oD.body.firstChild;if(!CD){oD.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";CD=oD.body.firstChild}oD.undoManger&&oD.undoManger.save(true);if(browser.gecko){var DD=document.createElement("input");DD.style.cssText="position:absolute;left:0;top:-32768px";document.body.appendChild(DD);oD.body.contentEditable=false;setTimeout(function(){domUtils.setViewportOffset(DD,{left:-32768,top:0});DD.focus();setTimeout(function(){oD.body.contentEditable=true;oD.selection.getRange().moveToAddress(wD).select(true);domUtils.remove(DD)})})}else{try{oD.selection.getRange().moveToAddress(wD).select(true)}catch(KD){}}}this.fireEvent("sourcemodechanged",qD)},queryCommandState:function(){return qD|0},notNeedUndo:1};var xD=oD.queryCommandState;oD.queryCommandState=function(LD){LD=LD.toLowerCase();if(qD){return LD in{source:1,fullscreen:1}?1:-1}return xD.apply(this,arguments)};if(pD.sourceEditor=="codemirror"){oD.addListener("ready",function(){utils.loadFile(document,{src:pD.codeMirrorJsUrl||pD.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){if(pD.sourceEditorFirst){setTimeout(function(){oD.execCommand("source")},0)}});utils.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:pD.codeMirrorCssUrl||pD.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}}})();UE.plugins["enterkey"]=function(){var MD,ND=this,OD=ND.options.enterTag;ND.addListener("keyup",function(PD,QD){var RD=QD.keyCode||QD.which;if(RD==13){var SD=ND.selection.getRange(),TD=SD.startContainer,UD;if(!browser.ie){if(/h\d/i.test(MD)){if(browser.gecko){var VD=domUtils.findParentByTagName(TD,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],true);if(!VD){ND.document.execCommand("formatBlock",false,"<p>");UD=1}}else{if(TD.nodeType==1){var WD=ND.document.createTextNode(""),XD;SD.insertNode(WD);XD=domUtils.findParentByTagName(WD,"div",true);if(XD){var YD=ND.document.createElement("p");while(XD.firstChild){YD.appendChild(XD.firstChild)}XD.parentNode.insertBefore(YD,XD);domUtils.remove(XD);SD.setStartBefore(WD).setCursor();UD=1}domUtils.remove(WD)}}if(ND.undoManger&&UD){ND.undoManger.save()}}browser.opera&&SD.select()}else{ND.fireEvent("saveScene",true,true)}}});ND.addListener("keydown",function(ZD,$D){var _D=$D.keyCode||$D.which;if(_D==13){if(ND.fireEvent("beforeenterkeydown")){domUtils.preventDefault($D);return}ND.fireEvent("saveScene",true,true);MD="";var aE=ND.selection.getRange();if(!aE.collapsed){var bE=aE.startContainer,cE=aE.endContainer,dE=domUtils.findParentByTagName(bE,"td",true),eE=domUtils.findParentByTagName(cE,"td",true);if(dE&&eE&&dE!==eE||!dE&&eE||dE&&!eE){$D.preventDefault?$D.preventDefault():$D.returnValue=false;return}}if(OD=="p"){if(!browser.ie){bE=domUtils.findParentByTagName(aE.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],true);if(!bE&&!browser.opera){ND.document.execCommand("formatBlock",false,"<p>");if(browser.gecko){aE=ND.selection.getRange();bE=domUtils.findParentByTagName(aE.startContainer,"p",true);bE&&domUtils.removeDirtyAttr(bE)}}else{MD=bE.tagName;bE.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(bE)}}}else{$D.preventDefault?$D.preventDefault():$D.returnValue=false;if(!aE.collapsed){aE.deleteContents();bE=aE.startContainer;if(bE.nodeType==1&&(bE=bE.childNodes[aE.startOffset])){while(bE.nodeType==1){if(dtd.$empty[bE.tagName]){aE.setStartBefore(bE).setCursor();if(ND.undoManger){ND.undoManger.save()}return false}if(!bE.firstChild){var fE=aE.document.createElement("br");bE.appendChild(fE);aE.setStart(bE,0).setCursor();if(ND.undoManger){ND.undoManger.save()}return false}bE=bE.firstChild}if(bE===aE.startContainer.childNodes[aE.startOffset]){fE=aE.document.createElement("br");aE.insertNode(fE).setCursor()}else{aE.setStart(bE,0).setCursor()}}else{fE=aE.document.createElement("br");aE.insertNode(fE).setStartAfter(fE).setCursor()}}else{fE=aE.document.createElement("br");aE.insertNode(fE);var gE=fE.parentNode;if(gE.lastChild===fE){fE.parentNode.insertBefore(fE.cloneNode(true),fE);aE.setStartBefore(fE)}else{aE.setStartAfter(fE)}aE.setCursor()}}}})};UE.plugins["keystrokes"]=function(){var hE=this;var iE=true;hE.addListener("keydown",function(jE,kE){var lE=kE.keyCode||kE.which,mE=hE.selection.getRange();if(!mE.collapsed&&!(kE.ctrlKey||kE.shiftKey||kE.altKey||kE.metaKey)&&(lE>=65&&lE<=90||lE>=48&&lE<=57||lE>=96&&lE<=111||{13:1,8:1,46:1}[lE])){var nE=mE.startContainer;if(domUtils.isFillChar(nE)){mE.setStartBefore(nE)}nE=mE.endContainer;if(domUtils.isFillChar(nE)){mE.setEndAfter(nE)}mE.txtToElmBoundary();if(mE.endContainer&&mE.endContainer.nodeType==1){nE=mE.endContainer.childNodes[mE.endOffset];if(nE&&domUtils.isBr(nE)){mE.setEndAfter(nE)}}if(mE.startOffset==0){nE=mE.startContainer;if(domUtils.isBoundaryNode(nE,"firstChild")){nE=mE.endContainer;if(mE.endOffset==(nE.nodeType==3?nE.nodeValue.length:nE.childNodes.length)&&domUtils.isBoundaryNode(nE,"lastChild")){hE.fireEvent("saveScene");hE.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";mE.setStart(hE.body.firstChild,0).setCursor(false,true);hE._selectionChange();return}}}}if(lE==keymap.Backspace){mE=hE.selection.getRange();iE=mE.collapsed;if(hE.fireEvent("delkeydown",kE)){return}var oE,pE;if(mE.collapsed&&mE.inFillChar()){oE=mE.startContainer;if(domUtils.isFillChar(oE)){mE.setStartBefore(oE).shrinkBoundary(true).collapse(true);domUtils.remove(oE)}else{oE.nodeValue=oE.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"");mE.startOffset--;mE.collapse(true).select(true)}}if(oE=mE.getClosedNode()){hE.fireEvent("saveScene");mE.setStartBefore(oE);domUtils.remove(oE);mE.setCursor();hE.fireEvent("saveScene");domUtils.preventDefault(kE);return}if(!browser.ie){oE=domUtils.findParentByTagName(mE.startContainer,"table",true);pE=domUtils.findParentByTagName(mE.endContainer,"table",true);if(oE&&!pE||!oE&&pE||oE!==pE){kE.preventDefault();return}}}if(lE==keymap.Tab){var qE={ol:1,ul:1,table:1};if(hE.fireEvent("tabkeydown",kE)){domUtils.preventDefault(kE);return}var rE=hE.selection.getRange();hE.fireEvent("saveScene");for(var sE=0,tE="",uE=hE.options.tabSize||4,vE=hE.options.tabNode||"&nbsp;";sE<uE;sE++){tE+=vE}var wE=hE.document.createElement("span");wE.innerHTML=tE+domUtils.fillChar;if(rE.collapsed){rE.insertNode(wE.cloneNode(true).firstChild).setCursor(true)}else{var xE=function(CE){return domUtils.isBlockElm(CE)&&!qE[CE.tagName.toLowerCase()]};oE=domUtils.findParent(rE.startContainer,xE,true);pE=domUtils.findParent(rE.endContainer,xE,true);if(oE&&pE&&oE===pE){rE.deleteContents();rE.insertNode(wE.cloneNode(true).firstChild).setCursor(true)}else{var yE=rE.createBookmark();rE.enlarge(true);var zE=rE.createBookmark(),AE=domUtils.getNextDomNode(zE.start,false,xE);while(AE&&!(domUtils.getPosition(AE,zE.end)&domUtils.POSITION_FOLLOWING)){AE.insertBefore(wE.cloneNode(true).firstChild,AE.firstChild);AE=domUtils.getNextDomNode(AE,false,xE)}rE.moveToBookmark(zE).moveToBookmark(yE).select()}}domUtils.preventDefault(kE)}if(browser.gecko&&lE==46){rE=hE.selection.getRange();if(rE.collapsed){oE=rE.startContainer;if(domUtils.isEmptyBlock(oE)){var BE=oE.parentNode;while(domUtils.getChildCount(BE)==1&&!domUtils.isBody(BE)){oE=BE;BE=BE.parentNode}if(oE===BE.lastChild)kE.preventDefault();return}}}});hE.addListener("keyup",function(DE,EE){var FE=EE.keyCode||EE.which,GE,HE=this;if(FE==keymap.Backspace){if(HE.fireEvent("delkeyup")){return}GE=HE.selection.getRange();if(GE.collapsed){var IE,JE=["h1","h2","h3","h4","h5","h6"];if(IE=domUtils.findParentByTagName(GE.startContainer,JE,true)){if(domUtils.isEmptyBlock(IE)){var KE=IE.previousSibling;if(KE&&KE.nodeName!="TABLE"){domUtils.remove(IE);GE.setStartAtLast(KE).setCursor(false,true);return}else{var LE=IE.nextSibling;if(LE&&LE.nodeName!="TABLE"){domUtils.remove(IE);GE.setStartAtFirst(LE).setCursor(false,true);return}}}}if(domUtils.isBody(GE.startContainer)){var IE=domUtils.createElement(HE.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});GE.insertNode(IE).setStart(IE,0).setCursor(false,true)}}if(!iE&&(GE.startContainer.nodeType==3||GE.startContainer.nodeType==1&&domUtils.isEmptyBlock(GE.startContainer))){if(browser.ie){var ME=GE.document.createElement("span");GE.insertNode(ME).setStartBefore(ME).collapse(true);GE.select();domUtils.remove(ME)}else{GE.select()}}}})};UE.plugins["fiximgclick"]=function(){var NE=false;function OE(){this.editor=null;this.resizer=null;this.cover=null;this.doc=document;this.prePos={x:0,y:0};this.startPos={x:0,y:0}}(function(){var PE=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];OE.prototype={init:function(QE){var RE=this;RE.editor=QE;RE.startPos=this.prePos={x:0,y:0};RE.dragId=-1;var SE=[],TE=RE.cover=document.createElement("div"),VE=RE.resizer=document.createElement("div");TE.id=RE.editor.ui.id+"_imagescale_cover";TE.style.cssText="position:absolute;display:none;z-index:"+RE.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;";domUtils.on(TE,"mousedown click",function(){RE.hide()});for(i=0;i<8;i++){SE.push('<span class="edui-editor-imagescale-hand'+i+'"></span>')}VE.id=RE.editor.ui.id+"_imagescale";VE.className="edui-editor-imagescale";VE.innerHTML=SE.join("");VE.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+RE.editor.options.zIndex+";";RE.editor.ui.getDom().appendChild(TE);RE.editor.ui.getDom().appendChild(VE);RE.initStyle();RE.initEvents()},initStyle:function(){utils.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}"+".edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}"+".edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var WE=this;WE.startPos.x=WE.startPos.y=0;WE.isDraging=false},_eventHandler:function(XE){var YE=this;switch(XE.type){case"mousedown":var ZE=XE.target||XE.srcElement,ZE;if(ZE.className.indexOf("edui-editor-imagescale-hand")!=-1&&YE.dragId==-1){YE.dragId=ZE.className.slice(-1);YE.startPos.x=YE.prePos.x=XE.clientX;YE.startPos.y=YE.prePos.y=XE.clientY;domUtils.on(YE.doc,"mousemove",YE.proxy(YE._eventHandler,YE))}break;case"mousemove":if(YE.dragId!=-1){YE.updateContainerStyle(YE.dragId,{x:XE.clientX-YE.prePos.x,y:XE.clientY-YE.prePos.y});YE.prePos.x=XE.clientX;YE.prePos.y=XE.clientY;NE=true;YE.updateTargetElement()}break;case"mouseup":if(YE.dragId!=-1){YE.updateContainerStyle(YE.dragId,{x:XE.clientX-YE.prePos.x,y:XE.clientY-YE.prePos.y});YE.updateTargetElement();if(YE.target.parentNode)YE.attachTo(YE.target);YE.dragId=-1}domUtils.un(YE.doc,"mousemove",YE.proxy(YE._eventHandler,YE));if(NE){NE=false;YE.editor.fireEvent("contentchange")}break;default:break}},updateTargetElement:function(){var $E=this;domUtils.setStyles($E.target,{width:$E.resizer.style.width,height:$E.resizer.style.height});$E.target.width=parseInt($E.resizer.style.width);$E.target.height=parseInt($E.resizer.style.height);$E.attachTo($E.target)},updateContainerStyle:function(_E,aF){var bF=this,cF=bF.resizer,dF;if(PE[_E][0]!=0){dF=parseInt(cF.style.left)+aF.x;cF.style.left=bF._validScaledProp("left",dF)+"px"}if(PE[_E][1]!=0){dF=parseInt(cF.style.top)+aF.y;cF.style.top=bF._validScaledProp("top",dF)+"px"}if(PE[_E][2]!=0){dF=cF.clientWidth+PE[_E][2]*aF.x;cF.style.width=bF._validScaledProp("width",dF)+"px"}if(PE[_E][3]!=0){dF=cF.clientHeight+PE[_E][3]*aF.y;cF.style.height=bF._validScaledProp("height",dF)+"px"}},_validScaledProp:function(eF,fF){var gF=this.resizer,hF=document;fF=isNaN(fF)?0:fF;switch(eF){case"left":return fF<0?0:fF+gF.clientWidth>hF.clientWidth?hF.clientWidth-gF.clientWidth:fF;case"top":return fF<0?0:fF+gF.clientHeight>hF.clientHeight?hF.clientHeight-gF.clientHeight:fF;case"width":return fF<=0?1:fF+gF.offsetLeft>hF.clientWidth?hF.clientWidth-gF.offsetLeft:fF;case"height":return fF<=0?1:fF+gF.offsetTop>hF.clientHeight?hF.clientHeight-gF.offsetTop:fF}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var iF=this,jF=domUtils.getXY(iF.editor.ui.getDom()),kF=domUtils.getXY(iF.editor.iframe);domUtils.setStyles(iF.cover,{width:iF.editor.iframe.offsetWidth+"px",height:iF.editor.iframe.offsetHeight+"px",top:kF.y-jF.y+"px",left:kF.x-jF.x+"px",position:"absolute",display:""})},show:function(lF){var mF=this;mF.resizer.style.display="block";if(lF)mF.attachTo(lF);domUtils.on(this.resizer,"mousedown",mF.proxy(mF._eventHandler,mF));domUtils.on(mF.doc,"mouseup",mF.proxy(mF._eventHandler,mF));mF.showCover();mF.editor.fireEvent("afterscaleshow",mF);mF.editor.fireEvent("saveScene")},hide:function(){var nF=this;nF.hideCover();nF.resizer.style.display="none";domUtils.un(nF.resizer,"mousedown",nF.proxy(nF._eventHandler,nF));domUtils.un(nF.doc,"mouseup",nF.proxy(nF._eventHandler,nF));nF.editor.fireEvent("afterscalehide",nF)},proxy:function(oF,pF){return function(qF){return oF.apply(pF||this,arguments)}},attachTo:function(rF){var sF=this,tF=sF.target=rF,uF=this.resizer,vF=domUtils.getXY(tF),wF=domUtils.getXY(sF.editor.iframe),xF=domUtils.getXY(uF.parentNode);domUtils.setStyles(uF,{width:tF.width+"px",height:tF.height+"px",left:wF.x+vF.x-sF.editor.document.body.scrollLeft-xF.x-parseInt(uF.style.borderLeftWidth)+"px",top:wF.y+vF.y-sF.editor.document.body.scrollTop-xF.y-parseInt(uF.style.borderTopWidth)+"px"})}}})();return function(){var yF=this,zF;yF.setOpt("imageScaleEnabled",true);if(!browser.ie&&yF.options.imageScaleEnabled){yF.addListener("click",function(AF,BF){var CF=yF.selection.getRange(),DF=CF.getClosedNode();if(DF&&DF.tagName=="IMG"&&yF.body.contentEditable!="false"){if(DF.className.indexOf("edui-faked-music")!=-1||DF.getAttribute("anchorname")||domUtils.hasClass(DF,"loadingclass")||domUtils.hasClass(DF,"loaderrorclass")){return}if(!zF){zF=new OE;zF.init(yF);yF.ui.getDom().appendChild(zF.resizer);var EF=function(HF){zF.hide();if(zF.target)yF.selection.getRange().selectNode(zF.target).select()},FF=function(IF){var JF=IF.target||IF.srcElement;if(JF&&(JF.className===undefined||JF.className.indexOf("edui-editor-imagescale")==-1)){EF(IF)}},GF;yF.addListener("afterscaleshow",function(KF){yF.addListener("beforekeydown",EF);yF.addListener("beforemousedown",FF);domUtils.on(document,"keydown",EF);domUtils.on(document,"mousedown",FF);yF.selection.getNative().removeAllRanges()});yF.addListener("afterscalehide",function(LF){yF.removeListener("beforekeydown",EF);yF.removeListener("beforemousedown",FF);domUtils.un(document,"keydown",EF);domUtils.un(document,"mousedown",FF);var MF=zF.target;if(MF.parentNode){yF.selection.getRange().selectNode(MF).select()}});domUtils.on(zF.resizer,"mousedown",function(NF){yF.selection.getNative().removeAllRanges();var OF=NF.target||NF.srcElement;if(OF&&OF.className.indexOf("edui-editor-imagescale-hand")==-1){GF=setTimeout(function(){zF.hide();if(zF.target)yF.selection.getRange().selectNode(OF).select()},200)}});domUtils.on(zF.resizer,"mouseup",function(PF){var QF=PF.target||PF.srcElement;if(QF&&QF.className.indexOf("edui-editor-imagescale-hand")==-1){clearTimeout(GF)}})}zF.show(DF)}else{if(zF&&zF.resizer.style.display!="none")zF.hide()}})}if(browser.webkit){yF.addListener("click",function(RF,SF){if(SF.target.tagName=="IMG"&&yF.body.contentEditable!="false"){var TF=new dom.Range(yF.document);TF.selectNode(SF.target).select()}})}}}();UE.plugin.register("autolink",function(){var UF=0;return!browser.ie?{bindEvents:{reset:function(){UF=0},keydown:function(VF,WF){var XF=this;var YF=WF.keyCode||WF.which;if(YF==32||YF==13){var ZF=XF.selection.getNative(),$F=ZF.getRangeAt(0).cloneRange(),_F,aG;var bG=$F.startContainer;while(bG.nodeType==1&&$F.startOffset>0){bG=$F.startContainer.childNodes[$F.startOffset-1];if(!bG){break}$F.setStart(bG,bG.nodeType==1?bG.childNodes.length:bG.nodeValue.length);$F.collapse(true);bG=$F.startContainer}do{if($F.startOffset==0){bG=$F.startContainer.previousSibling;while(bG&&bG.nodeType==1){bG=bG.lastChild}if(!bG||domUtils.isFillChar(bG)){break}_F=bG.nodeValue.length}else{bG=$F.startContainer;_F=$F.startOffset}$F.setStart(bG,_F-1);aG=$F.toString().charCodeAt(0)}while(aG!=160&&aG!=32);if($F.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){while($F.toString().length){if(/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test($F.toString())){break}try{$F.setStart($F.startContainer,$F.startOffset+1)}catch(fG){var bG=$F.startContainer;while(!(next=bG.nextSibling)){if(domUtils.isBody(bG)){return}bG=bG.parentNode}$F.setStart(next,0)}}if(domUtils.findParentByTagName($F.startContainer,"a",true)){return}var cG=XF.document.createElement("a"),dG=XF.document.createTextNode(" "),eG;XF.undoManger&&XF.undoManger.save();cG.appendChild($F.extractContents());cG.href=cG.innerHTML=cG.innerHTML.replace(/<[^>]+>/g,"");eG=cG.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),"");eG=/^(?:https?:\/\/)/gi.test(eG)?eG:"http://"+eG;cG.setAttribute("_src",utils.html(eG));cG.href=utils.html(eG);$F.insertNode(cG);cG.parentNode.insertBefore(dG,cG.nextSibling);$F.setStart(dG,0);$F.collapse(true);ZF.removeAllRanges();ZF.addRange($F);XF.undoManger&&XF.undoManger.save()}}}}}:{}},function(){var gG={37:1,38:1,39:1,40:1,13:1,32:1};function hG(iG){if(iG.nodeType==3){return null}if(iG.nodeName=="A"){return iG}var jG=iG.lastChild;while(jG){if(jG.nodeName=="A"){return jG}if(jG.nodeType==3){if(domUtils.isWhitespace(jG)){jG=jG.previousSibling;continue}return null}jG=jG.lastChild}}browser.ie&&this.addListener("keyup",function(kG,lG){var mG=this,nG=lG.keyCode;if(gG[nG]){var oG=mG.selection.getRange();var pG=oG.startContainer;if(nG==13){while(pG&&!domUtils.isBody(pG)&&!domUtils.isBlockElm(pG)){pG=pG.parentNode}if(pG&&!domUtils.isBody(pG)&&pG.nodeName=="P"){var qG=pG.previousSibling;if(qG&&qG.nodeType==1){var qG=hG(qG);if(qG&&!qG.getAttribute("_href")){domUtils.remove(qG,true)}}}}else if(nG==32){if(pG.nodeType==3&&/^\s$/.test(pG.nodeValue)){pG=pG.previousSibling;if(pG&&pG.nodeName=="A"&&!pG.getAttribute("_href")){domUtils.remove(pG,true)}}}else{pG=domUtils.findParentByTagName(pG,"a",true);if(pG&&!pG.getAttribute("_href")){var rG=oG.createBookmark();domUtils.remove(pG,true);oG.moveToBookmark(rG).select(true)}}}})});UE.plugins["autoheight"]=function(){var sG=this;sG.autoHeightEnabled=sG.options.autoHeightEnabled!==false;if(!sG.autoHeightEnabled){return}var tG,uG=0,vG=sG.options,wG,xG;function yG(){var AG=this;clearTimeout(xG);if(zG)return;if(!AG.queryCommandState||AG.queryCommandState&&AG.queryCommandState("source")!=1){xG=setTimeout(function(){var BG=AG.body.lastChild;while(BG&&BG.nodeType!=1){BG=BG.previousSibling}if(BG&&BG.nodeType==1){BG.style.clear="both";wG=Math.max(domUtils.getXY(BG).y+BG.offsetHeight+25,Math.max(vG.minFrameHeight,vG.initialFrameHeight));if(wG!=uG){if(wG!==parseInt(AG.iframe.parentNode.style.height)){AG.iframe.parentNode.style.height=wG+"px"}AG.body.style.height=wG+"px";uG=wG}domUtils.removeStyle(BG,"clear")}},50)}}var zG;sG.addListener("fullscreenchanged",function(CG,DG){zG=DG});sG.addListener("destroy",function(){sG.removeListener("contentchange afterinserthtml keyup mouseup",yG)});sG.enableAutoHeight=function(){var EG=this;if(!EG.autoHeightEnabled){return}var FG=EG.document;EG.autoHeightEnabled=true;tG=FG.body.style.overflowY;FG.body.style.overflowY="hidden";EG.addListener("contentchange afterinserthtml keyup mouseup",yG);setTimeout(function(){yG.call(EG)},browser.gecko?100:0);EG.fireEvent("autoheightchanged",EG.autoHeightEnabled)};sG.disableAutoHeight=function(){sG.body.style.overflowY=tG||"";sG.removeListener("contentchange",yG);sG.removeListener("keyup",yG);sG.removeListener("mouseup",yG);sG.autoHeightEnabled=false;sG.fireEvent("autoheightchanged",sG.autoHeightEnabled)};sG.on("setHeight",function(){sG.disableAutoHeight()});sG.addListener("ready",function(){sG.enableAutoHeight();var GG;domUtils.on(browser.ie?sG.body:sG.document,browser.webkit?"dragover":"drop",function(){clearTimeout(GG);GG=setTimeout(function(){yG.call(sG)},100)});var HG;window.onscroll=function(){if(HG===null){HG=this.scrollY}else if(this.scrollY==0&&HG!=0){sG.window.scrollTo(0,0);HG=null}}})};UE.plugins["autofloat"]=function(){var IG=this,JG=IG.getLang();IG.setOpt({topOffset:0});var KG=IG.options.autoFloatEnabled!==false,LG=IG.options.topOffset;if(!KG){return}var MG=UE.ui.uiUtils,NG=browser.ie&&browser.version<=6,OG=browser.quirks;function PG(){if(!UE.ui){alert(JG.autofloatMsg);return 0}return 1}function QG(){var _G=document.body.style;_G.backgroundImage='url("about:blank")';_G.backgroundAttachment="fixed"}var RG,SG=document.createElement("div"),TG,UG,VG,WG=true;function XG(){var aH=domUtils.getXY(TG),bH=domUtils.getComputedStyle(TG,"position"),cH=domUtils.getComputedStyle(TG,"left");TG.style.width=TG.offsetWidth+"px";TG.style.zIndex=IG.options.zIndex*1+1;TG.parentNode.insertBefore(SG,TG);if(NG||OG&&browser.ie){if(TG.style.position!="absolute"){TG.style.position="absolute"}TG.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-UG+LG+"px"}else{if(browser.ie7Compat&&WG){WG=false;TG.style.left=domUtils.getXY(TG).x-document.documentElement.getBoundingClientRect().left+2+"px"}if(TG.style.position!="fixed"){TG.style.position="fixed";TG.style.top=LG+"px";(bH=="absolute"||bH=="relative")&&parseFloat(cH)&&(TG.style.left=aH.x+"px")}}}function YG(){WG=true;if(SG.parentNode){SG.parentNode.removeChild(SG)}TG.style.cssText=RG}function ZG(){var dH=VG(IG.container);var eH=IG.options.toolbarTopOffset||0;if(dH.top<0&&dH.bottom-TG.offsetHeight>eH){XG()}else{YG()}}var $G=utils.defer(function(){ZG()},browser.ie?200:100,true);IG.addListener("destroy",function(){domUtils.un(window,["scroll","resize"],ZG);IG.removeListener("keydown",$G)});IG.addListener("ready",function(){if(PG(IG)){if(!IG.ui){return}VG=MG.getClientRect;TG=IG.ui.getDom("toolbarbox");UG=VG(TG).top;RG=TG.style.cssText;SG.style.height=TG.offsetHeight+"px";if(NG){QG()}domUtils.on(window,["scroll","resize"],ZG);IG.addListener("keydown",$G);IG.addListener("beforefullscreenchange",function(fH,gH){if(gH){YG()}});IG.addListener("fullscreenchanged",function(hH,iH){if(!iH){ZG()}});IG.addListener("sourcemodechanged",function(jH,kH){setTimeout(function(){ZG()},0)});IG.addListener("clearDoc",function(){setTimeout(function(){ZG()},0)})}})};UE.plugins["video"]=function(){var lH=this;function mH(oH,pH,qH,rH,sH,tH,uH){oH=utils.unhtmlForUrl(oH);sH=utils.unhtml(sH);tH=utils.unhtml(tH);pH=parseInt(pH,10)||0;qH=parseInt(qH,10)||0;var vH;switch(uH){case"image":vH="<img "+(rH?'id="'+rH+'"':"")+' width="'+pH+'" height="'+qH+'" _url="'+oH+'" class="'+tH.replace(/\bvideo-js\b/,"")+'"'+' src="'+lH.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+lH.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(sH?"float:"+sH+";":"")+'" />';break;case"embed":case"video":var wH=oH.substr(oH.lastIndexOf(".")+1);if(wH=="ogv")wH="ogg";vH="<video"+(rH?' id="'+rH+'"':"")+' class="'+tH+' video-js" '+(sH?' style="float:'+sH+'"':"")+' controls preload="none" width="'+pH+'" height="'+qH+'" src="'+oH+'" data-setup="{}">'+"</video>";break}return vH}function nH(xH,yH){utils.each(xH.getNodesByTagName(yH?"img":"embed video"),function(zH){var AH=zH.getAttr("class");if(AH&&AH.indexOf("edui-faked-video")!=-1){var BH=mH(yH?zH.getAttr("_url"):zH.getAttr("src"),zH.getAttr("width"),zH.getAttr("height"),null,zH.getStyle("float")||"",AH,yH?"embed":"image");zH.parentNode.replaceChild(UE.uNode.createElement(BH),zH)}if(AH&&AH.indexOf("edui-upload-video")!=-1){var BH=mH(yH?zH.getAttr("_url"):zH.getAttr("src"),zH.getAttr("width"),zH.getAttr("height"),null,zH.getStyle("float")||"",AH,yH?"video":"image");zH.parentNode.replaceChild(UE.uNode.createElement(BH),zH)}})}lH.addOutputRule(function(CH){nH(CH,true)});lH.addInputRule(function(DH){nH(DH)});lH.commands["insertvideo"]={execCommand:function(EH,FH,GH){FH=utils.isArray(FH)?FH:[FH];var HH=[],IH="tmpVedio",JH;for(var KH=0,LH,MH=FH.length;KH<MH;KH++){LH=FH[KH];JH=GH=="upload"?"edui-upload-video video-js vjs-default-skin":"edui-faked-video";HH.push(mH(LH.url,LH.width||420,LH.height||280,IH+KH,null,JH,"image"))}lH.execCommand("inserthtml",HH.join(""),true);var NH=this.selection.getRange();for(var KH=0,MH=FH.length;KH<MH;KH++){var OH=this.document.getElementById("tmpVedio"+KH);domUtils.removeAttributes(OH,"id");NH.selectNode(OH).select();lH.execCommand("imagefloat",FH[KH].align)}},queryCommandState:function(){var PH=lH.selection.getRange().getClosedNode(),QH=PH&&(PH.className=="edui-faked-video"||PH.className.indexOf("edui-upload-video")!=-1);return QH?1:0}}};(function(){var RH=UE.UETable=function(TH){this.table=TH;this.indexTable=[];this.selectedTds=[];this.cellsRange={};this.update(TH)};RH.removeSelectedClass=function(UH){utils.each(UH,function(VH){domUtils.removeClasses(VH,"selectTdClass")})};RH.addSelectedClass=function(WH){utils.each(WH,function(XH){domUtils.addClass(XH,"selectTdClass")})};RH.isEmptyBlock=function(YH){var ZH=new RegExp(domUtils.fillChar,"g");if(YH[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(ZH,"").length>0){return 0}for(var $H in dtd.$isNotEmpty)if(dtd.$isNotEmpty.hasOwnProperty($H)){if(YH.getElementsByTagName($H).length){return 0}}return 1};RH.getWidth=function(_H){if(!_H)return 0;return parseInt(domUtils.getComputedStyle(_H,"width"),10)};RH.getTableCellAlignState=function(aI){!utils.isArray(aI)&&(aI=[aI]);var bI={},cI=["align","valign"],dI=null,eI=true;utils.each(aI,function(fI){utils.each(cI,function(gI){dI=fI.getAttribute(gI);if(!bI[gI]&&dI){bI[gI]=dI}else if(!bI[gI]||dI!==bI[gI]){eI=false;return false}});return eI});return eI?bI:null};RH.getTableItemsByRange=function(hI){var iI=hI.selection.getStart();if(iI&&iI.id&&iI.id.indexOf("_baidu_bookmark_start_")===0&&iI.nextSibling){iI=iI.nextSibling}var jI=iI&&domUtils.findParentByTagName(iI,["td","th"],true),kI=jI&&jI.parentNode,lI=iI&&domUtils.findParentByTagName(iI,"caption",true),mI=lI?lI.parentNode:kI&&kI.parentNode.parentNode;return{cell:jI,tr:kI,table:mI,caption:lI}};RH.getUETableBySelected=function(nI){var oI=RH.getTableItemsByRange(nI).table;if(oI&&oI.ueTable&&oI.ueTable.selectedTds.length){return oI.ueTable}return null};RH.getDefaultValue=function(pI,qI){var rI={thin:"0px",medium:"1px",thick:"2px"},sI,tI,uI,vI;if(!qI){qI=pI.document.createElement("table");qI.insertRow(0).insertCell(0).innerHTML="xxx";pI.body.appendChild(qI);var wI=qI.getElementsByTagName("td")[0];vI=domUtils.getComputedStyle(qI,"border-left-width");sI=parseInt(rI[vI]||vI,10);vI=domUtils.getComputedStyle(wI,"padding-left");tI=parseInt(rI[vI]||vI,10);vI=domUtils.getComputedStyle(wI,"border-left-width");uI=parseInt(rI[vI]||vI,10);domUtils.remove(qI);return{tableBorder:sI,tdPadding:tI,tdBorder:uI}}else{wI=qI.getElementsByTagName("td")[0];vI=domUtils.getComputedStyle(qI,"border-left-width");sI=parseInt(rI[vI]||vI,10);vI=domUtils.getComputedStyle(wI,"padding-left");tI=parseInt(rI[vI]||vI,10);vI=domUtils.getComputedStyle(wI,"border-left-width");uI=parseInt(rI[vI]||vI,10);return{tableBorder:sI,tdPadding:tI,tdBorder:uI}}};RH.getUETable=function(xI){var yI=xI.tagName.toLowerCase();xI=yI=="td"||yI=="th"||yI=="caption"?domUtils.findParentByTagName(xI,"table",true):xI;if(!xI.ueTable){xI.ueTable=new RH(xI)}return xI.ueTable};RH.cloneCell=function(zI,AI,BI){if(!zI||utils.isString(zI)){return this.table.ownerDocument.createElement(zI||"td")}var CI=domUtils.hasClass(zI,"selectTdClass");CI&&domUtils.removeClasses(zI,"selectTdClass");var DI=zI.cloneNode(true);if(AI){DI.rowSpan=DI.colSpan=1}!BI&&domUtils.removeAttributes(DI,"width height");!BI&&domUtils.removeAttributes(DI,"style");DI.style.borderLeftStyle="";DI.style.borderTopStyle="";DI.style.borderLeftColor=zI.style.borderRightColor;DI.style.borderLeftWidth=zI.style.borderRightWidth;DI.style.borderTopColor=zI.style.borderBottomColor;DI.style.borderTopWidth=zI.style.borderBottomWidth;CI&&domUtils.addClass(zI,"selectTdClass");return DI};RH.prototype={getMaxRows:function(){var EI=this.table.rows,FI=1;for(var GI=0,HI;HI=EI[GI];GI++){var II=1;for(var JI=0,KI;KI=HI.cells[JI++];){II=Math.max(KI.rowSpan||1,II)}FI=Math.max(II+GI,FI)}return FI},getMaxCols:function(){var LI=this.table.rows,MI=0,NI={};for(var OI=0,PI;PI=LI[OI];OI++){var QI=0;for(var RI=0,SI;SI=PI.cells[RI++];){QI+=SI.colSpan||1;if(SI.rowSpan&&SI.rowSpan>1){for(var TI=1;TI<SI.rowSpan;TI++){if(!NI["row_"+(OI+TI)]){NI["row_"+(OI+TI)]=SI.colSpan||1}else{NI["row_"+(OI+TI)]++}}}}QI+=NI["row_"+OI]||0;MI=Math.max(QI,MI)}return MI},getCellColIndex:function(UI){},getHSideCell:function(VI,WI){try{var XI=this.getCellInfo(VI),YI,ZI;var $I=this.selectedTds.length,_I=this.cellsRange;if(!WI&&(!$I?!XI.colIndex:!_I.beginColIndex)||WI&&(!$I?XI.colIndex==this.colsNum-1:_I.endColIndex==this.colsNum-1))return null;YI=!$I?XI.rowIndex:_I.beginRowIndex;ZI=!WI?!$I?XI.colIndex<1?0:XI.colIndex-1:_I.beginColIndex-1:!$I?XI.colIndex+1:_I.endColIndex+1;return this.getCell(this.indexTable[YI][ZI].rowIndex,this.indexTable[YI][ZI].cellIndex)}catch(aJ){SH(aJ)}},getTabNextCell:function(bJ,cJ){var dJ=this.getCellInfo(bJ),eJ=cJ||dJ.rowIndex,fJ=dJ.colIndex+1+(dJ.colSpan-1),gJ;try{gJ=this.getCell(this.indexTable[eJ][fJ].rowIndex,this.indexTable[eJ][fJ].cellIndex)}catch(hJ){try{eJ=eJ*1+1;fJ=0;gJ=this.getCell(this.indexTable[eJ][fJ].rowIndex,this.indexTable[eJ][fJ].cellIndex)}catch(iJ){}}return gJ},getVSideCell:function(jJ,kJ,lJ){try{var mJ=this.getCellInfo(jJ),nJ,oJ;var pJ=this.selectedTds.length&&!lJ,qJ=this.cellsRange;if(!kJ&&mJ.rowIndex==0||kJ&&(!pJ?mJ.rowIndex+mJ.rowSpan>this.rowsNum-1:qJ.endRowIndex==this.rowsNum-1))return null;nJ=!kJ?!pJ?mJ.rowIndex-1:qJ.beginRowIndex-1:!pJ?mJ.rowIndex+mJ.rowSpan:qJ.endRowIndex+1;oJ=!pJ?mJ.colIndex:qJ.beginColIndex;return this.getCell(this.indexTable[nJ][oJ].rowIndex,this.indexTable[nJ][oJ].cellIndex)}catch(rJ){SH(rJ)}},getSameEndPosCells:function(sJ,tJ){try{var uJ=tJ.toLowerCase()==="x",vJ=domUtils.getXY(sJ)[uJ?"x":"y"]+sJ["offset"+(uJ?"Width":"Height")],wJ=this.table.rows,xJ=null,yJ=[];for(var zJ=0;zJ<this.rowsNum;zJ++){xJ=wJ[zJ].cells;for(var AJ=0,BJ;BJ=xJ[AJ++];){var CJ=domUtils.getXY(BJ)[uJ?"x":"y"]+BJ["offset"+(uJ?"Width":"Height")];if(CJ>vJ&&uJ)break;if(sJ==BJ||vJ==CJ){if(BJ[uJ?"colSpan":"rowSpan"]==1){yJ.push(BJ)}if(uJ)break}}}return yJ}catch(DJ){SH(DJ)}},setCellContent:function(EJ,FJ){EJ.innerHTML=FJ||(browser.ie?domUtils.fillChar:"<br />")},cloneCell:RH.cloneCell,getSameStartPosXCells:function(GJ){try{var HJ=domUtils.getXY(GJ).x+GJ.offsetWidth,IJ=this.table.rows,JJ,KJ=[];for(var LJ=0;LJ<this.rowsNum;LJ++){JJ=IJ[LJ].cells;for(var MJ=0,NJ;NJ=JJ[MJ++];){var OJ=domUtils.getXY(NJ).x;if(OJ>HJ)break;if(OJ==HJ&&NJ.colSpan==1){KJ.push(NJ);break}}}return KJ}catch(PJ){SH(PJ)}},update:function(QJ){this.table=QJ||this.table;this.selectedTds=[];this.cellsRange={};this.indexTable=[];var RJ=this.table.rows,SJ=this.getMaxRows(),TJ=SJ-RJ.length,UJ=this.getMaxCols();while(TJ--){this.table.insertRow(RJ.length)}this.rowsNum=SJ;this.colsNum=UJ;for(var VJ=0,WJ=RJ.length;VJ<WJ;VJ++){this.indexTable[VJ]=new Array(UJ)}for(var XJ=0,YJ;YJ=RJ[XJ];XJ++){for(var ZJ=0,$J,_J=YJ.cells;$J=_J[ZJ];ZJ++){if($J.rowSpan>SJ){$J.rowSpan=SJ}var aK=ZJ,bK=$J.rowSpan||1,cK=$J.colSpan||1;while(this.indexTable[XJ][aK])aK++;for(var dK=0;dK<bK;dK++){for(var eK=0;eK<cK;eK++){this.indexTable[XJ+dK][aK+eK]={rowIndex:XJ,cellIndex:ZJ,colIndex:aK,rowSpan:bK,colSpan:cK}}}}}for(dK=0;dK<SJ;dK++){for(eK=0;eK<UJ;eK++){if(this.indexTable[dK][eK]===undefined){YJ=RJ[dK];$J=YJ.cells[YJ.cells.length-1];$J=$J?$J.cloneNode(true):this.table.ownerDocument.createElement("td");this.setCellContent($J);if($J.colSpan!==1)$J.colSpan=1;if($J.rowSpan!==1)$J.rowSpan=1;YJ.appendChild($J);this.indexTable[dK][eK]={rowIndex:dK,cellIndex:$J.cellIndex,colIndex:eK,rowSpan:1,colSpan:1}}}}var fK=domUtils.getElementsByTagName(this.table,"td"),gK=[];utils.each(fK,function(lK){if(domUtils.hasClass(lK,"selectTdClass")){gK.push(lK)}});if(gK.length){var hK=gK[0],iK=gK[gK.length-1],jK=this.getCellInfo(hK),kK=this.getCellInfo(iK);this.selectedTds=gK;this.cellsRange={beginRowIndex:jK.rowIndex,beginColIndex:jK.colIndex,endRowIndex:kK.rowIndex+kK.rowSpan-1,endColIndex:kK.colIndex+kK.colSpan-1}}if(!domUtils.hasClass(this.table.rows[0],"firstRow")){domUtils.addClass(this.table.rows[0],"firstRow");for(var VJ=1;VJ<this.table.rows.length;VJ++){domUtils.removeClasses(this.table.rows[VJ],"firstRow")}}},getCellInfo:function(mK){if(!mK)return;var nK=mK.cellIndex,oK=mK.parentNode.rowIndex,pK=this.indexTable[oK],qK=this.colsNum;for(var rK=nK;rK<qK;rK++){var sK=pK[rK];if(sK.rowIndex===oK&&sK.cellIndex===nK){return sK}}},getCell:function(tK,uK){return tK<this.rowsNum&&this.table.rows[tK].cells[uK]||null},deleteCell:function(vK,wK){wK=typeof wK=="number"?wK:vK.parentNode.rowIndex;var xK=this.table.rows[wK];xK.deleteCell(vK.cellIndex)},getCellsRange:function(yK,zK){function AK(IK,JK,KK,LK){var MK=IK,NK=JK,OK=KK,PK=LK,QK,RK,SK;if(IK>0){for(RK=JK;RK<LK;RK++){QK=BK.indexTable[IK][RK];SK=QK.rowIndex;if(SK<IK){MK=Math.min(SK,MK)}}}if(LK<BK.colsNum){for(SK=IK;SK<KK;SK++){QK=BK.indexTable[SK][LK];RK=QK.colIndex+QK.colSpan-1;if(RK>LK){PK=Math.max(RK,PK)}}}if(KK<BK.rowsNum){for(RK=JK;RK<LK;RK++){QK=BK.indexTable[KK][RK];SK=QK.rowIndex+QK.rowSpan-1;if(SK>KK){OK=Math.max(SK,OK)}}}if(JK>0){for(SK=IK;SK<KK;SK++){QK=BK.indexTable[SK][JK];RK=QK.colIndex;if(RK<JK){NK=Math.min(QK.colIndex,NK)}}}if(MK!=IK||NK!=JK||OK!=KK||PK!=LK){return AK(MK,NK,OK,PK)}else{return{beginRowIndex:IK,beginColIndex:JK,endRowIndex:KK,endColIndex:LK}}}try{var BK=this,CK=BK.getCellInfo(yK);if(yK===zK){return{beginRowIndex:CK.rowIndex,beginColIndex:CK.colIndex,endRowIndex:CK.rowIndex+CK.rowSpan-1,endColIndex:CK.colIndex+CK.colSpan-1}}var DK=BK.getCellInfo(zK);var EK=Math.min(CK.rowIndex,DK.rowIndex),FK=Math.min(CK.colIndex,DK.colIndex),GK=Math.max(CK.rowIndex+CK.rowSpan-1,DK.rowIndex+DK.rowSpan-1),HK=Math.max(CK.colIndex+CK.colSpan-1,DK.colIndex+DK.colSpan-1);return AK(EK,FK,GK,HK)}catch(TK){}},getCells:function(UK){this.clearSelected();var VK=UK.beginRowIndex,WK=UK.beginColIndex,XK=UK.endRowIndex,YK=UK.endColIndex,ZK,$K,_K,aL={},bL=[];for(var cL=VK;cL<=XK;cL++){for(var dL=WK;dL<=YK;dL++){ZK=this.indexTable[cL][dL];$K=ZK.rowIndex;_K=ZK.colIndex;var eL=$K+"|"+_K;if(aL[eL])continue;aL[eL]=1;if($K<cL||_K<dL||$K+ZK.rowSpan-1>XK||_K+ZK.colSpan-1>YK){return null}bL.push(this.getCell($K,ZK.cellIndex))}}return bL},clearSelected:function(){RH.removeSelectedClass(this.selectedTds);this.selectedTds=[];this.cellsRange={}},setSelected:function(fL){var gL=this.getCells(fL);RH.addSelectedClass(gL);this.selectedTds=gL;this.cellsRange=fL},isFullRow:function(){var hL=this.cellsRange;return hL.endColIndex-hL.beginColIndex+1==this.colsNum},isFullCol:function(){var iL=this.cellsRange,jL=this.table,kL=jL.getElementsByTagName("th"),lL=iL.endRowIndex-iL.beginRowIndex+1;return!kL.length?lL==this.rowsNum:lL==this.rowsNum||lL==this.rowsNum-1},getNextCell:function(mL,nL,oL){try{var pL=this.getCellInfo(mL),qL,rL;var sL=this.selectedTds.length&&!oL,tL=this.cellsRange;if(!nL&&pL.rowIndex==0||nL&&(!sL?pL.rowIndex+pL.rowSpan>this.rowsNum-1:tL.endRowIndex==this.rowsNum-1))return null;qL=!nL?!sL?pL.rowIndex-1:tL.beginRowIndex-1:!sL?pL.rowIndex+pL.rowSpan:tL.endRowIndex+1;rL=!sL?pL.colIndex:tL.beginColIndex;return this.getCell(this.indexTable[qL][rL].rowIndex,this.indexTable[qL][rL].cellIndex)}catch(uL){SH(uL)}},getPreviewCell:function(vL,wL){try{var xL=this.getCellInfo(vL),yL,zL;var AL=this.selectedTds.length,BL=this.cellsRange;if(!wL&&(!AL?!xL.colIndex:!BL.beginColIndex)||wL&&(!AL?xL.rowIndex>this.colsNum-1:BL.endColIndex==this.colsNum-1))return null;yL=!wL?!AL?xL.rowIndex:BL.beginRowIndex:!AL?xL.rowIndex<1?0:xL.rowIndex-1:BL.beginRowIndex;zL=!wL?!AL?xL.colIndex<1?0:xL.colIndex-1:BL.beginColIndex-1:!AL?xL.colIndex:BL.endColIndex+1;return this.getCell(this.indexTable[yL][zL].rowIndex,this.indexTable[yL][zL].cellIndex)}catch(CL){SH(CL)}},moveContent:function(DL,EL){if(RH.isEmptyBlock(EL))return;if(RH.isEmptyBlock(DL)){DL.innerHTML=EL.innerHTML;return}var FL=DL.lastChild;if(FL.nodeType==3||!dtd.$block[FL.tagName]){DL.appendChild(DL.ownerDocument.createElement("br"))}while(FL=EL.firstChild){DL.appendChild(FL)}},mergeRight:function(GL){var HL=this.getCellInfo(GL),IL=HL.colIndex+HL.colSpan,JL=this.indexTable[HL.rowIndex][IL],KL=this.getCell(JL.rowIndex,JL.cellIndex);GL.colSpan=HL.colSpan+JL.colSpan;GL.removeAttribute("width");this.moveContent(GL,KL);this.deleteCell(KL,JL.rowIndex);this.update()},mergeDown:function(LL){var ML=this.getCellInfo(LL),NL=ML.rowIndex+ML.rowSpan,OL=this.indexTable[NL][ML.colIndex],PL=this.getCell(OL.rowIndex,OL.cellIndex);LL.rowSpan=ML.rowSpan+OL.rowSpan;LL.removeAttribute("height");this.moveContent(LL,PL);this.deleteCell(PL,OL.rowIndex);this.update()},mergeRange:function(){var QL=this.cellsRange,RL=this.getCell(QL.beginRowIndex,this.indexTable[QL.beginRowIndex][QL.beginColIndex].cellIndex);if(RL.tagName=="TH"&&QL.endRowIndex!==QL.beginRowIndex){var SL=this.indexTable,TL=this.getCellInfo(RL);RL=this.getCell(1,SL[1][TL.colIndex].cellIndex);QL=this.getCellsRange(RL,this.getCell(SL[this.rowsNum-1][TL.colIndex].rowIndex,SL[this.rowsNum-1][TL.colIndex].cellIndex))}var UL=this.getCells(QL);for(var VL=0,WL;WL=UL[VL++];){if(WL!==RL){this.moveContent(RL,WL);this.deleteCell(WL)}}RL.rowSpan=QL.endRowIndex-QL.beginRowIndex+1;RL.rowSpan>1&&RL.removeAttribute("height");RL.colSpan=QL.endColIndex-QL.beginColIndex+1;RL.colSpan>1&&RL.removeAttribute("width");if(RL.rowSpan==this.rowsNum&&RL.colSpan!=1){RL.colSpan=1}if(RL.colSpan==this.colsNum&&RL.rowSpan!=1){var XL=RL.parentNode.rowIndex;if(this.table.deleteRow){for(var VL=XL+1,YL=XL+1,ZL=RL.rowSpan;VL<ZL;VL++){this.table.deleteRow(YL)}}else{for(var VL=0,ZL=RL.rowSpan-1;VL<ZL;VL++){var $L=this.table.rows[XL+1];$L.parentNode.removeChild($L)}}RL.rowSpan=1}this.update()},insertRow:function(_L,aM){var bM=this.colsNum,cM=this.table,dM=cM.insertRow(_L),eM,fM=typeof aM=="string"&&aM.toUpperCase()=="TH";function gM(lM,mM,nM){if(lM==0){var oM=nM.nextSibling||nM.previousSibling,pM=oM.cells[lM];if(pM.tagName=="TH"){pM=mM.ownerDocument.createElement("th");pM.appendChild(mM.firstChild);nM.insertBefore(pM,mM);domUtils.remove(mM)}}else{if(mM.tagName=="TH"){var qM=mM.ownerDocument.createElement("td");qM.appendChild(mM.firstChild);nM.insertBefore(qM,mM);domUtils.remove(mM)}}}if(_L==0||_L==this.rowsNum){for(var hM=0;hM<bM;hM++){eM=this.cloneCell(aM,true);this.setCellContent(eM);eM.getAttribute("vAlign")&&eM.setAttribute("vAlign",eM.getAttribute("vAlign"));dM.appendChild(eM);if(!fM)gM(hM,eM,dM)}}else{var iM=this.indexTable[_L],jM=0;for(hM=0;hM<bM;hM++){var kM=iM[hM];if(kM.rowIndex<_L){eM=this.getCell(kM.rowIndex,kM.cellIndex);eM.rowSpan=kM.rowSpan+1}else{eM=this.cloneCell(aM,true);this.setCellContent(eM);dM.appendChild(eM)}if(!fM)gM(hM,eM,dM)}}this.update();return dM},deleteRow:function(rM){var sM=this.table.rows[rM],tM=this.indexTable[rM],uM=this.colsNum,vM=0;for(var wM=0;wM<uM;){var xM=tM[wM],yM=this.getCell(xM.rowIndex,xM.cellIndex);if(yM.rowSpan>1){if(xM.rowIndex==rM){var zM=yM.cloneNode(true);zM.rowSpan=yM.rowSpan-1;zM.innerHTML="";yM.rowSpan=1;var AM=rM+1,BM=this.table.rows[AM],CM,DM=this.getPreviewMergedCellsNum(AM,wM)-vM;if(DM<wM){CM=wM-DM-1;domUtils.insertAfter(BM.cells[CM],zM)}else{if(BM.cells.length)BM.insertBefore(zM,BM.cells[0])}vM+=1}}wM+=yM.colSpan||1}var EM=[],FM={};for(wM=0;wM<uM;wM++){var GM=tM[wM].rowIndex,HM=tM[wM].cellIndex,IM=GM+"_"+HM;if(FM[IM])continue;FM[IM]=1;yM=this.getCell(GM,HM);EM.push(yM)}var JM=[];utils.each(EM,function(KM){if(KM.rowSpan==1){KM.parentNode.removeChild(KM)}else{JM.push(KM)}});utils.each(JM,function(LM){LM.rowSpan--});sM.parentNode.removeChild(sM);this.update()},insertCol:function(MM,NM,OM){var PM=this.rowsNum,QM=0,RM,SM,TM=parseInt((this.table.offsetWidth-(this.colsNum+1)*20-(this.colsNum+1))/(this.colsNum+1),10),UM=typeof NM=="string"&&NM.toUpperCase()=="TH";function VM(YM,ZM,$M){if(YM==0){var _M=ZM.nextSibling||ZM.previousSibling;if(_M.tagName=="TH"){_M=ZM.ownerDocument.createElement("th");_M.appendChild(ZM.firstChild);$M.insertBefore(_M,ZM);domUtils.remove(ZM)}}else{if(ZM.tagName=="TH"){var aN=ZM.ownerDocument.createElement("td");aN.appendChild(ZM.firstChild);$M.insertBefore(aN,ZM);domUtils.remove(ZM)}}}var WM;if(MM==0||MM==this.colsNum){for(;QM<PM;QM++){RM=this.table.rows[QM];WM=RM.cells[MM==0?MM:RM.cells.length];SM=this.cloneCell(NM,true);this.setCellContent(SM);SM.setAttribute("vAlign",SM.getAttribute("vAlign"));WM&&SM.setAttribute("width",WM.getAttribute("width"));if(!MM){RM.insertBefore(SM,RM.cells[0])}else{domUtils.insertAfter(RM.cells[RM.cells.length-1],SM)}if(!UM)VM(QM,SM,RM)}}else{for(;QM<PM;QM++){var XM=this.indexTable[QM][MM];if(XM.colIndex<MM){SM=this.getCell(XM.rowIndex,XM.cellIndex);SM.colSpan=XM.colSpan+1}else{RM=this.table.rows[QM];WM=RM.cells[XM.cellIndex];SM=this.cloneCell(NM,true);this.setCellContent(SM);SM.setAttribute("vAlign",SM.getAttribute("vAlign"));WM&&SM.setAttribute("width",WM.getAttribute("width"));WM?RM.insertBefore(SM,WM):RM.appendChild(SM)}if(!UM)VM(QM,SM,RM)}}this.update();this.updateWidth(TM,OM||{tdPadding:10,tdBorder:1})},updateWidth:function(bN,cN){var dN=this.table,eN=RH.getWidth(dN)-cN.tdPadding*2-cN.tdBorder+bN;if(eN<dN.ownerDocument.body.offsetWidth){dN.setAttribute("width",eN);return}var fN=domUtils.getElementsByTagName(this.table,"td th");utils.each(fN,function(gN){gN.setAttribute("width",bN)})},deleteCol:function(hN){var iN=this.indexTable,jN=this.table.rows,kN=this.table.getAttribute("width"),lN=0,mN=this.rowsNum,nN={};for(var oN=0;oN<mN;){var qN=iN[oN],rN=qN[hN],sN=rN.rowIndex+"_"+rN.colIndex;if(nN[sN])continue;nN[sN]=1;var tN=this.getCell(rN.rowIndex,rN.cellIndex);if(!lN)lN=tN&&parseInt(tN.offsetWidth/tN.colSpan,10).toFixed(0);if(tN.colSpan>1){tN.colSpan--}else{jN[oN].deleteCell(rN.cellIndex)}oN+=rN.rowSpan||1}this.table.setAttribute("width",kN-lN);this.update()},splitToCells:function(uN){var vN=this,wN=this.splitToRows(uN);utils.each(wN,function(xN){vN.splitToCols(xN)})},splitToRows:function(yN){var zN=this.getCellInfo(yN),AN=zN.rowIndex,BN=zN.colIndex,CN=[];yN.rowSpan=1;CN.push(yN);for(var DN=AN,EN=AN+zN.rowSpan;DN<EN;DN++){if(DN==AN)continue;var FN=this.table.rows[DN],GN=FN.insertCell(BN-this.getPreviewMergedCellsNum(DN,BN));GN.colSpan=zN.colSpan;this.setCellContent(GN);GN.setAttribute("vAlign",yN.getAttribute("vAlign"));GN.setAttribute("align",yN.getAttribute("align"));if(yN.style.cssText){GN.style.cssText=yN.style.cssText}CN.push(GN)}this.update();return CN},getPreviewMergedCellsNum:function(HN,IN){var JN=this.indexTable[HN],KN=0;for(var LN=0;LN<IN;){var MN=JN[LN].colSpan,NN=JN[LN].rowIndex;KN+=MN-(NN==HN?1:0);LN+=MN}return KN},splitToCols:function(ON){var PN=(ON.offsetWidth/ON.colSpan-22).toFixed(0),QN=this.getCellInfo(ON),RN=QN.rowIndex,SN=QN.colIndex,TN=[];ON.colSpan=1;ON.setAttribute("width",PN);TN.push(ON);for(var UN=SN,VN=SN+QN.colSpan;UN<VN;UN++){if(UN==SN)continue;var WN=this.table.rows[RN],XN=WN.insertCell(this.indexTable[RN][UN].cellIndex+1);XN.rowSpan=QN.rowSpan;this.setCellContent(XN);XN.setAttribute("vAlign",ON.getAttribute("vAlign"));XN.setAttribute("align",ON.getAttribute("align"));XN.setAttribute("width",PN);if(ON.style.cssText){XN.style.cssText=ON.style.cssText}if(ON.tagName=="TH"){var YN=ON.ownerDocument.createElement("th");YN.appendChild(XN.firstChild);YN.setAttribute("vAlign",ON.getAttribute("vAlign"));YN.rowSpan=XN.rowSpan;WN.insertBefore(YN,XN);domUtils.remove(XN)}TN.push(XN)}this.update();return TN},isLastCell:function(ZN,$N,_N){$N=$N||this.rowsNum;_N=_N||this.colsNum;var aO=this.getCellInfo(ZN);return aO.rowIndex+aO.rowSpan==$N&&aO.colIndex+aO.colSpan==_N},getLastCell:function(bO){bO=bO||this.table.getElementsByTagName("td");var cO=this.getCellInfo(bO[0]);var dO=this,eO=bO[0],fO=eO.parentNode,gO=0,hO=0,iO;utils.each(bO,function(jO){if(jO.parentNode==fO)hO+=jO.colSpan||1;gO+=jO.rowSpan*jO.colSpan||1});iO=gO/hO;utils.each(bO,function(kO){if(dO.isLastCell(kO,iO,hO)){eO=kO;return false}});return eO},selectRow:function(lO){var mO=this.indexTable[lO],nO=this.getCell(mO[0].rowIndex,mO[0].cellIndex),oO=this.getCell(mO[this.colsNum-1].rowIndex,mO[this.colsNum-1].cellIndex),pO=this.getCellsRange(nO,oO);this.setSelected(pO)},selectTable:function(){var qO=this.table.getElementsByTagName("td"),rO=this.getCellsRange(qO[0],qO[qO.length-1]);this.setSelected(rO)},setBackground:function(sO,tO){if(typeof tO==="string"){utils.each(sO,function(BO){BO.style.backgroundColor=tO})}else if(typeof tO==="object"){tO=utils.extend({repeat:true,colorList:["#ddd","#fff"]},tO);var uO=this.getCellInfo(sO[0]).rowIndex,vO=0,wO=tO.colorList,xO=function(CO,DO,EO){return CO[DO]?CO[DO]:EO?CO[DO%CO.length]:""};for(var yO=0,zO;zO=sO[yO++];){var AO=this.getCellInfo(zO);zO.style.backgroundColor=xO(wO,uO+vO==AO.rowIndex?vO:++vO,tO.repeat)}}},removeBackground:function(FO){utils.each(FO,function(GO){GO.style.backgroundColor=""})}};function SH(HO){}})();(function(){var IO=UE.UETable,JO=function(QO){return IO.getTableItemsByRange(QO)},KO=function(RO){return IO.getUETableBySelected(RO)},LO=function(SO,TO){return IO.getDefaultValue(SO,TO)},MO=function(UO){return IO.getUETable(UO)};UE.commands["inserttable"]={queryCommandState:function(){return JO(this).table?-1:0},execCommand:function(VO,WO){function XO(dP,eP){var fP=[],gP=dP.numRows,hP=dP.numCols;for(var iP=0;iP<gP;iP++){fP.push("<tr"+(iP==0?' class="firstRow"':"")+">");for(var jP=0;jP<hP;jP++){fP.push('<td width="'+eP+'"  vAlign="'+dP.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"</td>")}fP.push("</tr>")}return"<table><tbody>"+fP.join("")+"</tbody></table>"}if(!WO){WO=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign})}var YO=this;var ZO=this.selection.getRange(),$O=ZO.startContainer,_O=domUtils.findParent($O,function(kP){return domUtils.isBlockElm(kP)},true)||YO.body;var aP=LO(YO),bP=_O.offsetWidth,cP=Math.floor(bP/WO.numCols-aP.tdPadding*2-aP.tdBorder);!WO.tdvalign&&(WO.tdvalign=YO.options.tdvalign);YO.execCommand("inserthtml",XO(WO,cP))}};UE.commands["insertparagraphbeforetable"]={queryCommandState:function(){return JO(this).cell?0:-1},execCommand:function(){var lP=JO(this).table;if(lP){var mP=this.document.createElement("p");mP.innerHTML=browser.ie?"&nbsp;":"<br />";lP.parentNode.insertBefore(mP,lP);this.selection.getRange().setStart(mP,0).setCursor()}}};UE.commands["deletetable"]={queryCommandState:function(){var nP=this.selection.getRange();return domUtils.findParentByTagName(nP.startContainer,"table",true)?0:-1},execCommand:function(oP,pP){var qP=this.selection.getRange();pP=pP||domUtils.findParentByTagName(qP.startContainer,"table",true);if(pP){var rP=pP.nextSibling;if(!rP){rP=domUtils.createElement(this.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});pP.parentNode.insertBefore(rP,pP)}domUtils.remove(pP);qP=this.selection.getRange();if(rP.nodeType==3){qP.setStartBefore(rP)}else{qP.setStart(rP,0)}qP.setCursor(false,true);this.fireEvent("tablehasdeleted")}}};UE.commands["cellalign"]={queryCommandState:function(){return PO(this).length?0:-1},execCommand:function(sP,tP){var uP=PO(this);if(uP.length){for(var vP=0,wP;wP=uP[vP++];){wP.setAttribute("align",tP)}}}};UE.commands["cellvalign"]={queryCommandState:function(){return PO(this).length?0:-1},execCommand:function(xP,yP){var zP=PO(this);if(zP.length){for(var AP=0,BP;BP=zP[AP++];){BP.setAttribute("vAlign",yP)}}}};UE.commands["insertcaption"]={queryCommandState:function(){var CP=JO(this).table;if(CP){return CP.getElementsByTagName("caption").length==0?1:-1}return-1},execCommand:function(){var DP=JO(this).table;if(DP){var EP=this.document.createElement("caption");EP.innerHTML=browser.ie?domUtils.fillChar:"<br/>";DP.insertBefore(EP,DP.firstChild);var FP=this.selection.getRange();FP.setStart(EP,0).setCursor()}}};UE.commands["deletecaption"]={queryCommandState:function(){var GP=this.selection.getRange(),HP=domUtils.findParentByTagName(GP.startContainer,"table");if(HP){return HP.getElementsByTagName("caption").length==0?-1:1}return-1},execCommand:function(){var IP=this.selection.getRange(),JP=domUtils.findParentByTagName(IP.startContainer,"table");if(JP){domUtils.remove(JP.getElementsByTagName("caption")[0]);var KP=this.selection.getRange();KP.setStart(JP.rows[0].cells[0],0).setCursor()}}};UE.commands["inserttitle"]={queryCommandState:function(){var LP=JO(this).table;if(LP){var MP=LP.rows[0];return MP.cells[MP.cells.length-1].tagName.toLowerCase()!="th"?0:-1}return-1},execCommand:function(){var NP=JO(this).table;if(NP){MO(NP).insertRow(0,"th")}var OP=NP.getElementsByTagName("th")[0];this.selection.getRange().setStart(OP,0).setCursor(false,true)}};UE.commands["deletetitle"]={queryCommandState:function(){var PP=JO(this).table;if(PP){var QP=PP.rows[0];return QP.cells[QP.cells.length-1].tagName.toLowerCase()=="th"?0:-1}return-1},execCommand:function(){var RP=JO(this).table;if(RP){domUtils.remove(RP.rows[0])}var SP=RP.getElementsByTagName("td")[0];this.selection.getRange().setStart(SP,0).setCursor(false,true)}};UE.commands["inserttitlecol"]={queryCommandState:function(){var TP=JO(this).table;if(TP){var UP=TP.rows[TP.rows.length-1];return UP.getElementsByTagName("th").length?-1:0}return-1},execCommand:function(VP){var WP=JO(this).table;if(WP){MO(WP).insertCol(0,"th")}NO(WP,this);var XP=WP.getElementsByTagName("th")[0];this.selection.getRange().setStart(XP,0).setCursor(false,true)}};UE.commands["deletetitlecol"]={queryCommandState:function(){var YP=JO(this).table;if(YP){var ZP=YP.rows[YP.rows.length-1];return ZP.getElementsByTagName("th").length?0:-1}return-1},execCommand:function(){var $P=JO(this).table;if($P){for(var _P=0;_P<$P.rows.length;_P++){domUtils.remove($P.rows[_P].children[0])}}NO($P,this);var aQ=$P.getElementsByTagName("td")[0];this.selection.getRange().setStart(aQ,0).setCursor(false,true)}};UE.commands["mergeright"]={queryCommandState:function(bQ){var cQ=JO(this),dQ=cQ.table,eQ=cQ.cell;if(!dQ||!eQ)return-1;var fQ=MO(dQ);if(fQ.selectedTds.length)return-1;var gQ=fQ.getCellInfo(eQ),hQ=gQ.colIndex+gQ.colSpan;if(hQ>=fQ.colsNum)return-1;var iQ=fQ.indexTable[gQ.rowIndex][hQ],jQ=dQ.rows[iQ.rowIndex].cells[iQ.cellIndex];if(!jQ||eQ.tagName!=jQ.tagName)return-1;return iQ.rowIndex==gQ.rowIndex&&iQ.rowSpan==gQ.rowSpan?0:-1},execCommand:function(kQ){var lQ=this.selection.getRange(),mQ=lQ.createBookmark(true);var nQ=JO(this).cell,oQ=MO(nQ);oQ.mergeRight(nQ);lQ.moveToBookmark(mQ).select()}};UE.commands["mergedown"]={queryCommandState:function(pQ){var qQ=JO(this),rQ=qQ.table,sQ=qQ.cell;if(!rQ||!sQ)return-1;var tQ=MO(rQ);if(tQ.selectedTds.length)return-1;var uQ=tQ.getCellInfo(sQ),vQ=uQ.rowIndex+uQ.rowSpan;if(vQ>=tQ.rowsNum)return-1;var wQ=tQ.indexTable[vQ][uQ.colIndex],xQ=rQ.rows[wQ.rowIndex].cells[wQ.cellIndex];if(!xQ||sQ.tagName!=xQ.tagName)return-1;return wQ.colIndex==uQ.colIndex&&wQ.colSpan==uQ.colSpan?0:-1},execCommand:function(){var yQ=this.selection.getRange(),zQ=yQ.createBookmark(true);var AQ=JO(this).cell,BQ=MO(AQ);BQ.mergeDown(AQ);yQ.moveToBookmark(zQ).select()}};UE.commands["mergecells"]={queryCommandState:function(){return KO(this)?0:-1},execCommand:function(){var CQ=KO(this);if(CQ&&CQ.selectedTds.length){var DQ=CQ.selectedTds[0];CQ.mergeRange();var EQ=this.selection.getRange();if(domUtils.isEmptyBlock(DQ)){EQ.setStart(DQ,0).collapse(true)}else{EQ.selectNodeContents(DQ)}EQ.select()}}};UE.commands["insertrow"]={queryCommandState:function(){var FQ=JO(this),GQ=FQ.cell;return GQ&&(GQ.tagName=="TD"||GQ.tagName=="TH"&&FQ.tr!==FQ.table.rows[0])&&MO(FQ.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var HQ=this.selection.getRange(),IQ=HQ.createBookmark(true);var JQ=JO(this),KQ=JQ.cell,LQ=JQ.table,MQ=MO(LQ),NQ=MQ.getCellInfo(KQ);if(!MQ.selectedTds.length){MQ.insertRow(NQ.rowIndex,KQ)}else{var OQ=MQ.cellsRange;for(var PQ=0,QQ=OQ.endRowIndex-OQ.beginRowIndex+1;PQ<QQ;PQ++){MQ.insertRow(OQ.beginRowIndex,KQ)}}HQ.moveToBookmark(IQ).select();if(LQ.getAttribute("interlaced")==="enabled")this.fireEvent("interlacetable",LQ)}};UE.commands["insertrownext"]={queryCommandState:function(){var RQ=JO(this),SQ=RQ.cell;return SQ&&SQ.tagName=="TD"&&MO(RQ.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var TQ=this.selection.getRange(),UQ=TQ.createBookmark(true);var VQ=JO(this),WQ=VQ.cell,XQ=VQ.table,YQ=MO(XQ),ZQ=YQ.getCellInfo(WQ);if(!YQ.selectedTds.length){YQ.insertRow(ZQ.rowIndex+ZQ.rowSpan,WQ)}else{var $Q=YQ.cellsRange;for(var _Q=0,aR=$Q.endRowIndex-$Q.beginRowIndex+1;_Q<aR;_Q++){YQ.insertRow($Q.endRowIndex+1,WQ)}}TQ.moveToBookmark(UQ).select();if(XQ.getAttribute("interlaced")==="enabled")this.fireEvent("interlacetable",XQ)}};UE.commands["deleterow"]={queryCommandState:function(){var bR=JO(this);return bR.cell?0:-1},execCommand:function(){var cR=JO(this).cell,dR=MO(cR),eR=dR.cellsRange,fR=dR.getCellInfo(cR),gR=dR.getVSideCell(cR),hR=dR.getVSideCell(cR,true),iR=this.selection.getRange();if(utils.isEmptyObject(eR)){dR.deleteRow(fR.rowIndex)}else{for(var jR=eR.beginRowIndex;jR<eR.endRowIndex+1;jR++){dR.deleteRow(eR.beginRowIndex)}}var kR=dR.table;if(!kR.getElementsByTagName("td").length){var lR=kR.nextSibling;domUtils.remove(kR);if(lR){iR.setStart(lR,0).setCursor(false,true)}}else{if(fR.rowSpan==1||fR.rowSpan==eR.endRowIndex-eR.beginRowIndex+1){if(hR||gR)iR.selectNodeContents(hR||gR).setCursor(false,true)}else{var mR=dR.getCell(fR.rowIndex,dR.indexTable[fR.rowIndex][fR.colIndex].cellIndex);if(mR)iR.selectNodeContents(mR).setCursor(false,true)}}if(kR.getAttribute("interlaced")==="enabled")this.fireEvent("interlacetable",kR)}};UE.commands["insertcol"]={queryCommandState:function(nR){var oR=JO(this),pR=oR.cell;return pR&&(pR.tagName=="TD"||pR.tagName=="TH"&&pR!==oR.tr.cells[0])&&MO(oR.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(qR){var rR=this.selection.getRange(),sR=rR.createBookmark(true);if(this.queryCommandState(qR)==-1)return;var tR=JO(this).cell,uR=MO(tR),vR=uR.getCellInfo(tR);if(!uR.selectedTds.length){uR.insertCol(vR.colIndex,tR)}else{var wR=uR.cellsRange;for(var xR=0,yR=wR.endColIndex-wR.beginColIndex+1;xR<yR;xR++){uR.insertCol(wR.beginColIndex,tR)}}rR.moveToBookmark(sR).select(true)}};UE.commands["insertcolnext"]={queryCommandState:function(){var zR=JO(this),AR=zR.cell;return AR&&MO(zR.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var BR=this.selection.getRange(),CR=BR.createBookmark(true);var DR=JO(this).cell,ER=MO(DR),FR=ER.getCellInfo(DR);if(!ER.selectedTds.length){ER.insertCol(FR.colIndex+FR.colSpan,DR)}else{var GR=ER.cellsRange;for(var HR=0,IR=GR.endColIndex-GR.beginColIndex+1;HR<IR;HR++){ER.insertCol(GR.endColIndex+1,DR)}}BR.moveToBookmark(CR).select()}};UE.commands["deletecol"]={queryCommandState:function(){var JR=JO(this);return JR.cell?0:-1},execCommand:function(){var KR=JO(this).cell,LR=MO(KR),MR=LR.cellsRange,NR=LR.getCellInfo(KR),OR=LR.getHSideCell(KR),PR=LR.getHSideCell(KR,true);if(utils.isEmptyObject(MR)){LR.deleteCol(NR.colIndex)}else{for(var QR=MR.beginColIndex;QR<MR.endColIndex+1;QR++){LR.deleteCol(MR.beginColIndex)}}var RR=LR.table,SR=this.selection.getRange();if(!RR.getElementsByTagName("td").length){var TR=RR.nextSibling;domUtils.remove(RR);if(TR){SR.setStart(TR,0).setCursor(false,true)}}else{if(domUtils.inDoc(KR,this.document)){SR.setStart(KR,0).setCursor(false,true)}else{if(PR&&domUtils.inDoc(PR,this.document)){SR.selectNodeContents(PR).setCursor(false,true)}else{if(OR&&domUtils.inDoc(OR,this.document)){SR.selectNodeContents(OR).setCursor(true,true)}}}}}};UE.commands["splittocells"]={queryCommandState:function(){var UR=JO(this),VR=UR.cell;if(!VR)return-1;var WR=MO(UR.table);if(WR.selectedTds.length>0)return-1;return VR&&(VR.colSpan>1||VR.rowSpan>1)?0:-1},execCommand:function(){var XR=this.selection.getRange(),YR=XR.createBookmark(true);var ZR=JO(this).cell,$R=MO(ZR);$R.splitToCells(ZR);XR.moveToBookmark(YR).select()}};UE.commands["splittorows"]={queryCommandState:function(){var _R=JO(this),aS=_R.cell;if(!aS)return-1;var bS=MO(_R.table);if(bS.selectedTds.length>0)return-1;return aS&&aS.rowSpan>1?0:-1},execCommand:function(){var cS=this.selection.getRange(),dS=cS.createBookmark(true);var eS=JO(this).cell,fS=MO(eS);fS.splitToRows(eS);cS.moveToBookmark(dS).select()}};UE.commands["splittocols"]={queryCommandState:function(){var gS=JO(this),hS=gS.cell;if(!hS)return-1;var iS=MO(gS.table);if(iS.selectedTds.length>0)return-1;return hS&&hS.colSpan>1?0:-1},execCommand:function(){var jS=this.selection.getRange(),kS=jS.createBookmark(true);var lS=JO(this).cell,mS=MO(lS);mS.splitToCols(lS);jS.moveToBookmark(kS).select()}};UE.commands["adaptbytext"]=UE.commands["adaptbywindow"]={queryCommandState:function(){return JO(this).table?0:-1},execCommand:function(nS){var oS=JO(this),pS=oS.table;if(pS){if(nS=="adaptbywindow"){NO(pS,this)}else{var qS=domUtils.getElementsByTagName(pS,"td th");utils.each(qS,function(rS){rS.removeAttribute("width")});pS.removeAttribute("width")}}}};UE.commands["averagedistributecol"]={queryCommandState:function(){var sS=KO(this);if(!sS)return-1;return sS.isFullRow()||sS.isFullCol()?0:-1},execCommand:function(tS){var uS=this,vS=KO(uS);function wS(){var yS=vS.table,zS,AS=0,BS=0,CS=LO(uS,yS);if(vS.isFullRow()){AS=yS.offsetWidth;BS=vS.colsNum}else{var DS=vS.cellsRange.beginColIndex,ES=vS.cellsRange.endColIndex,FS;for(var GS=DS;GS<=ES;){FS=vS.selectedTds[GS];AS+=FS.offsetWidth;GS+=FS.colSpan;BS+=1}}zS=Math.ceil(AS/BS)-CS.tdBorder*2-CS.tdPadding*2;return zS}function xS(HS){utils.each(domUtils.getElementsByTagName(vS.table,"th"),function(JS){JS.setAttribute("width","")});var IS=vS.isFullRow()?domUtils.getElementsByTagName(vS.table,"td"):vS.selectedTds;utils.each(IS,function(KS){if(KS.colSpan==1){KS.setAttribute("width",HS)}})}if(vS&&vS.selectedTds.length){xS(wS())}}};UE.commands["averagedistributerow"]={queryCommandState:function(){var LS=KO(this);if(!LS)return-1;if(LS.selectedTds&&/th/gi.test(LS.selectedTds[0].tagName))return-1;return LS.isFullRow()||LS.isFullCol()?0:-1},execCommand:function(MS){var NS=this,OS=KO(NS);function PS(){var RS,SS,TS=0,US=OS.table,VS=LO(NS,US),WS=parseInt(domUtils.getComputedStyle(US.getElementsByTagName("td")[0],"padding-top"));if(OS.isFullCol()){var XS=domUtils.getElementsByTagName(US,"caption"),YS=domUtils.getElementsByTagName(US,"th"),ZS,$S;if(XS.length>0){ZS=XS[0].offsetHeight}if(YS.length>0){$S=YS[0].offsetHeight}TS=US.offsetHeight-(ZS||0)-($S||0);SS=YS.length==0?OS.rowsNum:OS.rowsNum-1}else{var _S=OS.cellsRange.beginRowIndex,aT=OS.cellsRange.endRowIndex,bT=0,cT=domUtils.getElementsByTagName(US,"tr");for(var dT=_S;dT<=aT;dT++){TS+=cT[dT].offsetHeight;bT+=1}SS=bT}if(browser.ie&&browser.version<9){RS=Math.ceil(TS/SS)}else{RS=Math.ceil(TS/SS)-VS.tdBorder*2-WS*2}return RS}function QS(eT){var fT=OS.isFullCol()?domUtils.getElementsByTagName(OS.table,"td"):OS.selectedTds;utils.each(fT,function(gT){if(gT.rowSpan==1){gT.setAttribute("height",eT)}})}if(OS&&OS.selectedTds.length){QS(PS())}}};UE.commands["cellalignment"]={queryCommandState:function(){return JO(this).table?0:-1},execCommand:function(hT,iT){var jT=this,kT=KO(jT);if(!kT){var lT=jT.selection.getStart(),mT=lT&&domUtils.findParentByTagName(lT,["td","th","caption"],true);if(!/caption/gi.test(mT.tagName)){domUtils.setAttributes(mT,iT)}else{mT.style.textAlign=iT.align;mT.style.verticalAlign=iT.vAlign}jT.selection.getRange().setCursor(true)}else{utils.each(kT.selectedTds,function(nT){domUtils.setAttributes(nT,iT)})}},queryCommandValue:function(oT){var pT=JO(this).cell;if(!pT){pT=PO(this)[0]}if(!pT){return null}else{var qT=UE.UETable.getUETable(pT).selectedTds;!qT.length&&(qT=pT);return UE.UETable.getTableCellAlignState(qT)}}};UE.commands["tablealignment"]={queryCommandState:function(){if(browser.ie&&browser.version<8){return-1}return JO(this).table?0:-1},execCommand:function(rT,sT){var tT=this,uT=tT.selection.getStart(),vT=uT&&domUtils.findParentByTagName(uT,["table"],true);if(vT){vT.setAttribute("align",sT)}}};UE.commands["edittable"]={queryCommandState:function(){return JO(this).table?0:-1},execCommand:function(wT,xT){var yT=this.selection.getRange(),zT=domUtils.findParentByTagName(yT.startContainer,"table");if(zT){var AT=domUtils.getElementsByTagName(zT,"td").concat(domUtils.getElementsByTagName(zT,"th"),domUtils.getElementsByTagName(zT,"caption"));utils.each(AT,function(BT){BT.style.borderColor=xT})}}};UE.commands["edittd"]={queryCommandState:function(){return JO(this).table?0:-1},execCommand:function(CT,DT){var ET=this,FT=KO(ET);if(!FT){var GT=ET.selection.getStart(),HT=GT&&domUtils.findParentByTagName(GT,["td","th","caption"],true);if(HT){HT.style.backgroundColor=DT}}else{utils.each(FT.selectedTds,function(IT){IT.style.backgroundColor=DT})}}};UE.commands["settablebackground"]={queryCommandState:function(){return PO(this).length>1?0:-1},execCommand:function(JT,KT){var LT,MT;LT=PO(this);MT=MO(LT[0]);MT.setBackground(LT,KT)}};UE.commands["cleartablebackground"]={queryCommandState:function(){var NT=PO(this);if(!NT.length)return-1;for(var OT=0,PT;PT=NT[OT++];){if(PT.style.backgroundColor!=="")return 0}return-1},execCommand:function(){var QT=PO(this),RT=MO(QT[0]);RT.removeBackground(QT)}};UE.commands["interlacetable"]=UE.commands["uninterlacetable"]={queryCommandState:function(ST){var TT=JO(this).table;if(!TT)return-1;var UT=TT.getAttribute("interlaced");if(ST=="interlacetable"){return UT==="enabled"?-1:0}else{return!UT||UT==="disabled"?-1:0}},execCommand:function(VT,WT){var XT=JO(this).table;if(VT=="interlacetable"){XT.setAttribute("interlaced","enabled");this.fireEvent("interlacetable",XT,WT)}else{XT.setAttribute("interlaced","disabled");this.fireEvent("uninterlacetable",XT)}}};UE.commands["setbordervisible"]={queryCommandState:function(YT){var ZT=JO(this).table;if(!ZT)return-1;return 0},execCommand:function(){var $T=JO(this).table;utils.each(domUtils.getElementsByTagName($T,"td"),function(_T){_T.style.borderWidth="1px";_T.style.borderStyle="solid"})}};function NO(aU,bU){var cU=domUtils.getElementsByTagName(aU,"td th");utils.each(cU,function(eU){eU.removeAttribute("width")});aU.setAttribute("width",OO(bU,true,LO(bU,aU)));var dU=[];setTimeout(function(){utils.each(cU,function(fU){fU.colSpan==1&&dU.push(fU.offsetWidth)});utils.each(cU,function(gU,hU){gU.colSpan==1&&gU.setAttribute("width",dU[hU]+"")})},0)}function OO(iU,jU,kU){var lU=iU.body;return lU.offsetWidth-(jU?parseInt(domUtils.getComputedStyle(lU,"margin-left"),10)*2:0)-kU.tableBorder*2-(iU.options.offsetWidth||0)}function PO(mU){var nU=JO(mU).cell;if(nU){var oU=MO(nU);return oU.selectedTds.length?oU.selectedTds:[nU]}else{return[]}}})();UE.plugins["table"]=function(){var pU=this,qU=null,rU=null,sU=null,tU=5,uU=false,vU=5,wU=10,xU=0,yU=null,zU=360,AU=UE.UETable,BU=function(IV){return AU.getUETable(IV)},CU=function(JV){return AU.getUETableBySelected(JV)},DU=function(KV,LV){return AU.getDefaultValue(KV,LV)},EU=function(MV){return AU.removeSelectedClass(MV)};function FU(NV){}pU.ready(function(){var OV=this;var PV=OV.selection.getText;OV.selection.getText=function(){var QV=CU(OV);if(QV){var RV="";utils.each(QV.selectedTds,function(SV){RV+=SV[browser.ie?"innerText":"textContent"]});return RV}else{return PV.call(OV.selection)}}});var GU=null,HU=null,IU="",JU=false,KU=null,LU=false,MU=null,NU=null;var OU=false,PU=true;pU.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:pU.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:false,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]});pU.getUETable=BU;var QU={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};pU.ready(function(){utils.cssRule("table",".selectTdClass{background-color:#edf5fa !important}"+"table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}"+"table{margin-bottom:10px;border-collapse:collapse;display:table;}"+"td,th{padding: 5px 10px;border: 1px solid #DDD;}"+"caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}"+"th{border-top:1px solid #BBB;background-color:#F7F7F7;}"+"table tr.firstRow th{border-top-width:2px;}"+".ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }"+"td p{margin:0;padding:0;}",pU.document);var TV,UV,VV;pU.addListener("keydown",function(ZV,$V){var _V=this;var aW=$V.keyCode||$V.which;if(aW==8){var bW=CU(_V);if(bW&&bW.selectedTds.length){if(bW.isFullCol()){_V.execCommand("deletecol")}else if(bW.isFullRow()){_V.execCommand("deleterow")}else{_V.fireEvent("delcells")}domUtils.preventDefault($V)}var cW=domUtils.findParentByTagName(_V.selection.getStart(),"caption",true),dW=_V.selection.getRange();if(dW.collapsed&&cW&&UU(cW)){_V.fireEvent("saveScene");var eW=cW.parentNode;domUtils.remove(cW);if(eW){dW.setStart(eW.rows[0].cells[0],0).setCursor(false,true)}_V.fireEvent("saveScene")}}if(aW==46){bW=CU(_V);if(bW){_V.fireEvent("saveScene");for(var fW=0,gW;gW=bW.selectedTds[fW++];){domUtils.fillNode(_V.document,gW)}_V.fireEvent("saveScene");domUtils.preventDefault($V)}}if(aW==13){var hW=_V.selection.getRange(),cW=domUtils.findParentByTagName(hW.startContainer,"caption",true);if(cW){var eW=domUtils.findParentByTagName(cW,"table");if(!hW.collapsed){hW.deleteContents();_V.fireEvent("saveScene")}else{if(cW){hW.setStart(eW.rows[0].cells[0],0).setCursor(false,true)}}domUtils.preventDefault($V);return}if(hW.collapsed){var eW=domUtils.findParentByTagName(hW.startContainer,"table");if(eW){var iW=eW.rows[0].cells[0],jW=domUtils.findParentByTagName(_V.selection.getStart(),["td","th"],true),kW=eW.previousSibling;if(iW===jW&&(!kW||kW.nodeType==1&&kW.tagName=="TABLE")&&domUtils.isStartInblock(hW)){var lW=domUtils.findParent(_V.selection.getStart(),function(nW){return domUtils.isBlockElm(nW)},true);if(lW&&(/t(h|d)/i.test(lW.tagName)||lW===jW.firstChild)){_V.execCommand("insertparagraphbeforetable");domUtils.preventDefault($V)}}}}}if(($V.ctrlKey||$V.metaKey)&&$V.keyCode=="67"){TV=null;var bW=CU(_V);if(bW){var mW=bW.selectedTds;UV=bW.isFullCol();VV=bW.isFullRow();TV=[[bW.cloneCell(mW[0],null,true)]];for(var fW=1,gW;gW=mW[fW];fW++){if(gW.parentNode!==mW[fW-1].parentNode){TV.push([bW.cloneCell(gW,null,true)])}else{TV[TV.length-1].push(bW.cloneCell(gW,null,true))}}}}});pU.addListener("tablehasdeleted",function(){bV(this,false,"",null);if(KU)domUtils.remove(KU)});pU.addListener("beforepaste",function(oW,pW){var qW=this;var rW=qW.selection.getRange();if(domUtils.findParentByTagName(rW.startContainer,"caption",true)){var sW=qW.document.createElement("div");sW.innerHTML=pW.html;pW.html=sW[browser.ie9below?"innerText":"textContent"];return}var tW=CU(qW);if(TV){qW.fireEvent("saveScene");var rW=qW.selection.getRange();var uW=domUtils.findParentByTagName(rW.startContainer,["td","th"],true),vW,wW;if(uW){var xW=BU(uW);if(VV){var yW=xW.getCellInfo(uW).rowIndex;if(uW.tagName=="TH"){yW++}for(var zW=0,AW;AW=TV[zW++];){var BW=xW.insertRow(yW++,"td");for(var CW=0,DW;DW=AW[CW];CW++){var EW=BW.cells[CW];if(!EW){EW=BW.insertCell(CW)}EW.innerHTML=DW.innerHTML;DW.getAttribute("width")&&EW.setAttribute("width",DW.getAttribute("width"));DW.getAttribute("vAlign")&&EW.setAttribute("vAlign",DW.getAttribute("vAlign"));DW.getAttribute("align")&&EW.setAttribute("align",DW.getAttribute("align"));DW.style.cssText&&(EW.style.cssText=DW.style.cssText)}for(var CW=0,DW;DW=BW.cells[CW];CW++){if(!AW[CW])break;DW.innerHTML=AW[CW].innerHTML;AW[CW].getAttribute("width")&&DW.setAttribute("width",AW[CW].getAttribute("width"));AW[CW].getAttribute("vAlign")&&DW.setAttribute("vAlign",AW[CW].getAttribute("vAlign"));AW[CW].getAttribute("align")&&DW.setAttribute("align",AW[CW].getAttribute("align"));AW[CW].style.cssText&&(DW.style.cssText=AW[CW].style.cssText)}}}else{if(UV){HW=xW.getCellInfo(uW);var FW=0;for(var CW=0,AW=TV[0],DW;DW=AW[CW++];){FW+=DW.colSpan||1}qW.__hasEnterExecCommand=true;for(zW=0;zW<FW;zW++){qW.execCommand("insertcol")}qW.__hasEnterExecCommand=false;uW=xW.table.rows[0].cells[HW.cellIndex];if(uW.tagName=="TH"){uW=xW.table.rows[1].cells[HW.cellIndex]}}for(var zW=0,AW;AW=TV[zW++];){vW=uW;for(var CW=0,DW;DW=AW[CW++];){if(uW){uW.innerHTML=DW.innerHTML;DW.getAttribute("width")&&uW.setAttribute("width",DW.getAttribute("width"));DW.getAttribute("vAlign")&&uW.setAttribute("vAlign",DW.getAttribute("vAlign"));DW.getAttribute("align")&&uW.setAttribute("align",DW.getAttribute("align"));DW.style.cssText&&(uW.style.cssText=DW.style.cssText);wW=uW;uW=uW.nextSibling}else{var GW=DW.cloneNode(true);domUtils.removeAttributes(GW,["class","rowSpan","colSpan"]);wW.parentNode.appendChild(GW)}}uW=xW.getNextCell(vW,true,true);if(!TV[zW])break;if(!uW){var HW=xW.getCellInfo(vW);xW.table.insertRow(xW.table.rows.length);xW.update();uW=xW.getVSideCell(vW,true)}}}xW.update()}else{tW=qW.document.createElement("table");for(var zW=0,AW;AW=TV[zW++];){var BW=tW.insertRow(tW.rows.length);for(var CW=0,DW;DW=AW[CW++];){GW=AU.cloneCell(DW,null,true);domUtils.removeAttributes(GW,["class"]);BW.appendChild(GW)}if(CW==2&&GW.rowSpan>1){GW.rowSpan=1}}var IW=DU(qW),JW=qW.body.offsetWidth-(PU?parseInt(domUtils.getComputedStyle(qW.body,"margin-left"),10)*2:0)-IW.tableBorder*2-(qW.options.offsetWidth||0);qW.execCommand("insertHTML","<table  "+(UV&&VV?'width="'+JW+'"':"")+">"+tW.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}qW.fireEvent("contentchange");qW.fireEvent("saveScene");pW.html="";return true}else{var sW=qW.document.createElement("div"),KW;sW.innerHTML=pW.html;KW=sW.getElementsByTagName("table");if(domUtils.findParentByTagName(qW.selection.getStart(),"table")){utils.each(KW,function(LW){domUtils.remove(LW)});if(domUtils.findParentByTagName(qW.selection.getStart(),"caption",true)){sW.innerHTML=sW[browser.ie?"innerText":"textContent"]}}else{utils.each(KW,function(MW){RU(MW,true);domUtils.removeAttributes(MW,["style","border"]);utils.each(domUtils.getElementsByTagName(MW,"td"),function(NW){if(UU(NW)){domUtils.fillNode(qW.document,NW)}RU(NW,true)})})}pW.html=sW.innerHTML}});pU.addListener("afterpaste",function(){utils.each(domUtils.getElementsByTagName(pU.body,"table"),function(OW){if(OW.offsetWidth>pU.body.offsetWidth){var PW=DU(pU,OW);OW.style.width=pU.body.offsetWidth-(PU?parseInt(domUtils.getComputedStyle(pU.body,"margin-left"),10)*2:0)-PW.tableBorder*2-(pU.options.offsetWidth||0)+"px"}})});pU.addListener("blur",function(){TV=null});var WV;pU.addListener("keydown",function(){clearTimeout(WV);WV=setTimeout(function(){var QW=pU.selection.getRange(),RW=domUtils.findParentByTagName(QW.startContainer,["th","td"],true);if(RW){var SW=RW.parentNode.parentNode.parentNode;if(SW.offsetWidth>SW.getAttribute("width")){RW.style.wordBreak="break-all"}}},100)});pU.addListener("selectionchange",function(){bV(pU,false,"",null)});pU.addListener("contentchange",function(){var TW=this;DV(TW);if(CU(TW))return;var UW=TW.selection.getRange();var VW=UW.startContainer;VW=domUtils.findParentByTagName(VW,["td","th"],true);utils.each(domUtils.getElementsByTagName(TW.document,"table"),function(WW){if(TW.fireEvent("excludetable",WW)===true)return;WW.ueTable=new AU(WW);WW.onmouseover=function(){TW.fireEvent("tablemouseover",WW)};WW.onmousemove=function(){TW.fireEvent("tablemousemove",WW);TW.options.tableDragable&&YU(true,this,TW);utils.defer(function(){TW.fireEvent("contentchange",50)},true)};WW.onmouseout=function(){TW.fireEvent("tablemouseout",WW);bV(TW,false,"",null);DV(TW)};WW.onclick=function(XW){XW=TW.window.event||XW;var YW=TU(XW.target||XW.srcElement);if(!YW)return;var ZW=BU(YW),$W=ZW.table,_W=ZW.getCellInfo(YW),aX,bX=TW.selection.getRange();if($U($W,YW,XW,true)){var cX=ZW.getCell(ZW.indexTable[ZW.rowsNum-1][_W.colIndex].rowIndex,ZW.indexTable[ZW.rowsNum-1][_W.colIndex].cellIndex);if(XW.shiftKey&&ZW.selectedTds.length){if(ZW.selectedTds[0]!==cX){aX=ZW.getCellsRange(ZW.selectedTds[0],cX);ZW.setSelected(aX)}else{bX&&bX.selectNodeContents(cX).select()}}else{if(YW!==cX){aX=ZW.getCellsRange(YW,cX);ZW.setSelected(aX)}else{bX&&bX.selectNodeContents(cX).select()}}return}if($U($W,YW,XW)){var dX=ZW.getCell(ZW.indexTable[_W.rowIndex][ZW.colsNum-1].rowIndex,ZW.indexTable[_W.rowIndex][ZW.colsNum-1].cellIndex);if(XW.shiftKey&&ZW.selectedTds.length){if(ZW.selectedTds[0]!==dX){aX=ZW.getCellsRange(ZW.selectedTds[0],dX);ZW.setSelected(aX)}else{bX&&bX.selectNodeContents(dX).select()}}else{if(YW!==dX){aX=ZW.getCellsRange(YW,dX);ZW.setSelected(aX)}else{bX&&bX.selectNodeContents(dX).select()}}}}});FV(TW,true)});domUtils.on(pU.document,"mousemove",WU);domUtils.on(pU.document,"mouseout",function(eX){var fX=eX.target||eX.srcElement;if(fX.tagName=="TABLE"){bV(pU,false,"",null)}});pU.addListener("interlacetable",function(gX,hX,iX){if(!hX)return;var jX=this,kX=hX.rows,lX=kX.length,mX=function(oX,pX,qX){return oX[pX]?oX[pX]:qX?oX[pX%oX.length]:""};for(var nX=0;nX<lX;nX++){kX[nX].className=mX(iX||jX.options.classList,nX,true)}});pU.addListener("uninterlacetable",function(rX,sX){if(!sX)return;var tX=this,uX=sX.rows,vX=tX.options.classList,wX=uX.length;for(var xX=0;xX<wX;xX++){domUtils.removeClasses(uX[xX],vX)}});pU.addListener("mousedown",gV);pU.addListener("mouseup",pV);domUtils.on(pU.body,"dragstart",function(yX){pV.call(pU,"dragstart",yX)});pU.addOutputRule(function(zX){utils.each(zX.getNodesByTagName("div"),function(AX){if(AX.getAttr("id")=="ue_tableDragLine"){AX.parentNode.removeChild(AX)}})});var XV=0;pU.addListener("mousedown",function(){XV=0});pU.addListener("tabkeydown",function(){var BX=this.selection.getRange(),CX=BX.getCommonAncestor(true,true),DX=domUtils.findParentByTagName(CX,"table");if(DX){if(domUtils.findParentByTagName(CX,"caption",true)){var EX=domUtils.getElementsByTagName(DX,"th td");if(EX&&EX.length){BX.setStart(EX[0],0).setCursor(false,true)}}else{var EX=domUtils.findParentByTagName(CX,["td","th"],true),FX=BU(EX);XV=EX.rowSpan>1?XV:FX.getCellInfo(EX).rowIndex;var GX=FX.getTabNextCell(EX,XV);if(GX){if(UU(GX)){BX.setStart(GX,0).setCursor(false,true)}else{BX.selectNodeContents(GX).select()}}else{pU.fireEvent("saveScene");pU.__hasEnterExecCommand=true;this.execCommand("insertrownext");pU.__hasEnterExecCommand=false;BX=this.selection.getRange();BX.setStart(DX.rows[DX.rows.length-1].cells[0],0).setCursor();pU.fireEvent("saveScene")}}return true}});browser.ie&&pU.addListener("selectionchange",function(){bV(this,false,"",null)});pU.addListener("keydown",function(HX,IX){var JX=this;var KX=IX.keyCode||IX.which;if(KX==8||KX==46){return}var LX=!IX.ctrlKey&&!IX.metaKey&&!IX.shiftKey&&!IX.altKey;LX&&EU(domUtils.getElementsByTagName(JX.body,"td"));var MX=CU(JX);if(!MX)return;LX&&MX.clearSelected()});pU.addListener("beforegetcontent",function(){FV(this,false);browser.ie&&utils.each(this.document.getElementsByTagName("caption"),function(NX){if(domUtils.isEmptyNode(NX)){NX.innerHTML="&nbsp;"}})});pU.addListener("aftergetcontent",function(){FV(this,true)});pU.addListener("getAllHtml",function(){EU(pU.document.getElementsByTagName("td"))});pU.addListener("fullscreenchanged",function(OX,PX){if(!PX){var QX=this.body.offsetWidth/document.body.offsetWidth,RX=domUtils.getElementsByTagName(this.body,"table");utils.each(RX,function(SX){if(SX.offsetWidth<pU.body.offsetWidth)return false;var TX=domUtils.getElementsByTagName(SX,"td"),UX=[];utils.each(TX,function(XX){UX.push(XX.offsetWidth)});for(var VX=0,WX;WX=TX[VX];VX++){WX.setAttribute("width",Math.floor(UX[VX]*QX))}SX.setAttribute("width",Math.floor(GV(pU,PU,DU(pU))))})}});var YV=pU.execCommand;pU.execCommand=function(YX,ZX){var $X=this,_X=arguments;YX=YX.toLowerCase();var aY=CU($X),bY,cY=new dom.Range($X.document),dY=$X.commands[YX]||UE.commands[YX],eY;if(!dY)return;if(aY&&!QU[YX]&&!dY.notNeedUndo&&!$X.__hasEnterExecCommand){$X.__hasEnterExecCommand=true;$X.fireEvent("beforeexeccommand",YX);bY=aY.selectedTds;var fY=-2,gY=-2,hY,iY;for(var jY=0,kY;kY=bY[jY];jY++){if(UU(kY)){cY.setStart(kY,0).setCursor(false,true)}else{cY.selectNode(kY).select(true)}iY=$X.queryCommandState(YX);hY=$X.queryCommandValue(YX);if(iY!=-1){if(fY!==iY||gY!==hY){$X._ignoreContentChange=true;eY=YV.apply($X,arguments);$X._ignoreContentChange=false}fY=$X.queryCommandState(YX);gY=$X.queryCommandValue(YX);if(domUtils.isEmptyBlock(kY)){domUtils.fillNode($X.document,kY)}}}cY.setStart(bY[0],0).shrinkBoundary(true).setCursor(false,true);$X.fireEvent("contentchange");$X.fireEvent("afterexeccommand",YX);$X.__hasEnterExecCommand=false;$X._selectionChange()}else{eY=YV.apply($X,arguments)}return eY}});function RU(lY,mY){SU(lY,"width",true);SU(lY,"height",true)}function SU(nY,oY,pY){if(nY.style[oY]){pY&&nY.setAttribute(oY,parseInt(nY.style[oY],10));nY.style[oY]=""}}function TU(qY){if(qY.tagName=="TD"||qY.tagName=="TH")return qY;var rY;if(rY=domUtils.findParentByTagName(qY,"td",true)||domUtils.findParentByTagName(qY,"th",true))return rY;return null}function UU(sY){var tY=new RegExp(domUtils.fillChar,"g");if(sY[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(tY,"").length>0){return 0}for(var uY in dtd.$isNotEmpty){if(sY.getElementsByTagName(uY).length){return 0}}return 1}function VU(vY){if(vY.pageX||vY.pageY){return{x:vY.pageX,y:vY.pageY}}return{x:vY.clientX+pU.document.body.scrollLeft-pU.document.body.clientLeft,y:vY.clientY+pU.document.body.scrollTop-pU.document.body.clientTop}}function WU(wY){if(uV()){return}try{var xY=TU(wY.target||wY.srcElement),yY;if(uU){pU.body.style.webkitUserSelect="none";if(Math.abs(yU.x-wY.clientX)>wU||Math.abs(yU.y-wY.clientY)>wU){mV();uU=false;xU=0;oV(wY)}}if(IU&&NU){xU=0;pU.body.style.webkitUserSelect="none";pU.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();yY=VU(wY);bV(pU,true,IU,yY,xY);if(IU=="h"){MU.style.left=_U(NU,wY)+"px"}else if(IU=="v"){MU.style.top=aV(NU,wY)+"px"}return}if(xY){if(pU.fireEvent("excludetable",xY)===true)return;yY=VU(wY);var zY=fV(xY,yY),AY=domUtils.findParentByTagName(xY,"table",true);if($U(AY,xY,wY,true)){if(pU.fireEvent("excludetable",AY)===true)return;pU.body.style.cursor="url("+pU.options.cursorpath+"h.png),pointer"}else if($U(AY,xY,wY)){if(pU.fireEvent("excludetable",AY)===true)return;pU.body.style.cursor="url("+pU.options.cursorpath+"v.png),pointer"}else{pU.body.style.cursor="text";var BY=xY;if(/\d/.test(zY)){zY=zY.replace(/\d/,"");xY=BU(xY).getPreviewCell(xY,zY=="v")}bV(pU,xY?!!zY:false,xY?zY:"",yY,xY)}}else{YU(false,AY,pU)}}catch(CY){FU(CY)}}var XU;function YU(DY,EY,FY){if(!DY){if(LU)return;XU=setTimeout(function(){!LU&&KU&&KU.parentNode&&KU.parentNode.removeChild(KU)},2e3)}else{ZU(EY,FY)}}function ZU(GY,HY){var IY=domUtils.getXY(GY),JY=GY.ownerDocument;if(KU&&KU.parentNode)return KU;KU=JY.createElement("div");KU.contentEditable=false;KU.innerHTML="";KU.style.cssText="width:15px;height:15px;background-image:url("+HY.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(IY.y-15)+"px;left:"+IY.x+"px;";domUtils.unSelectable(KU);KU.onmouseover=function(NY){LU=true};KU.onmouseout=function(OY){LU=false};domUtils.on(KU,"click",function(PY,QY){LY(QY,this)});domUtils.on(KU,"dblclick",function(RY,SY){MY(SY)});domUtils.on(KU,"dragstart",function(TY,UY){domUtils.preventDefault(UY)});var KY;function LY(VY,WY){clearTimeout(KY);KY=setTimeout(function(){HY.fireEvent("tableClicked",GY,WY)},300)}function MY(XY){clearTimeout(KY);var YY=BU(GY),ZY=GY.rows[0].cells[0],$Y=YY.getLastCell(),_Y=YY.getCellsRange(ZY,$Y);HY.selection.getRange().setStart(ZY,0).setCursor(false,true);YY.setSelected(_Y)}JY.body.appendChild(KU)}function $U(aZ,bZ,cZ,dZ){var eZ=VU(cZ),fZ=fV(bZ,eZ);if(dZ){var gZ=aZ.getElementsByTagName("caption")[0],hZ=gZ?gZ.offsetHeight:0;return fZ=="v1"&&eZ.y-domUtils.getXY(aZ).y-hZ<8}else{return fZ=="h1"&&eZ.x-domUtils.getXY(aZ).x<8}}function _U(iZ,jZ){var kZ=BU(iZ);if(kZ){var lZ=kZ.getSameEndPosCells(iZ,"x")[0],mZ=kZ.getSameStartPosXCells(iZ)[0],nZ=VU(jZ).x,oZ=(lZ?domUtils.getXY(lZ).x:domUtils.getXY(kZ.table).x)+20,pZ=mZ?domUtils.getXY(mZ).x+mZ.offsetWidth-20:pU.body.offsetWidth+5||parseInt(domUtils.getComputedStyle(pU.body,"width"),10);oZ+=tU;pZ-=tU;return nZ<oZ?oZ:nZ>pZ?pZ:nZ}}function aV(qZ,rZ){try{var sZ=domUtils.getXY(qZ).y,tZ=VU(rZ).y;return tZ<sZ?sZ:tZ}catch(uZ){FU(uZ)}}function bV(vZ,wZ,xZ,yZ,zZ){try{vZ.body.style.cursor=xZ=="h"?"col-resize":xZ=="v"?"row-resize":"text";if(browser.ie){if(xZ&&!OU&&!CU(vZ)){CV(vZ,vZ.document);EV(xZ,zZ)}else{DV(vZ)}}JU=wZ}catch(AZ){FU(AZ)}}function cV(){var BZ="_UETableResizeLine",CZ=this.document.getElementById(BZ);if(!CZ){CZ=this.document.createElement("div");CZ.id=BZ;CZ.contnetEditable=false;CZ.setAttribute("unselectable","on");var DZ={width:2*vU+1+"px",position:"absolute","z-index":1e5,cursor:"col-resize",background:"red",display:"none"};CZ.onmouseout=function(){this.style.display="none"};utils.extend(CZ.style,DZ);this.document.body.appendChild(CZ)}return CZ}function dV(EZ,FZ){var GZ=cV.call(this),HZ=FZ.table,IZ={top:domUtils.getXY(HZ).y+"px",left:domUtils.getXY(EZ).x+EZ.offsetWidth-vU+"px",display:"block",height:HZ.offsetHeight+"px"};utils.extend(GZ.style,IZ)}function eV(JZ){var KZ=BU(JZ);dV.call(this,JZ,KZ)}function fV(LZ,MZ){var NZ=domUtils.getXY(LZ);if(!NZ){return""}if(NZ.x+LZ.offsetWidth-MZ.x<vU){return"h"}if(MZ.x-NZ.x<vU){return"h1"}if(NZ.y+LZ.offsetHeight-MZ.y<vU){return"v"}if(MZ.y-NZ.y<vU){return"v1"}return""}function gV(OZ,PZ){if(uV()){return}yU={x:PZ.clientX,y:PZ.clientY};if(PZ.button==2){var QZ=CU(pU),RZ=false;if(QZ){var SZ=HV(pU,PZ);utils.each(QZ.selectedTds,function(TZ){if(TZ===SZ){RZ=true}});if(!RZ){EU(domUtils.getElementsByTagName(pU.body,"th td"));QZ.clearSelected()}else{SZ=QZ.selectedTds[0];setTimeout(function(){pU.selection.getRange().setStart(SZ,0).setCursor(false,true)},0)}}}else{jV(PZ)}}function hV(){qU&&clearTimeout(qU);qU=null}function iV(UZ){xU=0;UZ=UZ||pU.window.event;var VZ=TU(UZ.target||UZ.srcElement);if(VZ){var WZ;if(WZ=fV(VZ,VU(UZ))){DV(pU);if(WZ=="h1"){WZ="h";if($U(domUtils.findParentByTagName(VZ,"table"),VZ,UZ)){pU.execCommand("adaptbywindow")}else{VZ=BU(VZ).getPreviewCell(VZ);if(VZ){var XZ=pU.selection.getRange();XZ.selectNodeContents(VZ).setCursor(true,true)}}}if(WZ=="h"){var YZ=BU(VZ),ZZ=YZ.table,$Z=wV(VZ,ZZ,true);$Z=lV($Z,"left");YZ.width=YZ.offsetWidth;var _Z=[],a$=[];utils.each($Z,function(b$){_Z.push(b$.offsetWidth)});utils.each($Z,function(c$){c$.removeAttribute("width")});window.setTimeout(function(){var d$=true;utils.each($Z,function(f$,g$){var h$=f$.offsetWidth;if(h$>_Z[g$]){d$=false;return false}a$.push(h$)});var e$=d$?a$:_Z;utils.each($Z,function(i$,j$){i$.width=e$[j$]-BV()})},0)}}}}function jV(k$){EU(domUtils.getElementsByTagName(pU.body,"td th"));utils.each(pU.document.getElementsByTagName("table"),function(m$){m$.ueTable=null});GU=HV(pU,k$);if(!GU)return;var l$=domUtils.findParentByTagName(GU,"table",true);ut=BU(l$);ut&&ut.clearSelected();if(!JU){pU.document.body.style.webkitUserSelect="";OU=true;pU.addListener("mouseover",qV)}else{kV(k$)}}function kV(n$){if(browser.ie){n$=nV(n$)}mV();uU=true;rU=setTimeout(function(){oV(n$)},zU)}function lV(o$,p$){var q$=[],r$=null;for(var s$=0,t$=o$.length;s$<t$;s$++){r$=o$[s$][p$];if(r$){q$.push(r$)}}return q$}function mV(){rU&&clearTimeout(rU);rU=null}function nV(u$){var v$=["pageX","pageY","clientX","clientY","srcElement","target"],w$={};if(u$){for(var x$=0,y$,z$;y$=v$[x$];x$++){z$=u$[y$];z$&&(w$[y$]=z$)}}return w$}function oV(A$){uU=false;GU=A$.target||A$.srcElement;if(!GU)return;var B$=fV(GU,VU(A$));if(/\d/.test(B$)){B$=B$.replace(/\d/,"");GU=BU(GU).getPreviewCell(GU,B$=="v")}DV(pU);CV(pU,pU.document);pU.fireEvent("saveScene");EV(B$,GU);OU=true;IU=B$;NU=GU}function pV(C$,D$){if(uV()){return}mV();uU=false;if(JU){xU=++xU%3;yU={x:D$.clientX,y:D$.clientY};sU=setTimeout(function(){xU>0&&xU--},zU);if(xU===2){xU=0;iV(D$);return}}if(D$.button==2)return;var E$=this;var F$=E$.selection.getRange(),G$=domUtils.findParentByTagName(F$.startContainer,"table",true),H$=domUtils.findParentByTagName(F$.endContainer,"table",true);if(G$||H$){if(G$===H$){G$=domUtils.findParentByTagName(F$.startContainer,["td","th","caption"],true);H$=domUtils.findParentByTagName(F$.endContainer,["td","th","caption"],true);if(G$!==H$){E$.selection.clearRange()}}else{E$.selection.clearRange()}}OU=false;E$.document.body.style.webkitUserSelect="";if(IU&&NU){E$.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();xU=0;MU=E$.document.getElementById("ue_tableDragLine");if(MU){var I$=domUtils.getXY(NU),J$=domUtils.getXY(MU);switch(IU){case"h":tV(NU,J$.x-I$.x);break;case"v":vV(NU,J$.y-I$.y-NU.offsetHeight);break;default:}IU="";NU=null;DV(E$);E$.fireEvent("saveScene");return}}if(!GU){var K$=domUtils.findParentByTagName(D$.target||D$.srcElement,"td",true);if(!K$)K$=domUtils.findParentByTagName(D$.target||D$.srcElement,"th",true);if(K$&&(K$.tagName=="TD"||K$.tagName=="TH")){if(E$.fireEvent("excludetable",K$)===true)return;F$=new dom.Range(E$.document);F$.setStart(K$,0).setCursor(false,true)}}else{var L$=BU(GU),M$=L$?L$.selectedTds[0]:null;if(M$){F$=new dom.Range(E$.document);if(domUtils.isEmptyBlock(M$)){F$.setStart(M$,0).setCursor(false,true)}else{F$.selectNodeContents(M$).shrinkBoundary().setCursor(false,true)}}else{F$=E$.selection.getRange().shrinkBoundary();if(!F$.collapsed){var G$=domUtils.findParentByTagName(F$.startContainer,["td","th"],true),H$=domUtils.findParentByTagName(F$.endContainer,["td","th"],true);if(G$&&!H$||!G$&&H$||G$&&H$&&G$!==H$){F$.setCursor(false,true)}}}GU=null;E$.removeListener("mouseover",qV)}E$._selectionChange(250,D$)}function qV(N$,O$){if(uV()){return}var P$=this,Q$=O$.target||O$.srcElement;HU=domUtils.findParentByTagName(Q$,"td",true)||domUtils.findParentByTagName(Q$,"th",true);if(GU&&HU&&(GU.tagName=="TD"&&HU.tagName=="TD"||GU.tagName=="TH"&&HU.tagName=="TH")&&domUtils.findParentByTagName(GU,"table")==domUtils.findParentByTagName(HU,"table")){var R$=BU(HU);if(GU!=HU){P$.document.body.style.webkitUserSelect="none";P$.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();var S$=R$.getCellsRange(GU,HU);R$.setSelected(S$)}else{P$.document.body.style.webkitUserSelect="";R$.clearSelected()}}O$.preventDefault?O$.preventDefault():O$.returnValue=false}function rV(T$,U$,V$){var W$=parseInt(domUtils.getComputedStyle(T$,"line-height"),10),X$=V$+U$;U$=X$<W$?W$:X$;if(T$.style.height)T$.style.height="";T$.rowSpan==1?T$.setAttribute("height",U$):T$.removeAttribute&&T$.removeAttribute("height")}function sV(Y$){if(!Y$)return 0;return parseInt(domUtils.getComputedStyle(Y$,"width"),10)}function tV(Z$,$$){var _$=BU(Z$);if(_$){var a_=_$.table,b_=wV(Z$,a_);a_.style.width="";a_.removeAttribute("width");$$=yV($$,Z$,b_);if(Z$.nextSibling){var c_=0;utils.each(b_,function(d_){d_.left.width=+d_.left.width+$$;d_.right&&(d_.right.width=+d_.right.width-$$)})}else{utils.each(b_,function(e_){e_.left.width-=-$$})}}}function uV(){return pU.body.contentEditable==="false"}function vV(f_,g_){if(Math.abs(g_)<10)return;var h_=BU(f_);if(h_){var i_=h_.getSameEndPosCells(f_,"y"),j_=i_[0]?i_[0].offsetHeight:0;for(var k_=0,l_;l_=i_[k_++];){rV(l_,g_,j_)}}}function wV(m_,n_,o_){if(!n_){n_=domUtils.findParentByTagName(m_,"table")}if(!n_){return null}var p_=domUtils.getNodeIndex(m_),q_=m_,r_=n_.rows,s_=0;while(q_){if(q_.nodeType===1){s_+=q_.colSpan||1}q_=q_.previousSibling}q_=null;var t_=[];utils.each(r_,function(u_){var v_=u_.cells,w_=0;utils.each(v_,function(x_){w_+=x_.colSpan||1;if(w_===s_){t_.push({left:x_,right:x_.nextSibling||null});return false}else if(w_>s_){if(o_){t_.push({left:x_})}return false}})});return t_}function xV(y_){var z_=Number.MAX_VALUE;for(var A_=0,B_;B_=y_[A_];A_++){z_=Math.min(z_,B_.width||zV(B_))}return z_}function yV(C_,D_,E_){C_-=BV();if(C_<0){return 0}C_-=zV(D_);var F_=C_<0?"left":"right";C_=Math.abs(C_);utils.each(E_,function(G_){var H_=G_[F_];if(H_){C_=Math.min(C_,zV(H_)-tU)}});C_=C_<0?0:C_;return F_==="left"?-C_:C_}function zV(I_){var J_=0,K_=0,J_=I_.offsetWidth-BV();if(!I_.nextSibling){J_-=AV(I_)}J_=J_<0?0:J_;try{I_.width=J_}catch(L_){}return J_}function AV(M_){tab=domUtils.findParentByTagName(M_,"table",false);if(tab.offsetVal===undefined){var N_=M_.previousSibling;if(N_){tab.offsetVal=M_.offsetWidth-N_.offsetWidth===AU.borderWidth?AU.borderWidth:0}else{tab.offsetVal=0}}return tab.offsetVal}function BV(){if(AU.tabcellSpace===undefined){var O_=null,P_=pU.document.createElement("table"),Q_=pU.document.createElement("tbody"),R_=pU.document.createElement("tr"),S_=pU.document.createElement("td"),T_=null;S_.style.cssText="border: 0;";S_.width=1;R_.appendChild(S_);R_.appendChild(T_=S_.cloneNode(false));Q_.appendChild(R_);P_.appendChild(Q_);P_.style.cssText="visibility: hidden;";pU.body.appendChild(P_);AU.paddingSpace=S_.offsetWidth-1;var U_=P_.offsetWidth;S_.style.cssText="";T_.style.cssText="";AU.borderWidth=(P_.offsetWidth-U_)/3;AU.tabcellSpace=AU.paddingSpace+AU.borderWidth;pU.body.removeChild(P_)}BV=function(){return AU.tabcellSpace};return AU.tabcellSpace}function CV(V_,W_){if(OU)return;MU=V_.document.createElement("div");domUtils.setAttributes(MU,{id:"ue_tableDragLine",unselectable:"on",contenteditable:false,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"});V_.body.appendChild(MU)}function DV(X_){if(OU)return;var Y_;while(Y_=X_.document.getElementById("ue_tableDragLine")){domUtils.remove(Y_)}}function EV(Z_,$_){if(!$_)return;var __=domUtils.findParentByTagName($_,"table"),aaa=__.getElementsByTagName("caption"),baa=__.offsetWidth,caa=__.offsetHeight-(aaa.length>0?aaa[0].offsetHeight:0),daa=domUtils.getXY(__),eaa=domUtils.getXY($_),faa;switch(Z_){case"h":faa="height:"+caa+"px;top:"+(daa.y+(aaa.length>0?aaa[0].offsetHeight:0))+"px;left:"+(eaa.x+$_.offsetWidth);MU.style.cssText=faa+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":faa="width:"+baa+"px;left:"+daa.x+"px;top:"+(eaa.y+$_.offsetHeight);MU.style.cssText=faa+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)";break;default:}}function FV(gaa,haa){var iaa=domUtils.getElementsByTagName(gaa.body,"table"),jaa;for(var kaa=0,laa;laa=iaa[kaa++];){var maa=domUtils.getElementsByTagName(laa,"td");if(maa[0]){if(haa){jaa=maa[0].style.borderColor.replace(/\s/g,"");if(/(#ffffff)|(rgb\(255,255,255\))/gi.test(jaa))domUtils.addClass(laa,"noBorderTable")}else{domUtils.removeClasses(laa,"noBorderTable")}}}}function GV(naa,oaa,paa){var qaa=naa.body;return qaa.offsetWidth-(oaa?parseInt(domUtils.getComputedStyle(qaa,"margin-left"),10)*2:0)-paa.tableBorder*2-(naa.options.offsetWidth||0)}function HV(raa,saa){var taa=domUtils.findParentByTagName(saa.target||saa.srcElement,["td","th"],true),uaa=null;if(!taa){return null}uaa=fV(taa,VU(saa));if(!taa){return null}if(uaa==="h1"&&taa.previousSibling){var vaa=domUtils.getXY(taa),waa=taa.offsetWidth;if(Math.abs(vaa.x+waa-saa.clientX)>waa/3){taa=taa.previousSibling}}else if(uaa==="v1"&&taa.parentNode.previousSibling){var vaa=domUtils.getXY(taa),xaa=taa.offsetHeight;if(Math.abs(vaa.y+xaa-saa.clientY)>xaa/3){taa=taa.parentNode.previousSibling.firstChild}}return taa&&!(raa.fireEvent("excludetable",taa)===true)?taa:null}};UE.UETable.prototype.sortTable=function(yaa,zaa){var Aaa=this.table,Baa=Aaa.rows,Caa=[],Daa=Baa[0].cells[0].tagName==="TH",Eaa=0;if(this.selectedTds.length){var Faa=this.cellsRange,Gaa=Faa.endRowIndex+1;for(var Haa=Faa.beginRowIndex;Haa<Gaa;Haa++){Caa[Haa]=Baa[Haa]}Caa.splice(0,Faa.beginRowIndex);Eaa=Faa.endRowIndex+1===this.rowsNum?0:Faa.endRowIndex+1}else{for(var Haa=0,Gaa=Baa.length;Haa<Gaa;Haa++){Caa[Haa]=Baa[Haa]}}var Iaa={reversecurrent:function(Maa,Naa){return 1},orderbyasc:function(Oaa,Paa){var Qaa=Oaa.innerText||Oaa.textContent,Raa=Paa.innerText||Paa.textContent;return Qaa.localeCompare(Raa)},reversebyasc:function(Saa,Taa){var Uaa=Saa.innerHTML,Vaa=Taa.innerHTML;return Vaa.localeCompare(Uaa)},orderbynum:function(Waa,Xaa){var Yaa=Waa[browser.ie?"innerText":"textContent"].match(/\d+/),Zaa=Xaa[browser.ie?"innerText":"textContent"].match(/\d+/);if(Yaa)Yaa=+Yaa[0];if(Zaa)Zaa=+Zaa[0];return(Yaa||0)-(Zaa||0)},reversebynum:function($aa,_aa){var a0a=$aa[browser.ie?"innerText":"textContent"].match(/\d+/),b0a=_aa[browser.ie?"innerText":"textContent"].match(/\d+/);if(a0a)a0a=+a0a[0];if(b0a)b0a=+b0a[0];return(b0a||0)-(a0a||0)}};Aaa.setAttribute("data-sort-type",zaa&&typeof zaa==="string"&&Iaa[zaa]?zaa:"");Daa&&Caa.splice(0,1);Caa=utils.sort(Caa,function(c0a,d0a){var e0a;if(zaa&&typeof zaa==="function"){e0a=zaa.call(this,c0a.cells[yaa],d0a.cells[yaa])}else if(zaa&&typeof zaa==="number"){e0a=1}else if(zaa&&typeof zaa==="string"&&Iaa[zaa]){e0a=Iaa[zaa].call(this,c0a.cells[yaa],d0a.cells[yaa])}else{e0a=Iaa["orderbyasc"].call(this,c0a.cells[yaa],d0a.cells[yaa])}return e0a});var Jaa=Aaa.ownerDocument.createDocumentFragment();for(var Kaa=0,Gaa=Caa.length;Kaa<Gaa;Kaa++){Jaa.appendChild(Caa[Kaa])}var Laa=Aaa.getElementsByTagName("tbody")[0];if(!Eaa){Laa.appendChild(Jaa)}else{Laa.insertBefore(Jaa,Baa[Eaa-Faa.endRowIndex+Faa.beginRowIndex-1])}};UE.plugins["tablesort"]=function(){var f0a=this,g0a=UE.UETable,h0a=function(j0a){return g0a.getUETable(j0a)},i0a=function(k0a){return g0a.getTableItemsByRange(k0a)};f0a.ready(function(){utils.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;"+"   background-image:url("+f0a.options.themePath+f0a.options.theme+"/images/sortable.png);}",f0a.document);f0a.addListener("afterexeccommand",function(l0a,m0a){if(m0a=="mergeright"||m0a=="mergedown"||m0a=="mergecells"){this.execCommand("disablesort")}})});UE.commands["sorttable"]={queryCommandState:function(){var n0a=this,o0a=i0a(n0a);if(!o0a.cell)return-1;var p0a=o0a.table,q0a=p0a.getElementsByTagName("td");for(var r0a=0,s0a;s0a=q0a[r0a++];){if(s0a.rowSpan!=1||s0a.colSpan!=1)return-1}return 0},execCommand:function(t0a,u0a){var v0a=this,w0a=v0a.selection.getRange(),x0a=w0a.createBookmark(true),y0a=i0a(v0a),z0a=y0a.cell,A0a=h0a(y0a.table),B0a=A0a.getCellInfo(z0a);A0a.sortTable(B0a.cellIndex,u0a);w0a.moveToBookmark(x0a);try{w0a.select()}catch(C0a){}}};UE.commands["enablesort"]=UE.commands["disablesort"]={queryCommandState:function(D0a){var E0a=i0a(this).table;if(E0a&&D0a=="enablesort"){var F0a=domUtils.getElementsByTagName(E0a,"th td");for(var G0a=0;G0a<F0a.length;G0a++){if(F0a[G0a].getAttribute("colspan")>1||F0a[G0a].getAttribute("rowspan")>1)return-1}}return!E0a?-1:D0a=="enablesort"^E0a.getAttribute("data-sort")!="sortEnabled"?-1:0},execCommand:function(H0a){var I0a=i0a(this).table;I0a.setAttribute("data-sort",H0a=="enablesort"?"sortEnabled":"sortDisabled");H0a=="enablesort"?domUtils.addClass(I0a,"sortEnabled"):domUtils.removeClasses(I0a,"sortEnabled")}}};UE.plugins["contextmenu"]=function(){var J0a=this;J0a.setOpt("enableContextMenu",true);if(J0a.getOpt("enableContextMenu")===false){return}var K0a=J0a.getLang("contextMenu"),L0a,M0a=J0a.options.contextMenu||[{label:K0a["selectall"],cmdName:"selectall"},{label:K0a.cleardoc,cmdName:"cleardoc",exec:function(){if(confirm(K0a.confirmclear)){this.execCommand("cleardoc")}}},"-",{label:K0a.unlink,cmdName:"unlink"},"-",{group:K0a.paragraph,icon:"justifyjustify",subMenu:[{label:K0a.justifyleft,cmdName:"justify",value:"left"},{label:K0a.justifyright,cmdName:"justify",value:"right"},{label:K0a.justifycenter,cmdName:"justify",value:"center"},{label:K0a.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:K0a.table,icon:"table",subMenu:[{label:K0a.inserttable,cmdName:"inserttable"},{label:K0a.deletetable,cmdName:"deletetable"},"-",{label:K0a.deleterow,cmdName:"deleterow"},{label:K0a.deletecol,cmdName:"deletecol"},{label:K0a.insertcol,cmdName:"insertcol"},{label:K0a.insertcolnext,cmdName:"insertcolnext"},{label:K0a.insertrow,cmdName:"insertrow"},{label:K0a.insertrownext,cmdName:"insertrownext"},"-",{label:K0a.insertcaption,cmdName:"insertcaption"},{label:K0a.deletecaption,cmdName:"deletecaption"},{label:K0a.inserttitle,cmdName:"inserttitle"},{label:K0a.deletetitle,cmdName:"deletetitle"},{label:K0a.inserttitlecol,cmdName:"inserttitlecol"},{label:K0a.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:K0a.mergecells,cmdName:"mergecells"},{label:K0a.mergeright,cmdName:"mergeright"},{label:K0a.mergedown,cmdName:"mergedown"},"-",{label:K0a.splittorows,cmdName:"splittorows"},{label:K0a.splittocols,cmdName:"splittocols"},{label:K0a.splittocells,cmdName:"splittocells"},"-",{label:K0a.averageDiseRow,cmdName:"averagedistributerow"},{label:K0a.averageDisCol,cmdName:"averagedistributecol"},"-",{label:K0a.edittd,cmdName:"edittd",exec:function(){if(UE.ui["edittd"]){new UE.ui["edittd"](this)}this.getDialog("edittd").open()}},{label:K0a.edittable,cmdName:"edittable",exec:function(){if(UE.ui["edittable"]){new UE.ui["edittable"](this)}this.getDialog("edittable").open()}},{label:K0a.setbordervisible,cmdName:"setbordervisible"}]},{group:K0a.tablesort,icon:"tablesort",subMenu:[{label:K0a.enablesort,cmdName:"enablesort"},{label:K0a.disablesort,cmdName:"disablesort"},"-",{label:K0a.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:K0a.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:K0a.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:K0a.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:K0a.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:K0a.borderbk,icon:"borderBack",subMenu:[{label:K0a.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:K0a.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:K0a.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["#bbb","#ccc"]})}},{label:K0a.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:K0a.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["red","blue"]})}},{label:K0a.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:K0a.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:K0a.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:K0a.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:K0a.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:K0a.tableright,value:"right"}]},"-",{label:K0a.insertparagraphbefore,cmdName:"insertparagraph",value:true},{label:K0a.insertparagraphafter,cmdName:"insertparagraph"},{label:K0a["copy"],cmdName:"copy"},{label:K0a["paste"],cmdName:"paste"}];if(!M0a.length){return}var N0a=UE.ui.uiUtils;J0a.addListener("contextmenu",function(O0a,P0a){var Q0a=N0a.getViewportOffsetByEvent(P0a);J0a.fireEvent("beforeselectionchange");if(L0a){L0a.destroy()}for(var R0a=0,S0a,T0a=[];S0a=M0a[R0a];R0a++){var U0a;(function(X0a){if(X0a=="-"){if((U0a=T0a[T0a.length-1])&&U0a!=="-"){T0a.push("-")}}else if(X0a.hasOwnProperty("group")){for(var Y0a=0,Z0a,$0a=[];Z0a=X0a.subMenu[Y0a];Y0a++){(function(aba){if(aba=="-"){if((U0a=$0a[$0a.length-1])&&U0a!=="-"){$0a.push("-")}else{$0a.splice($0a.length-1)}}else{if((J0a.commands[aba.cmdName]||UE.commands[aba.cmdName]||aba.query)&&(aba.query?aba.query():J0a.queryCommandState(aba.cmdName))>-1){$0a.push({label:aba.label||J0a.getLang("contextMenu."+aba.cmdName+(aba.value||""))||"",className:"edui-for-"+aba.cmdName+(aba.className?" edui-for-"+aba.cmdName+"-"+aba.className:""),onclick:aba.exec?function(){aba.exec.call(J0a)}:function(){J0a.execCommand(aba.cmdName,aba.value)}})}}})(Z0a)}if($0a.length){function _0a(){switch(X0a.icon){case"table":return J0a.getLang("contextMenu.table");case"justifyjustify":return J0a.getLang("contextMenu.paragraph");case"aligntd":return J0a.getLang("contextMenu.aligntd");case"aligntable":return J0a.getLang("contextMenu.aligntable");case"tablesort":return K0a.tablesort;case"borderBack":return K0a.borderbk;default:return""}}T0a.push({label:_0a(),className:"edui-for-"+X0a.icon,subMenu:{items:$0a,editor:J0a}})}}else{if((J0a.commands[X0a.cmdName]||UE.commands[X0a.cmdName]||X0a.query)&&(X0a.query?X0a.query.call(J0a):J0a.queryCommandState(X0a.cmdName))>-1){T0a.push({label:X0a.label||J0a.getLang("contextMenu."+X0a.cmdName),className:"edui-for-"+(X0a.icon?X0a.icon:X0a.cmdName+(X0a.value||"")),onclick:X0a.exec?function(){X0a.exec.call(J0a)}:function(){J0a.execCommand(X0a.cmdName,X0a.value)}})}}})(S0a)}if(T0a[T0a.length-1]=="-"){T0a.pop()}L0a=new UE.ui.Menu({items:T0a,className:"edui-contextmenu",editor:J0a});L0a.render();L0a.showAt(Q0a);J0a.fireEvent("aftershowcontextmenu",L0a);domUtils.preventDefault(P0a);if(browser.ie){var V0a;try{V0a=J0a.selection.getNative().createRange()}catch(bba){return}if(V0a.item){var W0a=new dom.Range(J0a.document);W0a.selectNode(V0a.item(0)).select(true,true)}}});J0a.addListener("aftershowcontextmenu",function(cba,dba){if(J0a.zeroclipboard){var eba=dba.items;for(var fba in eba){if(eba[fba].className=="edui-for-copy"){J0a.zeroclipboard.clip(eba[fba].getDom())}}}})};UE.plugins["shortcutmenu"]=function(){var gba=this,hba,iba=gba.options.shortcutMenu||[];if(!iba.length){return}gba.addListener("contextmenu mouseup",function(jba,kba){var lba=this,mba={type:jba,target:kba.target||kba.srcElement,screenX:kba.screenX,screenY:kba.screenY,clientX:kba.clientX,clientY:kba.clientY};setTimeout(function(){var pba=lba.selection.getRange();if(pba.collapsed===false||jba=="contextmenu"){if(!hba){hba=new baidu.editor.ui.ShortCutMenu({editor:lba,items:iba,theme:lba.options.theme,className:"edui-shortcutmenu"});hba.render();lba.fireEvent("afterrendershortcutmenu",hba)}hba.show(mba,!!UE.plugins["contextmenu"])}});if(jba=="contextmenu"){domUtils.preventDefault(kba);if(browser.ie9below){var nba;try{nba=lba.selection.getNative().createRange()}catch(kba){return}if(nba.item){var oba=new dom.Range(lba.document);oba.selectNode(nba.item(0)).select(true,true)}}}});gba.addListener("keydown",function(qba){if(qba=="keydown"){hba&&!hba.isHidden&&hba.hide()}})};UE.plugins["basestyle"]=function(){var rba={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},sba=function(vba,wba){return domUtils.filterNodeList(vba.selection.getStartElementPath(),wba)},tba=this;tba.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"});tba.addInputRule(function(xba){utils.each(xba.getNodesByTagName("b i"),function(yba){switch(yba.tagName){case"b":yba.tagName="strong";break;case"i":yba.tagName="em"}})});for(var uba in rba){(function(zba,Aba){tba.commands[zba]={execCommand:function(Bba){var Cba=tba.selection.getRange(),Dba=sba(this,Aba);if(Cba.collapsed){if(Dba){var Eba=tba.document.createTextNode("");Cba.insertNode(Eba).removeInlineStyle(Aba);Cba.setStartBefore(Eba);domUtils.remove(Eba)}else{var Fba=Cba.document.createElement(Aba[0]);if(Bba=="superscript"||Bba=="subscript"){Eba=tba.document.createTextNode("");Cba.insertNode(Eba).removeInlineStyle(["sub","sup"]).setStartBefore(Eba).collapse(true)}Cba.insertNode(Fba).setStart(Fba,0)}Cba.collapse(true)}else{if(Bba=="superscript"||Bba=="subscript"){if(!Dba||Dba.tagName.toLowerCase()!=Bba){Cba.removeInlineStyle(["sub","sup"])}}Dba?Cba.removeInlineStyle(Aba):Cba.applyInlineStyle(Aba[0])}Cba.select()},queryCommandState:function(){return sba(this,Aba)?1:0}}})(uba,rba[uba])}};UE.plugins["elementpath"]=function(){var Gba,Hba,Iba=this;Iba.setOpt("elementPathEnabled",true);if(!Iba.options.elementPathEnabled){return}Iba.commands["elementpath"]={execCommand:function(Jba,Kba){var Lba=Hba[Kba],Mba=Iba.selection.getRange();Gba=Kba*1;Mba.selectNode(Lba).select()},queryCommandValue:function(){var Nba=[].concat(this.selection.getStartElementPath()).reverse(),Oba=[];Hba=Nba;for(var Pba=0,Qba;Qba=Nba[Pba];Pba++){if(Qba.nodeType==3){continue}var Rba=Qba.tagName.toLowerCase();if(Rba=="img"&&Qba.getAttribute("anchorname")){Rba="anchor"}Oba[Pba]=Rba;if(Gba==Pba){Gba=-1;break}}return Oba}}};UE.plugins["formatmatch"]=function(){var Sba=this,Tba=[],Uba,Vba=0;Sba.addListener("reset",function(){Tba=[];Vba=0});function Wba(Xba,Yba){if(browser.webkit){var Zba=Yba.target.tagName=="IMG"?Yba.target:null}function $ba(e1a){if(c1a){e1a.selectNode(c1a)}return e1a.applyInlineStyle(Tba[Tba.length-1].tagName,null,Tba)}Sba.undoManger&&Sba.undoManger.save();var _ba=Sba.selection.getRange(),a1a=Zba||_ba.getClosedNode();if(Uba&&a1a&&a1a.tagName=="IMG"){a1a.style.cssText+=";float:"+(Uba.style.cssFloat||Uba.style.styleFloat||"none")+";display:"+(Uba.style.display||"inline");Uba=null}else{if(!Uba){var b1a=_ba.collapsed;if(b1a){var c1a=Sba.document.createTextNode("match");_ba.insertNode(c1a).select()}Sba.__hasEnterExecCommand=true;var d1a=Sba.options.removeFormatAttributes;Sba.options.removeFormatAttributes="";Sba.execCommand("removeformat");Sba.options.removeFormatAttributes=d1a;Sba.__hasEnterExecCommand=false;_ba=Sba.selection.getRange();if(Tba.length){$ba(_ba)}if(c1a){_ba.setStartBefore(c1a).collapse(true)}_ba.select();c1a&&domUtils.remove(c1a)}}Sba.undoManger&&Sba.undoManger.save();Sba.removeListener("mouseup",Wba);Vba=0}Sba.commands["formatmatch"]={execCommand:function(f1a){if(Vba){Vba=0;Tba=[];Sba.removeListener("mouseup",Wba);return}var g1a=Sba.selection.getRange();Uba=g1a.getClosedNode();if(!Uba||Uba.tagName!="IMG"){g1a.collapse(true).shrinkBoundary();var h1a=g1a.startContainer;Tba=domUtils.findParents(h1a,true,function(k1a){return!domUtils.isBlockElm(k1a)&&k1a.nodeType==1});for(var i1a=0,j1a;j1a=Tba[i1a];i1a++){if(j1a.tagName=="A"){Tba.splice(i1a,1);break}}}Sba.addListener("mouseup",Wba);Vba=1},queryCommandState:function(){return Vba},notNeedUndo:1}};UE.plugin.register("searchreplace",function(){var l1a=this;var m1a={table:1,tbody:1,tr:1,ol:1,ul:1};function n1a(s1a,t1a,u1a){var v1a=t1a.searchStr;if(t1a.dir==-1){s1a=s1a.split("").reverse().join("");v1a=v1a.split("").reverse().join("");u1a=s1a.length-u1a}var w1a=new RegExp(v1a,"g"+(t1a.casesensitive?"":"i")),x1a;while(x1a=w1a.exec(s1a)){if(x1a.index>=u1a){return t1a.dir==-1?s1a.length-x1a.index-t1a.searchStr.length:x1a.index}}return-1}function o1a(y1a,z1a,A1a){var B1a,C1a,D1a=A1a.all||A1a.dir==1?"getNextDomNode":"getPreDomNode";if(domUtils.isBody(y1a)){y1a=y1a.firstChild}var E1a=1;while(y1a){B1a=y1a.nodeType==3?y1a.nodeValue:y1a[browser.ie?"innerText":"textContent"];C1a=n1a(B1a,A1a,z1a);E1a=0;if(C1a!=-1){return{node:y1a,index:C1a}}y1a=domUtils[D1a](y1a);while(y1a&&m1a[y1a.nodeName.toLowerCase()]){y1a=domUtils[D1a](y1a,true)}if(y1a){z1a=A1a.dir==-1?(y1a.nodeType==3?y1a.nodeValue:y1a[browser.ie?"innerText":"textContent"]).length:0}}}function p1a(F1a,G1a,H1a){var I1a=0,J1a=F1a.firstChild,K1a=0,L1a;while(J1a){if(J1a.nodeType==3){K1a=J1a.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length;I1a+=K1a;if(I1a>=G1a){return{node:J1a,index:K1a-(I1a-G1a)}}}else if(!dtd.$empty[J1a.tagName]){K1a=J1a[browser.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length;I1a+=K1a;if(I1a>=G1a){L1a=p1a(J1a,K1a-(I1a-G1a),H1a);if(L1a){return L1a}}}J1a=domUtils.getNextDomNode(J1a)}}function q1a(M1a,N1a){var O1a=M1a.selection.getRange(),P1a,Q1a=N1a.searchStr,R1a=M1a.document.createElement("span");R1a.innerHTML="$$ueditor_searchreplace_key$$";O1a.shrinkBoundary(true);if(!O1a.collapsed){O1a.select();var S1a=M1a.selection.getText();if(new RegExp("^"+N1a.searchStr+"$",N1a.casesensitive?"":"i").test(S1a)){if(N1a.replaceStr!=undefined){r1a(O1a,N1a.replaceStr);O1a.select();return true}else{O1a.collapse(N1a.dir==-1)}}}O1a.insertNode(R1a);O1a.enlargeToBlockElm(true);P1a=O1a.startContainer;var T1a=P1a[browser.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");O1a.setStartBefore(R1a);domUtils.remove(R1a);var U1a=o1a(P1a,T1a,N1a);if(U1a){var V1a=p1a(U1a.node,U1a.index,Q1a);var W1a=p1a(U1a.node,U1a.index+Q1a.length,Q1a);O1a.setStart(V1a.node,V1a.index).setEnd(W1a.node,W1a.index);if(N1a.replaceStr!==undefined){r1a(O1a,N1a.replaceStr)}O1a.select();return true}else{O1a.setCursor()}}function r1a(X1a,Y1a){Y1a=l1a.document.createTextNode(Y1a);X1a.deleteContents().insertNode(Y1a)}return{commands:{searchreplace:{execCommand:function(Z1a,$1a){utils.extend($1a,{all:false,casesensitive:false,dir:1},true);var _1a=0;if($1a.all){var aca=l1a.selection.getRange(),bca=l1a.body.firstChild;if(bca&&bca.nodeType==1){aca.setStart(bca,0);aca.shrinkBoundary(true)}else if(bca.nodeType==3){aca.setStartBefore(bca)}aca.collapse(true).select(true);if($1a.replaceStr!==undefined){l1a.fireEvent("saveScene")}while(q1a(this,$1a)){_1a++}if(_1a){l1a.fireEvent("saveScene")}}else{if($1a.replaceStr!==undefined){l1a.fireEvent("saveScene")}if(q1a(this,$1a)){_1a++}if(_1a){l1a.fireEvent("saveScene")}}return _1a},notNeedUndo:1}}}});UE.plugins["customstyle"]=function(){var cca=this;cca.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]});cca.commands["customstyle"]={execCommand:function(dca,eca){var fca=this,gca=eca.tag,hca=domUtils.findParent(fca.selection.getStart(),function(uca){return uca.getAttribute("label")},true),ica,jca,kca={};for(var lca in eca){if(eca[lca]!==undefined)kca[lca]=eca[lca]}delete kca.tag;if(hca&&hca.getAttribute("label")==eca.label){ica=this.selection.getRange();jca=ica.createBookmark();if(ica.collapsed){if(dtd.$block[hca.tagName]){var mca=fca.document.createElement("p");domUtils.moveChild(hca,mca);hca.parentNode.insertBefore(mca,hca);domUtils.remove(hca)}else{domUtils.remove(hca,true)}}else{var nca=domUtils.getCommonAncestor(jca.start,jca.end),oca=domUtils.getElementsByTagName(nca,gca);if(new RegExp(gca,"i").test(nca.tagName)){oca.push(nca)}for(var pca=0,qca;qca=oca[pca++];){if(qca.getAttribute("label")==eca.label){var rca=domUtils.getPosition(qca,jca.start),sca=domUtils.getPosition(qca,jca.end);if((rca&domUtils.POSITION_FOLLOWING||rca&domUtils.POSITION_CONTAINS)&&(sca&domUtils.POSITION_PRECEDING||sca&domUtils.POSITION_CONTAINS))if(dtd.$block[gca]){var mca=fca.document.createElement("p");domUtils.moveChild(qca,mca);qca.parentNode.insertBefore(mca,qca)}domUtils.remove(qca,true)}}hca=domUtils.findParent(nca,function(vca){return vca.getAttribute("label")==eca.label},true);if(hca){domUtils.remove(hca,true)}}ica.moveToBookmark(jca).select()}else{if(dtd.$block[gca]){this.execCommand("paragraph",gca,kca,"customstyle");ica=fca.selection.getRange();if(!ica.collapsed){ica.collapse();hca=domUtils.findParent(fca.selection.getStart(),function(wca){return wca.getAttribute("label")==eca.label},true);var tca=fca.document.createElement("p");domUtils.insertAfter(hca,tca);domUtils.fillNode(fca.document,tca);ica.setStart(tca,0).setCursor()}}else{ica=fca.selection.getRange();if(ica.collapsed){hca=fca.document.createElement(gca);domUtils.setAttributes(hca,kca);ica.insertNode(hca).setStart(hca,0).setCursor();return}jca=ica.createBookmark();ica.applyInlineStyle(gca,kca).moveToBookmark(jca).select()}}},queryCommandValue:function(){var xca=domUtils.filterNodeList(this.selection.getStartElementPath(),function(yca){return yca.getAttribute("label")});return xca?xca.getAttribute("label"):""}};cca.addListener("keyup",function(zca,Aca){var Bca=Aca.keyCode||Aca.which;if(Bca==32||Bca==13){var Cca=cca.selection.getRange();if(Cca.collapsed){var Dca=domUtils.findParent(cca.selection.getStart(),function(Fca){return Fca.getAttribute("label")},true);if(Dca&&dtd.$block[Dca.tagName]&&domUtils.isEmptyNode(Dca)){var Eca=cca.document.createElement("p");domUtils.insertAfter(Dca,Eca);domUtils.fillNode(cca.document,Eca);domUtils.remove(Dca);Cca.setStart(Eca,0).setCursor()}}}})};UE.plugins["catchremoteimage"]=function(){var me=this,ajax=UE.ajax;if(me.options.catchRemoteImageEnable===false)return;me.setOpt({catchRemoteImageEnable:false});me.addListener("afterpaste",function(){me.fireEvent("catchRemoteImage")});me.addListener("catchRemoteImage",function(){var catcherLocalDomain=me.getOpt("catcherLocalDomain"),catcherActionUrl=me.getActionUrl(me.getOpt("catcherActionName")),catcherUrlPrefix=me.getOpt("catcherUrlPrefix"),catcherFieldName=me.getOpt("catcherFieldName");var remoteImages=[],imgs=domUtils.getElementsByTagName(me.document,"img"),test=function(Gca,Hca){if(Gca.indexOf(location.host)!=-1||/(^\.)|(^\/)/.test(Gca)){return true}if(Hca){for(var Ica=0,Jca;Jca=Hca[Ica++];){if(Gca.indexOf(Jca)!==-1){return true}}}return false};for(var i=0,ci;ci=imgs[i++];){if(ci.getAttribute("word_img")){continue}var src=ci.getAttribute("_src")||ci.src||"";if(/^(https?|ftp):/i.test(src)&&!test(src,catcherLocalDomain)){remoteImages.push(src)}}if(remoteImages.length){catchremoteimage(remoteImages,{success:function(r){try{var info=r.state!==undefined?r:eval("("+r.responseText+")")}catch(e){return}var i,j,ci,cj,oldSrc,newSrc,list=info.list;for(i=0;ci=imgs[i++];){oldSrc=ci.getAttribute("_src")||ci.src||"";for(j=0;cj=list[j++];){if(oldSrc==cj.source&&cj.state=="SUCCESS"){newSrc=catcherUrlPrefix+cj.url;domUtils.setAttributes(ci,{src:newSrc,_src:newSrc});break}}}me.fireEvent("catchremotesuccess")},error:function(){me.fireEvent("catchremoteerror")}})}function catchremoteimage(Kca,Lca){var Mca=utils.serializeParam(me.queryCommandValue("serverparam"))||"",Nca=utils.formatUrl(catcherActionUrl+(catcherActionUrl.indexOf("?")==-1?"?":"&")+Mca),Oca=utils.isCrossDomainUrl(Nca),Pca={method:"POST",dataType:Oca?"jsonp":"",timeout:6e4,onsuccess:Lca["success"],onerror:Lca["error"]};Pca[catcherFieldName]=Kca;ajax.request(Nca,Pca)}})};UE.plugin.register("snapscreen",function(){var me=this;var snapplugin;function getLocation(Qca){var Rca,Sca=document.createElement("a"),Tca=utils.serializeParam(me.queryCommandValue("serverparam"))||"";Sca.href=Qca;if(browser.ie){Sca.href=Sca.href}Rca=Sca.search;if(Tca){Rca=Rca+(Rca.indexOf("?")==-1?"?":"&")+Tca;Rca=Rca.replace(/[&]+/gi,"&")}return{port:Sca.port,hostname:Sca.hostname,path:Sca.pathname+Rca||+Sca.hash}}return{commands:{snapscreen:{execCommand:function(cmd){var url,local,res;var lang=me.getLang("snapScreen_plugin");if(!snapplugin){var container=me.container;var doc=me.container.ownerDocument||me.container.document;snapplugin=doc.createElement("object");try{snapplugin.type="application/x-pluginbaidusnap"}catch(e){return}snapplugin.style.cssText="position:absolute;left:-9999px;width:0;height:0;";snapplugin.setAttribute("width","0");snapplugin.setAttribute("height","0");container.appendChild(snapplugin)}function onSuccess(rs){try{rs=eval("("+rs+")");if(rs.state=="SUCCESS"){var opt=me.options;me.execCommand("insertimage",{src:opt.snapscreenUrlPrefix+rs.url,_src:opt.snapscreenUrlPrefix+rs.url,alt:rs.title||"",floatStyle:opt.snapscreenImgAlign})}else{alert(rs.state)}}catch(e){alert(lang.callBackErrorMsg)}}url=me.getActionUrl(me.getOpt("snapscreenActionName"));local=getLocation(url);setTimeout(function(){try{res=snapplugin.saveSnapshot(local.hostname,local.path,local.port)}catch(Uca){me.ui._dialogs["snapscreenDialog"].open();return}onSuccess(res)},50)},queryCommandState:function(){return navigator.userAgent.indexOf("Windows",0)!=-1?0:-1}}}}});UE.commands["insertparagraph"]={execCommand:function(Vca,Wca){var Xca=this,Yca=Xca.selection.getRange(),Zca=Yca.startContainer,$ca;while(Zca){if(domUtils.isBody(Zca)){break}$ca=Zca;Zca=Zca.parentNode}if($ca){var _ca=Xca.document.createElement("p");if(Wca){$ca.parentNode.insertBefore(_ca,$ca)}else{$ca.parentNode.insertBefore(_ca,$ca.nextSibling)}domUtils.fillNode(Xca.document,_ca);Yca.setStart(_ca,0).setCursor(false,true)}}};UE.plugin.register("webapp",function(){var a2a=this;function b2a(c2a,d2a){return!d2a?'<img title="'+c2a.title+'" width="'+c2a.width+'" height="'+c2a.height+'"'+' src="'+a2a.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+c2a.logo+'" style="background:url('+c2a.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+c2a.url+'" '+(c2a.align&&!c2a.cssfloat?'align="'+c2a.align+'"':"")+(c2a.cssfloat?'style="float:'+c2a.cssfloat+'"':"")+"/>":'<iframe class="edui-faked-webapp" title="'+c2a.title+'" '+(c2a.align&&!c2a.cssfloat?'align="'+c2a.align+'"':"")+(c2a.cssfloat?'style="float:'+c2a.cssfloat+'"':"")+'width="'+c2a.width+'" height="'+c2a.height+'"  scrolling="no" frameborder="0" src="'+c2a.url+'" logo_url = "'+c2a.logo+'"></iframe>'}return{outputRule:function(e2a){utils.each(e2a.getNodesByTagName("img"),function(f2a){var g2a;if(f2a.getAttr("class")=="edui-faked-webapp"){g2a=b2a({title:f2a.getAttr("title"),width:f2a.getAttr("width"),height:f2a.getAttr("height"),align:f2a.getAttr("align"),cssfloat:f2a.getStyle("float"),url:f2a.getAttr("_url"),logo:f2a.getAttr("_logo_url")},true);var h2a=UE.uNode.createElement(g2a);f2a.parentNode.replaceChild(h2a,f2a)}})},inputRule:function(i2a){utils.each(i2a.getNodesByTagName("iframe"),function(j2a){if(j2a.getAttr("class")=="edui-faked-webapp"){var k2a=UE.uNode.createElement(b2a({title:j2a.getAttr("title"),width:j2a.getAttr("width"),height:j2a.getAttr("height"),align:j2a.getAttr("align"),cssfloat:j2a.getStyle("float"),url:j2a.getAttr("src"),logo:j2a.getAttr("logo_url")}));j2a.parentNode.replaceChild(k2a,j2a)}})},commands:{webapp:{execCommand:function(l2a,m2a){var n2a=this,o2a=b2a(utils.extend(m2a,{align:"none"}),false);n2a.execCommand("inserthtml",o2a)},queryCommandState:function(){var p2a=this,q2a=p2a.selection.getRange().getClosedNode(),r2a=q2a&&q2a.className=="edui-faked-webapp";return r2a?1:0}}}}});UE.plugins["template"]=function(){UE.commands["template"]={execCommand:function(s2a,t2a){t2a.html&&this.execCommand("inserthtml",t2a.html)}};this.addListener("click",function(u2a,v2a){var w2a=v2a.target||v2a.srcElement,x2a=this.selection.getRange();var y2a=domUtils.findParent(w2a,function(z2a){if(z2a.className&&domUtils.hasClass(z2a,"ue_t")){return z2a}},true);y2a&&x2a.selectNode(y2a).shrinkBoundary().select()});this.addListener("keydown",function(A2a,B2a){var C2a=this.selection.getRange();if(!C2a.collapsed){if(!B2a.ctrlKey&&!B2a.metaKey&&!B2a.shiftKey&&!B2a.altKey){var D2a=domUtils.findParent(C2a.startContainer,function(E2a){if(E2a.className&&domUtils.hasClass(E2a,"ue_t")){return E2a}},true);if(D2a){domUtils.removeClasses(D2a,["ue_t"])}}}})};UE.plugin.register("music",function(){var F2a=this;function G2a(H2a,I2a,J2a,K2a,L2a,M2a){return!M2a?"<img "+(K2a&&!L2a?'align="'+K2a+'"':"")+(L2a?'style="float:'+L2a+'"':"")+' width="'+I2a+'" height="'+J2a+'" _url="'+H2a+'" class="edui-faked-music"'+' src="'+F2a.options.langPath+F2a.options.lang+'/images/music.png" />':'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer"'+' src="'+H2a+'" width="'+I2a+'" height="'+J2a+'" '+(K2a&&!L2a?'align="'+K2a+'"':"")+(L2a?'style="float:'+L2a+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >'}return{outputRule:function(N2a){utils.each(N2a.getNodesByTagName("img"),function(O2a){var P2a;if(O2a.getAttr("class")=="edui-faked-music"){var Q2a=O2a.getStyle("float");var R2a=O2a.getAttr("align");P2a=G2a(O2a.getAttr("_url"),O2a.getAttr("width"),O2a.getAttr("height"),R2a,Q2a,true);var S2a=UE.uNode.createElement(P2a);O2a.parentNode.replaceChild(S2a,O2a)}})},inputRule:function(T2a){utils.each(T2a.getNodesByTagName("embed"),function(U2a){if(U2a.getAttr("class")=="edui-faked-music"){var V2a=U2a.getStyle("float");var W2a=U2a.getAttr("align");html=G2a(U2a.getAttr("src"),U2a.getAttr("width"),U2a.getAttr("height"),W2a,V2a,false);var X2a=UE.uNode.createElement(html);U2a.parentNode.replaceChild(X2a,U2a)}})},commands:{music:{execCommand:function(Y2a,Z2a){var $2a=this,_2a=G2a(Z2a.url,Z2a.width||400,Z2a.height||95,"none",false);$2a.execCommand("inserthtml",_2a)},queryCommandState:function(){var ada=this,bda=ada.selection.getRange().getClosedNode(),cda=bda&&bda.className=="edui-faked-music";return cda?1:0}}}}});UE.plugin.register("autoupload",function(){function dda(gda,hda){var ida=hda;var jda,kda,lda,mda,nda,oda,pda,qda,rda=/image\/\w+/i.test(gda.type)?"image":"file",sda="loading_"+(+new Date).toString(36);jda=ida.getOpt(rda+"FieldName");kda="";lda=ida.getOpt(rda+"MaxSize");mda=ida.getOpt(rda+"AllowFiles");nda=ida.getActionUrl(ida.getOpt(rda+"ActionName"));pda=function(yda){var zda=ida.document.getElementById(sda);zda&&domUtils.remove(zda);ida.fireEvent("showmessage",{id:sda,content:yda,type:"error",timeout:4e3})};if(rda=="image"){oda='<img class="loadingclass" id="'+sda+'" src="'+ida.options.themePath+ida.options.theme+'/images/spacer.gif" title="'+(ida.getLang("autoupload.loading")||"")+'" >';qda=function(Ada){var Bda=kda+Ada.url,Cda=ida.document.getElementById(sda);if(Cda){Cda.setAttribute("src",Bda);Cda.setAttribute("_src",Bda);Cda.setAttribute("title",Ada.title||"");Cda.setAttribute("alt",Ada.original||"");Cda.removeAttribute("id");domUtils.removeClasses(Cda,"loadingclass")}}}else{oda="<p>"+'<img class="loadingclass" id="'+sda+'" src="'+ida.options.themePath+ida.options.theme+'/images/spacer.gif" title="'+(ida.getLang("autoupload.loading")||"")+'" >'+"</p>";qda=function(Dda){var Eda=kda+Dda.url,Fda=ida.document.getElementById(sda);var Gda=ida.selection.getRange(),Hda=Gda.createBookmark();Gda.selectNode(Fda).select();ida.execCommand("insertfile",{url:Eda});Gda.moveToBookmark(Hda).select()}}ida.execCommand("inserthtml",oda);if(gda.size>lda){pda(ida.getLang("autoupload.exceedSizeError"));return}var tda=gda.name?gda.name.substr(gda.name.lastIndexOf(".")):"";if(tda&&rda!="image"||mda&&(mda.join("")+".").indexOf(tda.toLowerCase()+".")==-1){pda(ida.getLang("autoupload.exceedTypeError"));return}var uda=new XMLHttpRequest,vda=new FormData,wda=utils.serializeParam(ida.queryCommandValue("serverparam"))||"",xda=utils.formatUrl(nda+(nda.indexOf("?")==-1?"?":"&")+wda);vda.append(jda,gda,gda.name||"blob."+gda.type.substr("image/".length));vda.append("type","ajax");uda.open("post",xda,true);uda.setRequestHeader("X-Requested-With","XMLHttpRequest");uda.addEventListener("load",function(Ida){try{var Jda=new Function("return "+utils.trim(Ida.target.response))();if(Jda.state=="SUCCESS"&&Jda.url){qda(Jda)}else{pda(Jda.state)}}catch(Kda){pda(ida.getLang("autoupload.loadError"))}});uda.send(vda)}function eda(Lda){return Lda.clipboardData&&Lda.clipboardData.items&&Lda.clipboardData.items.length==1&&/^image\//.test(Lda.clipboardData.items[0].type)?Lda.clipboardData.items:null}function fda(Mda){return Mda.dataTransfer&&Mda.dataTransfer.files?Mda.dataTransfer.files:null}return{outputRule:function(Nda){utils.each(Nda.getNodesByTagName("img"),function(Oda){if(/\b(loaderrorclass)|(bloaderrorclass)\b/.test(Oda.getAttr("class"))){Oda.parentNode.removeChild(Oda)}});utils.each(Nda.getNodesByTagName("p"),function(Pda){if(/\bloadpara\b/.test(Pda.getAttr("class"))){Pda.parentNode.removeChild(Pda)}})},bindEvents:{ready:function(Qda){var Rda=this;if(window.FormData&&window.FileReader){domUtils.on(Rda.body,"paste drop",function(Sda){var Tda=false,Uda;Uda=Sda.type=="paste"?eda(Sda):fda(Sda);if(Uda){var Vda=Uda.length,Wda;while(Vda--){Wda=Uda[Vda];if(Wda.getAsFile)Wda=Wda.getAsFile();if(Wda&&Wda.size>0){dda(Wda,Rda);Tda=true}}Tda&&Sda.preventDefault()}});domUtils.on(Rda.body,"dragover",function(Xda){if(Xda.dataTransfer.types[0]=="Files"){Xda.preventDefault()}});utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n"+".loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;"+"}",this.document)}}}}});UE.plugin.register("autosave",function(){var Yda=this,Zda=new Date,$da=20,_da=null;function a3a(b3a){var c3a;if(new Date-Zda<$da){return}if(!b3a.hasContents()){_da&&Yda.removePreferences(_da);return}Zda=new Date;b3a._saveFlag=null;c3a=Yda.body.innerHTML;if(b3a.fireEvent("beforeautosave",{content:c3a})===false){return}Yda.setPreferences(_da,c3a);b3a.fireEvent("afterautosave",{content:c3a})}return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var d3a="-drafts-data",e3a=null;if(Yda.key){e3a=Yda.key+d3a}else{e3a=(Yda.container.parentNode.id||"ue-common")+d3a}_da=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+e3a},contentchange:function(){if(!_da){return}if(Yda._saveFlag){window.clearTimeout(Yda._saveFlag)}if(Yda.options.saveInterval>0){Yda._saveFlag=window.setTimeout(function(){a3a(Yda)},Yda.options.saveInterval)}else{a3a(Yda)}}},commands:{clearlocaldata:{execCommand:function(f3a,g3a){if(_da&&Yda.getPreferences(_da)){Yda.removePreferences(_da)}},notNeedUndo:true,ignoreContentChange:true},getlocaldata:{execCommand:function(h3a,i3a){return _da?Yda.getPreferences(_da)||"":""},notNeedUndo:true,ignoreContentChange:true},drafts:{execCommand:function(j3a,k3a){if(_da){Yda.body.innerHTML=Yda.getPreferences(_da)||"<p>"+domUtils.fillHtml+"</p>";Yda.focus(true)}},queryCommandState:function(){return _da?Yda.getPreferences(_da)===null?-1:0:-1},notNeedUndo:true,ignoreContentChange:true}}}});UE.plugin.register("charts",function(){var l3a=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(n3a,o3a){var p3a=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",true),q3a=[],r3a={};if(!p3a){return false}if(!m3a(p3a)){l3a.fireEvent("chartserror");return false}r3a.title=o3a.title||"";r3a.subTitle=o3a.subTitle||"";r3a.xTitle=o3a.xTitle||"";r3a.yTitle=o3a.yTitle||"";r3a.suffix=o3a.suffix||"";r3a.tip=o3a.tip||"";r3a.dataFormat=o3a.tableDataFormat||"";r3a.chartType=o3a.chartType||0;for(var s3a in r3a){if(!r3a.hasOwnProperty(s3a)){continue}q3a.push(s3a+":"+r3a[s3a])}p3a.setAttribute("data-chart",q3a.join(";"));domUtils.addClass(p3a,"edui-charts-table")},queryCommandState:function(t3a,u3a){var v3a=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",true);return v3a&&m3a(v3a)?0:-1}}},inputRule:function(w3a){utils.each(w3a.getNodesByTagName("table"),function(x3a){if(x3a.getAttr("data-chart")!==undefined){x3a.setAttr("style")}})},outputRule:function(y3a){utils.each(y3a.getNodesByTagName("table"),function(z3a){if(z3a.getAttr("data-chart")!==undefined){z3a.setAttr("style","display: none;")}})}};function m3a(A3a){var B3a=null,C3a=0;if(A3a.rows.length<2){return false}if(A3a.rows[0].cells.length<2){return false}B3a=A3a.rows[0].cells;C3a=B3a.length;for(var D3a=0,E3a;E3a=B3a[D3a];D3a++){if(E3a.tagName.toLowerCase()!=="th"){return false}}for(var D3a=1,F3a;F3a=A3a.rows[D3a];D3a++){if(F3a.cells.length!=C3a){return false}if(F3a.cells[0].tagName.toLowerCase()!=="th"){return false}for(var G3a=1,E3a;E3a=F3a.cells[G3a];G3a++){var H3a=utils.trim(E3a.innerText||E3a.textContent||"");H3a=H3a.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,"");if(!/^\d*\.?\d+$/.test(H3a)){return false}}}return true}});UE.plugin.register("section",function(){function I3a(M3a){this.tag="";this.level=-1,this.dom=null;this.nextSection=null;this.previousSection=null;this.parentSection=null;this.startAddress=[];this.endAddress=[];this.children=[]}function J3a(N3a){var O3a=new I3a;return utils.extend(O3a,N3a)}function K3a(P3a,Q3a){var R3a=Q3a;for(var S3a=0;S3a<P3a.length;S3a++){if(!R3a.childNodes)return null;R3a=R3a.childNodes[P3a[S3a]]}return R3a}var L3a=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){L3a.fireEvent("updateSections")}},bindEvents:{ready:function(){L3a.fireEvent("updateSections");domUtils.on(L3a.body,"drop paste",function(){L3a.fireEvent("updateSections")})},afterexeccommand:function(T3a,U3a){if(U3a=="paragraph"){L3a.fireEvent("updateSections")}},keyup:function(V3a,W3a){var X3a=this,Y3a=X3a.selection.getRange();if(Y3a.collapsed!=true){X3a.fireEvent("updateSections")}else{var Z3a=W3a.keyCode||W3a.which;if(Z3a==13||Z3a==8||Z3a==46){X3a.fireEvent("updateSections")}}}},commands:{getsections:{execCommand:function($3a,_3a){var aea=_3a||["h1","h2","h3","h4","h5","h6"];for(var bea=0;bea<aea.length;bea++){if(typeof aea[bea]=="string"){aea[bea]=function(hea){return function(iea){return iea.tagName==hea.toUpperCase()}}(aea[bea])}else if(typeof aea[bea]!="function"){aea[bea]=function(jea){return null}}}function cea(kea){for(var lea=0;lea<aea.length;lea++){if(aea[lea](kea))return lea}return-1}var dea=this,eea=J3a({level:-1,title:"root"}),fea=eea;function gea(mea,nea){var oea,pea=null,qea,rea,sea=mea.childNodes;for(var tea=0,uea=sea.length;tea<uea;tea++){rea=sea[tea];oea=cea(rea);if(oea>=0){var vea=dea.selection.getRange().selectNode(rea).createAddress(true).startAddress,wea=J3a({tag:rea.tagName,title:rea.innerText||rea.textContent||"",level:oea,dom:rea,startAddress:utils.clone(vea,[]),endAddress:utils.clone(vea,[]),children:[]});fea.nextSection=wea;wea.previousSection=fea;qea=fea;while(oea<=qea.level){qea=qea.parentSection}wea.parentSection=qea;qea.children.push(wea);pea=fea=wea}else{rea.nodeType===1&&gea(rea,nea);pea&&pea.endAddress[pea.endAddress.length-1]++}}}gea(dea.body,eea);return eea},notNeedUndo:true},movesection:{execCommand:function(xea,yea,zea,Aea){var Bea=this,Cea,Dea;if(!yea||!zea||zea.level==-1)return;Cea=Aea?zea.endAddress:zea.startAddress;Dea=K3a(Cea,Bea.body);if(!Cea||!Dea||Iea(yea.startAddress,yea.endAddress,Cea))return;var Eea=K3a(yea.startAddress,Bea.body),Fea=K3a(yea.endAddress,Bea.body),Gea,Hea;if(Aea){Gea=Fea;while(Gea&&!(domUtils.getPosition(Eea,Gea)&domUtils.POSITION_FOLLOWING)){Hea=Gea.previousSibling;domUtils.insertAfter(Dea,Gea);if(Gea==Eea)break;Gea=Hea}}else{Gea=Eea;while(Gea&&!(domUtils.getPosition(Gea,Fea)&domUtils.POSITION_FOLLOWING)){Hea=Gea.nextSibling;Dea.parentNode.insertBefore(Gea,Dea);if(Gea==Fea)break;Gea=Hea}}Bea.fireEvent("updateSections");function Iea(Jea,Kea,Lea){var Mea=false,Nea=false;for(var Oea=0;Oea<Jea.length;Oea++){if(Oea>=Lea.length)break;if(Lea[Oea]>Jea[Oea]){Mea=true;break}else if(Lea[Oea]<Jea[Oea]){break}}for(var Oea=0;Oea<Kea.length;Oea++){if(Oea>=Lea.length)break;if(Lea[Oea]<Jea[Oea]){Nea=true;break}else if(Lea[Oea]>Jea[Oea]){break}}return Mea&&Nea}}},deletesection:{execCommand:function(Pea,Qea,Rea){var Sea=this;if(!Qea)return;function Tea(Yea){var Zea=Sea.body;for(var $ea=0;$ea<Yea.length;$ea++){if(!Zea.childNodes)return null;Zea=Zea.childNodes[Yea[$ea]]}return Zea}var Uea=Tea(Qea.startAddress),Vea=Tea(Qea.endAddress),Wea=Uea,Xea;if(!Rea){while(Wea&&domUtils.inDoc(Vea,Sea.document)&&!(domUtils.getPosition(Wea,Vea)&domUtils.POSITION_FOLLOWING)){Xea=Wea.nextSibling;domUtils.remove(Wea);Wea=Xea}}else{domUtils.remove(Wea)}Sea.fireEvent("updateSections")}},selectsection:{execCommand:function(_ea,a4a){if(!a4a&&!a4a.dom)return false;var b4a=this,c4a=b4a.selection.getRange(),d4a={startAddress:utils.clone(a4a.startAddress,[]),endAddress:utils.clone(a4a.endAddress,[])};d4a.endAddress[d4a.endAddress.length-1]++;c4a.moveToAddress(d4a).select().scrollToView();return true},notNeedUndo:true},scrolltosection:{execCommand:function(e4a,f4a){if(!f4a&&!f4a.dom)return false;var g4a=this,h4a=g4a.selection.getRange(),i4a={startAddress:f4a.startAddress,endAddress:f4a.endAddress};i4a.endAddress[i4a.endAddress.length-1]++;h4a.moveToAddress(i4a).scrollToView();return true},notNeedUndo:true}}}});UE.plugin.register("simpleupload",function(){var j4a=this,k4a=false,l4a;function m4a(){var n4a=l4a.offsetWidth||20,o4a=l4a.offsetHeight||20,p4a=document.createElement("iframe"),q4a="display:block;width:"+n4a+"px;height:"+o4a+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";domUtils.on(p4a,"load",function(){var r4a=(+new Date).toString(36),s4a,t4a,u4a;t4a=p4a.contentDocument||p4a.contentWindow.document;u4a=t4a.body;s4a=t4a.createElement("div");s4a.innerHTML='<form id="edui_form_'+r4a+'" target="edui_iframe_'+r4a+'" method="POST" enctype="multipart/form-data" action="'+j4a.getOpt("serverUrl")+'" '+'style="'+q4a+'">'+'<input id="edui_input_'+r4a+'" type="file" accept="image/*" name="'+j4a.options.imageFieldName+'" '+'style="'+q4a+'">'+"</form>"+'<iframe id="edui_iframe_'+r4a+'" name="edui_iframe_'+r4a+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>';s4a.className="edui-"+j4a.options.theme;s4a.id=j4a.ui.id+"_iframeupload";u4a.style.cssText=q4a;u4a.style.width=n4a+"px";u4a.style.height=o4a+"px";u4a.appendChild(s4a);if(u4a.parentNode){u4a.parentNode.style.width=n4a+"px";u4a.parentNode.style.height=n4a+"px"}var v4a=t4a.getElementById("edui_form_"+r4a);var w4a=t4a.getElementById("edui_input_"+r4a);var x4a=t4a.getElementById("edui_iframe_"+r4a);domUtils.on(w4a,"change",function(){if(!w4a.value)return;var z4a="loading_"+(+new Date).toString(36);var A4a=utils.serializeParam(j4a.queryCommandValue("serverparam"))||"";var B4a=j4a.getActionUrl(j4a.getOpt("imageActionName"));var C4a=j4a.getOpt("imageAllowFiles");j4a.focus();j4a.execCommand("inserthtml",'<img class="loadingclass" id="'+z4a+'" src="'+j4a.options.themePath+j4a.options.theme+'/images/spacer.gif" title="'+(j4a.getLang("simpleupload.loading")||"")+'" >');function D4a(){try{var H4a,I4a,J4a,K4a=(x4a.contentDocument||x4a.contentWindow.document).body,L4a=K4a.innerText||K4a.textContent||"";I4a=new Function("return "+L4a)();H4a=j4a.options.imageUrlPrefix+I4a.url;if(I4a.state=="SUCCESS"&&I4a.url){J4a=j4a.document.getElementById(z4a);J4a.setAttribute("src",H4a);J4a.setAttribute("_src",H4a);J4a.setAttribute("title",I4a.title||"");J4a.setAttribute("alt",I4a.original||"");J4a.removeAttribute("id");domUtils.removeClasses(J4a,"loadingclass")}else{E4a&&E4a(I4a.state)}}catch(M4a){E4a&&E4a(j4a.getLang("simpleupload.loadError"))}v4a.reset();domUtils.un(x4a,"load",D4a)}function E4a(N4a){if(z4a){var O4a=j4a.document.getElementById(z4a);O4a&&domUtils.remove(O4a);j4a.fireEvent("showmessage",{id:z4a,content:N4a,type:"error",timeout:4e3})}}if(!j4a.getOpt("imageActionName")){errorHandler(j4a.getLang("autoupload.errorLoadConfig"));return}var F4a=w4a.value,G4a=F4a?F4a.substr(F4a.lastIndexOf(".")):"";if(!G4a||C4a&&(C4a.join("")+".").indexOf(G4a.toLowerCase()+".")==-1){E4a(j4a.getLang("simpleupload.exceedTypeError"));return}domUtils.on(x4a,"load",D4a);v4a.action=utils.formatUrl(B4a+(B4a.indexOf("?")==-1?"?":"&")+A4a);v4a.submit()});var y4a;j4a.addListener("selectionchange",function(){clearTimeout(y4a);y4a=setTimeout(function(){var P4a=j4a.queryCommandState("simpleupload");if(P4a==-1){w4a.disabled="disabled"}else{w4a.disabled=false}},400)});k4a=true});p4a.style.cssText=q4a;l4a.appendChild(p4a)}return{bindEvents:{ready:function(){utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n"+".loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;"+"}",this.document)},simpleuploadbtnready:function(Q4a,R4a){l4a=R4a;j4a.afterConfigReady(m4a)}},outputRule:function(S4a){utils.each(S4a.getNodesByTagName("img"),function(T4a){if(/\b(loaderrorclass)|(bloaderrorclass)\b/.test(T4a.getAttr("class"))){T4a.parentNode.removeChild(T4a)}})},commands:{simpleupload:{queryCommandState:function(){return k4a?0:-1}}}}});UE.plugin.register("serverparam",function(){var U4a=this,V4a={};return{commands:{serverparam:{execCommand:function(W4a,X4a,Y4a){if(X4a===undefined||X4a===null){V4a={}}else if(utils.isString(X4a)){if(Y4a===undefined||Y4a===null){delete V4a[X4a]}else{V4a[X4a]=Y4a}}else if(utils.isObject(X4a)){utils.extend(V4a,X4a,true)}else if(utils.isFunction(X4a)){utils.extend(V4a,X4a(),true)}},queryCommandValue:function(){return V4a||{}}}}}});UE.plugin.register("insertfile",function(){var Z4a=this;function $4a(_4a){var afa=_4a.substr(_4a.lastIndexOf(".")+1).toLowerCase(),bfa={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"};return bfa[afa]?bfa[afa]:bfa["txt"]}return{commands:{insertfile:{execCommand:function(cfa,dfa){dfa=utils.isArray(dfa)?dfa:[dfa];var efa,ffa,gfa,hfa,ifa="",jfa=Z4a.getOpt("UEDITOR_HOME_URL"),kfa=jfa+(jfa.substr(jfa.length-1)=="/"?"":"/")+"dialogs/attachment/fileTypeImages/";for(efa=0;efa<dfa.length;efa++){ffa=dfa[efa];gfa=kfa+$4a(ffa.url);hfa=ffa.title||ffa.url.substr(ffa.url.lastIndexOf("/")+1);ifa+='<p style="line-height: 16px;">'+'<img style="vertical-align: middle; margin-right: 2px;" src="'+gfa+'" _src="'+gfa+'" />'+'<a style="font-size:12px; color:#0066cc;" href="'+ffa.url+'" title="'+hfa+'">'+hfa+"</a>"+"</p>"}Z4a.execCommand("insertHtml",ifa)}}}}});UE.plugins.xssFilter=function(){var lfa=UEDITOR_CONFIG;var mfa=lfa.whitList;function nfa(pfa){var qfa=pfa.tagName;var rfa=pfa.attrs;if(!mfa.hasOwnProperty(qfa)){pfa.parentNode.removeChild(pfa);return false}UE.utils.each(rfa,function(sfa,tfa){if(mfa[qfa].indexOf(tfa)===-1){pfa.setAttr(tfa)}})}if(mfa&&lfa.xssFilterRules){this.options.filterRules=function(){var ufa={};UE.utils.each(mfa,function(vfa,wfa){ufa[wfa]=function(xfa){return nfa(xfa)}});return ufa}()}var ofa=[];UE.utils.each(mfa,function(yfa,zfa){ofa.push(zfa)});if(mfa&&lfa.inputXssFilter){this.addInputRule(function(Afa){Afa.traversal(function(Bfa){if(Bfa.type!=="element"){return false}nfa(Bfa)})})}if(mfa&&lfa.outputXssFilter){this.addOutputRule(function(Cfa){Cfa.traversal(function(Dfa){if(Dfa.type!=="element"){return false}nfa(Dfa)})})}};var baidu=baidu||{};baidu.editor=baidu.editor||{};UE.ui=baidu.editor.ui={};(function(){var Efa=baidu.editor.browser,Ffa=baidu.editor.dom.domUtils;var Gfa="$EDITORUI";var Hfa=window[Gfa]={};var Ifa="ID"+Gfa;var Jfa=0;var Kfa=baidu.editor.ui.uiUtils={uid:function(Nfa){return Nfa?Nfa[Ifa]||(Nfa[Ifa]=++Jfa):++Jfa},hook:function(Ofa,Pfa){var Qfa;if(Ofa&&Ofa._callbacks){Qfa=Ofa}else{Qfa=function(){var Rfa;if(Ofa){Rfa=Ofa.apply(this,arguments)}var Sfa=Qfa._callbacks;var Tfa=Sfa.length;while(Tfa--){var Ufa=Sfa[Tfa].apply(this,arguments);if(Rfa===undefined){Rfa=Ufa}}return Rfa};Qfa._callbacks=[]}Qfa._callbacks.push(Pfa);return Qfa},createElementByHtml:function(Vfa){var Wfa=document.createElement("div");Wfa.innerHTML=Vfa;Wfa=Wfa.firstChild;Wfa.parentNode.removeChild(Wfa);return Wfa},getViewportElement:function(){return Efa.ie&&Efa.quirks?document.body:document.documentElement},getClientRect:function(Xfa){var Yfa;try{Yfa=Xfa.getBoundingClientRect()}catch(_fa){Yfa={left:0,top:0,height:0,width:0}}var Zfa={left:Math.round(Yfa.left),top:Math.round(Yfa.top),height:Math.round(Yfa.bottom-Yfa.top),width:Math.round(Yfa.right-Yfa.left)};var $fa;while(($fa=Xfa.ownerDocument)!==document&&(Xfa=Ffa.getWindow($fa).frameElement)){Yfa=Xfa.getBoundingClientRect();Zfa.left+=Yfa.left;Zfa.top+=Yfa.top}Zfa.bottom=Zfa.top+Zfa.height;Zfa.right=Zfa.left+Zfa.width;return Zfa},getViewportRect:function(){var a5a=Kfa.getViewportElement();var b5a=(window.innerWidth||a5a.clientWidth)|0;var c5a=(window.innerHeight||a5a.clientHeight)|0;return{left:0,top:0,height:c5a,width:b5a,bottom:c5a,right:b5a}},setViewportOffset:function(d5a,e5a){var f5a;var g5a=Kfa.getFixedLayer();if(d5a.parentNode===g5a){d5a.style.left=e5a.left+"px";d5a.style.top=e5a.top+"px"}else{Ffa.setViewportOffset(d5a,e5a)}},getEventOffset:function(h5a){var i5a=h5a.target||h5a.srcElement;var j5a=Kfa.getClientRect(i5a);var k5a=Kfa.getViewportOffsetByEvent(h5a);return{left:k5a.left-j5a.left,top:k5a.top-j5a.top}},getViewportOffsetByEvent:function(l5a){var m5a=l5a.target||l5a.srcElement;var n5a=Ffa.getWindow(m5a).frameElement;var o5a={left:l5a.clientX,top:l5a.clientY};if(n5a&&m5a.ownerDocument!==document){var p5a=Kfa.getClientRect(n5a);o5a.left+=p5a.left;o5a.top+=p5a.top}return o5a},setGlobal:function(q5a,r5a){Hfa[q5a]=r5a;return Gfa+'["'+q5a+'"]'},unsetGlobal:function(s5a){delete Hfa[s5a]},copyAttributes:function(t5a,u5a){var v5a=u5a.attributes;var w5a=v5a.length;while(w5a--){var x5a=v5a[w5a];if(x5a.nodeName!="style"&&x5a.nodeName!="class"&&(!Efa.ie||x5a.specified)){t5a.setAttribute(x5a.nodeName,x5a.nodeValue)}}if(u5a.className){Ffa.addClass(t5a,u5a.className)}if(u5a.style.cssText){t5a.style.cssText+=";"+u5a.style.cssText}},removeStyle:function(y5a,z5a){if(y5a.style.removeProperty){y5a.style.removeProperty(z5a)}else if(y5a.style.removeAttribute){y5a.style.removeAttribute(z5a)}else throw""},contains:function(A5a,B5a){return A5a&&B5a&&(A5a===B5a?false:A5a.contains?A5a.contains(B5a):A5a.compareDocumentPosition(B5a)&16)},startDrag:function(C5a,D5a,E5a){var E5a=E5a||document;var F5a=C5a.clientX;var G5a=C5a.clientY;function H5a(L5a){var M5a=L5a.clientX-F5a;var N5a=L5a.clientY-G5a;D5a.ondragmove(M5a,N5a,L5a);if(L5a.stopPropagation){L5a.stopPropagation()}else{L5a.cancelBubble=true}}if(E5a.addEventListener){function I5a(O5a){E5a.removeEventListener("mousemove",H5a,true);E5a.removeEventListener("mouseup",I5a,true);window.removeEventListener("mouseup",I5a,true);D5a.ondragstop()}E5a.addEventListener("mousemove",H5a,true);E5a.addEventListener("mouseup",I5a,true);window.addEventListener("mouseup",I5a,true);C5a.preventDefault()}else{var J5a=C5a.srcElement;J5a.setCapture();function K5a(){J5a.releaseCapture();J5a.detachEvent("onmousemove",H5a);J5a.detachEvent("onmouseup",K5a);J5a.detachEvent("onlosecaptrue",K5a);D5a.ondragstop()}J5a.attachEvent("onmousemove",H5a);J5a.attachEvent("onmouseup",K5a);J5a.attachEvent("onlosecaptrue",K5a);C5a.returnValue=false}D5a.ondragstart()},getFixedLayer:function(){var P5a=document.getElementById("edui_fixedlayer");if(P5a==null){P5a=document.createElement("div");P5a.id="edui_fixedlayer";document.body.appendChild(P5a);if(Efa.ie&&Efa.version<=8){P5a.style.position="absolute";Mfa();setTimeout(Lfa)}else{P5a.style.position="fixed"}P5a.style.left="0";P5a.style.top="0";P5a.style.width="0";P5a.style.height="0"}return P5a},makeUnselectable:function(Q5a){if(Efa.opera||Efa.ie&&Efa.version<9){Q5a.unselectable="on";if(Q5a.hasChildNodes()){for(var R5a=0;R5a<Q5a.childNodes.length;R5a++){if(Q5a.childNodes[R5a].nodeType==1){Kfa.makeUnselectable(Q5a.childNodes[R5a])}}}}else{if(Q5a.style.MozUserSelect!==undefined){Q5a.style.MozUserSelect="none"}else if(Q5a.style.WebkitUserSelect!==undefined){Q5a.style.WebkitUserSelect="none"}else if(Q5a.style.KhtmlUserSelect!==undefined){Q5a.style.KhtmlUserSelect="none"}}}};function Lfa(){var S5a=document.getElementById("edui_fixedlayer");Kfa.setViewportOffset(S5a,{left:0,top:0})}function Mfa(T5a){Ffa.on(window,"scroll",Lfa);Ffa.on(window,"resize",baidu.editor.utils.defer(Lfa,0,true))}})();(function(){var U5a=baidu.editor.utils,V5a=baidu.editor.ui.uiUtils,W5a=baidu.editor.EventBase,X5a=baidu.editor.ui.UIBase=function(){};X5a.prototype={className:"",uiName:"",initOptions:function(Y5a){var Z5a=this;for(var $5a in Y5a){Z5a[$5a]=Y5a[$5a]}this.id=this.id||"edui"+V5a.uid()},initUIBase:function(){this._globalKey=U5a.unhtml(V5a.setGlobal(this.id,this))},render:function(_5a){var aga=this.renderHtml();var bga=V5a.createElementByHtml(aga);var cga=domUtils.getElementsByTagName(bga,"*");var dga="edui-"+(this.theme||this.editor.options.theme);var ega=document.getElementById("edui_fixedlayer");for(var fga=0,gga;gga=cga[fga++];){domUtils.addClass(gga,dga)}domUtils.addClass(bga,dga);if(ega){ega.className="";domUtils.addClass(ega,dga)}var hga=this.getDom();if(hga!=null){hga.parentNode.replaceChild(bga,hga);V5a.copyAttributes(bga,hga)}else{if(typeof _5a=="string"){_5a=document.getElementById(_5a)}_5a=_5a||V5a.getFixedLayer();domUtils.addClass(_5a,dga);_5a.appendChild(bga)}this.postRender()},getDom:function(iga){if(!iga){return document.getElementById(this.id)}else{return document.getElementById(this.id+"_"+iga)}},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(jga){var kga="edui-"+this.uiName;return jga.replace(/##/g,this.id).replace(/%%-/g,this.uiName?kga+"-":"").replace(/%%/g,(this.uiName?kga:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var lga=this.getDom();if(lga)baidu.editor.dom.domUtils.remove(lga);V5a.unsetGlobal(this.id)}};U5a.inherits(X5a,W5a)})();(function(){var mga=baidu.editor.utils,nga=baidu.editor.ui.UIBase,oga=baidu.editor.ui.Separator=function(pga){this.initOptions(pga);this.initSeparator()};oga.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}};mga.inherits(oga,nga)})();(function(){var qga=baidu.editor.utils,rga=baidu.editor.dom.domUtils,sga=baidu.editor.ui.UIBase,tga=baidu.editor.ui.uiUtils;var uga=baidu.editor.ui.Mask=function(vga){this.initOptions(vga);this.initUIBase()};uga.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var wga=this;rga.on(window,"resize",function(){setTimeout(function(){if(!wga.isHidden()){wga._fill()}})})},show:function(xga){this._fill();this.getDom().style.display="";this.getDom().style.zIndex=xga},hide:function(){this.getDom().style.display="none";this.getDom().style.zIndex=""},isHidden:function(){return this.getDom().style.display=="none"},_onMouseDown:function(){return false},_onClick:function(yga,zga){this.fireEvent("click",yga,zga)},_fill:function(){var Aga=this.getDom();var Bga=tga.getViewportRect();Aga.style.width=Bga.width+"px";Aga.style.height=Bga.height+"px"}};qga.inherits(uga,sga)})();(function(){var Cga=baidu.editor.utils,Dga=baidu.editor.ui.uiUtils,Ega=baidu.editor.dom.domUtils,Fga=baidu.editor.ui.UIBase,Gga=baidu.editor.ui.Popup=function(Kga){this.initOptions(Kga);this.initPopup()};var Hga=[];function Iga(Lga,Mga){for(var Nga=0;Nga<Hga.length;Nga++){var Oga=Hga[Nga];if(!Oga.isHidden()){if(Oga.queryAutoHide(Mga)!==false){if(Lga&&/scroll/gi.test(Lga.type)&&Oga.className=="edui-wordpastepop")return;Oga.hide()}}}if(Hga.length)Oga.editor.fireEvent("afterhidepop")}Gga.postHide=Iga;var Jga=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];Gga.prototype={SHADOW_RADIUS:5,content:null,_hidden:false,autoRender:true,canSideLeft:true,canSideUp:true,initPopup:function(){this.initUIBase();Hga.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;">'+' <div id="##_body" class="edui-popup-body">'+' <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe>'+' <div class="edui-shadow"></div>'+' <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div>"+" </div>"+"</div>"},getContentHtmlTpl:function(){if(this.content){if(typeof this.content=="string"){return this.content}return this.content.renderHtml()}else{return""}},_UIBase_postRender:Fga.prototype.postRender,postRender:function(){if(this.content instanceof Fga){this.content.postRender()}if(this.captureWheel&&!this.captured){this.captured=true;var Pga=(document.documentElement.clientHeight||document.body.clientHeight)-80,Qga=this.getDom().offsetHeight,Rga=Dga.getClientRect(this.combox.getDom()).top,Sga=this.getDom("content"),Tga=this.getDom("body").getElementsByTagName("iframe"),Uga=this;Tga.length&&(Tga=Tga[0]);while(Rga+Qga>Pga){Qga-=30}Sga.style.height=Qga+"px";Tga&&(Tga.style.height=Qga+"px");if(window.XMLHttpRequest){Ega.on(Sga,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(Vga){if(Vga.preventDefault){Vga.preventDefault()}else{Vga.returnValue=false}if(Vga.wheelDelta){Sga.scrollTop-=Vga.wheelDelta/120*60}else{Sga.scrollTop-=Vga.detail/-3*60}})}else{Ega.on(this.getDom(),"mousewheel",function(Wga){Wga.returnValue=false;Uga.getDom("content").scrollTop-=Wga.wheelDelta/120*60})}}this.fireEvent("postRenderAfter");this.hide(true);this._UIBase_postRender()},_doAutoRender:function(){if(!this.getDom()&&this.autoRender){this.render()}},mesureSize:function(){var Xga=this.getDom("content");return Dga.getClientRect(Xga)},fitSize:function(){if(this.captureWheel&&this.sized){return this.__size}this.sized=true;var Yga=this.getDom("body");Yga.style.width="";Yga.style.height="";var Zga=this.mesureSize();if(this.captureWheel){Yga.style.width=-(-20-Zga.width)+"px";var $ga=parseInt(this.getDom("content").style.height,10);!window.isNaN($ga)&&(Zga.height=$ga)}else{Yga.style.width=Zga.width+"px"}Yga.style.height=Zga.height+"px";this.__size=Zga;this.captureWheel&&(this.getDom("content").style.overflow="auto");return Zga},showAnchor:function(_ga,a6a){this.showAnchorRect(Dga.getClientRect(_ga),a6a)},showAnchorRect:function(b6a,c6a,d6a){this._doAutoRender();var e6a=Dga.getViewportRect();this.getDom().style.visibility="hidden";this._show();var f6a=this.fitSize();var g6a,h6a,i6a,j6a;if(c6a){g6a=this.canSideLeft&&(b6a.right+f6a.width>e6a.right&&b6a.left>f6a.width);h6a=this.canSideUp&&(b6a.top+f6a.height>e6a.bottom&&b6a.bottom>f6a.height);i6a=g6a?b6a.left-f6a.width:b6a.right;j6a=h6a?b6a.bottom-f6a.height:b6a.top}else{g6a=this.canSideLeft&&(b6a.right+f6a.width>e6a.right&&b6a.left>f6a.width);h6a=this.canSideUp&&(b6a.top+f6a.height>e6a.bottom&&b6a.bottom>f6a.height);i6a=g6a?b6a.right-f6a.width:b6a.left;j6a=h6a?b6a.top-f6a.height:b6a.bottom}var k6a=this.getDom();Dga.setViewportOffset(k6a,{left:i6a,top:j6a});Ega.removeClasses(k6a,Jga);k6a.className+=" "+Jga[(h6a?1:0)*2+(g6a?1:0)];if(this.editor){k6a.style.zIndex=this.editor.container.style.zIndex*1+10;baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=k6a.style.zIndex-1}this.getDom().style.visibility="visible"},showAt:function(l6a){var m6a=l6a.left;var n6a=l6a.top;var o6a={left:m6a,top:n6a,right:m6a,bottom:n6a,height:0,width:0};this.showAnchorRect(o6a,false,true)},_show:function(){if(this._hidden){var p6a=this.getDom();p6a.style.display="";this._hidden=false;this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender();this._show()},hide:function(q6a){if(!this._hidden&&this.getDom()){this.getDom().style.display="none";this._hidden=true;if(!q6a){this.fireEvent("hide")}}},queryAutoHide:function(r6a){return!r6a||!Dga.contains(this.getDom(),r6a)}};Cga.inherits(Gga,Fga);Ega.on(document,"mousedown",function(s6a){var t6a=s6a.target||s6a.srcElement;Iga(s6a,t6a)});Ega.on(window,"scroll",function(u6a,v6a){Iga(u6a,v6a)})})();(function(){var w6a=baidu.editor.utils,x6a=baidu.editor.ui.UIBase,y6a=baidu.editor.ui.ColorPicker=function(B6a){this.initOptions(B6a);this.noColorText=this.noColorText||this.editor.getLang("clearColor");this.initUIBase()};y6a.prototype={getHtmlTpl:function(){return A6a(this.noColorText,this.editor)},_onTableClick:function(C6a){var D6a=C6a.target||C6a.srcElement;var E6a=D6a.getAttribute("data-color");if(E6a){this.fireEvent("pickcolor",E6a)}},_onTableOver:function(F6a){var G6a=F6a.target||F6a.srcElement;var H6a=G6a.getAttribute("data-color");if(H6a){this.getDom("preview").style.backgroundColor=H6a}},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}};w6a.inherits(y6a,x6a);var z6a=("ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,"+"f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,"+"d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,"+"bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,"+"a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,"+"7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,"+"c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,").split(",");function A6a(I6a,J6a){var K6a='<div id="##" class="edui-colorpicker %%">'+'<div class="edui-colorpicker-topbar edui-clearfix">'+'<div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div>'+'<div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+I6a+"</div>"+"</div>"+'<table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0">'+'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+J6a.getLang("themeColor")+"</td> </tr>"+'<tr class="edui-colorpicker-tablefirstrow" >';for(var L6a=0;L6a<z6a.length;L6a++){if(L6a&&L6a%10===0){K6a+="</tr>"+(L6a==60?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+J6a.getLang("standardColor")+"</td></tr>":"")+"<tr"+(L6a==60?' class="edui-colorpicker-tablefirstrow"':"")+">"}K6a+=L6a<70?'<td style="padding: 0 2px;"><a hidefocus title="'+z6a[L6a]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell"'+' data-color="#'+z6a[L6a]+'"'+' style="background-color:#'+z6a[L6a]+";border:solid #ccc;"+(L6a<10||L6a>=60?"border-width:1px;":L6a>=10&&L6a<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"'+"></a></td>":""}K6a+="</tr></table></div>";return K6a}})();(function(){var M6a=baidu.editor.utils,N6a=baidu.editor.ui.uiUtils,O6a=baidu.editor.ui.UIBase;var P6a=baidu.editor.ui.TablePicker=function(Q6a){this.initOptions(Q6a);this.initTablePicker()};P6a.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){var R6a=this;return'<div id="##" class="edui-tablepicker %%">'+'<div class="edui-tablepicker-body">'+'<div class="edui-infoarea">'+'<span id="##_label" class="edui-label"></span>'+"</div>"+'<div class="edui-pickarea"'+' onmousemove="$$._onMouseMove(event, this);"'+' onmouseover="$$._onMouseOver(event, this);"'+' onmouseout="$$._onMouseOut(event, this);"'+' onclick="$$._onClick(event, this);"'+">"+'<div id="##_overlay" class="edui-overlay"></div>'+"</div>"+"</div>"+"</div>"},_UIBase_render:O6a.prototype.render,render:function(S6a){this._UIBase_render(S6a);this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(T6a,U6a){var V6a=this.getDom("overlay").style;var W6a=this.lengthOfCellSide;V6a.width=T6a*W6a+"px";V6a.height=U6a*W6a+"px";var X6a=this.getDom("label");X6a.innerHTML=T6a+this.editor.getLang("t_col")+" x "+U6a+this.editor.getLang("t_row");this.numCols=T6a;this.numRows=U6a},_onMouseOver:function(Y6a,Z6a){var $6a=Y6a.relatedTarget||Y6a.fromElement;if(!N6a.contains(Z6a,$6a)&&Z6a!==$6a){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility=""}},_onMouseOut:function(_6a,aha){var bha=_6a.relatedTarget||_6a.toElement;if(!N6a.contains(aha,bha)&&aha!==bha){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility="hidden"}},_onMouseMove:function(cha,dha){var eha=this.getDom("overlay").style;var fha=N6a.getEventOffset(cha);var gha=this.lengthOfCellSide;var hha=Math.ceil(fha.left/gha);var iha=Math.ceil(fha.top/gha);this._track(hha,iha)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}};M6a.inherits(P6a,O6a)})();(function(){var jha=baidu.editor.browser,kha=baidu.editor.dom.domUtils,lha=baidu.editor.ui.uiUtils;var mha='onmousedown="$$.Stateful_onMouseDown(event, this);"'+' onmouseup="$$.Stateful_onMouseUp(event, this);"'+(jha.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);"'+' onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);"'+' onmouseout="$$.Stateful_onMouseOut(event, this);"');baidu.editor.ui.Stateful={alwalysHoverable:false,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl;this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var nha=this._Stateful_dGetHtmlTpl();return nha.replace(/stateful/g,function(){return mha})},Stateful_onMouseEnter:function(oha,pha){this.target=pha;if(!this.isDisabled()||this.alwalysHoverable){this.addState("hover");this.fireEvent("over")}},Stateful_onMouseLeave:function(qha,rha){if(!this.isDisabled()||this.alwalysHoverable){this.removeState("hover");this.removeState("active");this.fireEvent("out")}},Stateful_onMouseOver:function(sha,tha){var uha=sha.relatedTarget;if(!lha.contains(tha,uha)&&tha!==uha){this.Stateful_onMouseEnter(sha,tha)}},Stateful_onMouseOut:function(vha,wha){var xha=vha.relatedTarget;if(!lha.contains(wha,xha)&&wha!==xha){this.Stateful_onMouseLeave(vha,wha)}},Stateful_onMouseDown:function(yha,zha){if(!this.isDisabled()){this.addState("active")}},Stateful_onMouseUp:function(Aha,Bha){if(!this.isDisabled()){this.removeState("active")}},Stateful_postRender:function(){if(this.disabled&&!this.hasState("disabled")){this.addState("disabled")}},hasState:function(Cha){return kha.hasClass(this.getStateDom(),"edui-state-"+Cha)},addState:function(Dha){if(!this.hasState(Dha)){this.getStateDom().className+=" edui-state-"+Dha}},removeState:function(Eha){if(this.hasState(Eha)){kha.removeClasses(this.getStateDom(),["edui-state-"+Eha])}},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(Fha){if(!this.isDisabled()&&Fha){this.addState("checked")}else{this.removeState("checked")}},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(Gha){if(Gha){this.removeState("hover");this.removeState("checked");this.removeState("active");this.addState("disabled")}else{this.removeState("disabled")}}}})();(function(){var Hha=baidu.editor.utils,Iha=baidu.editor.ui.UIBase,Jha=baidu.editor.ui.Stateful,Kha=baidu.editor.ui.Button=function(Lha){if(Lha.name){var Mha=Lha.name;var Nha=Lha.cssRules;if(!Lha.className){Lha.className="edui-for-"+Mha}Lha.cssRules=".edui-default  .edui-for-"+Mha+" .edui-icon {"+Nha+"}"}this.initOptions(Lha);this.initButton()};Kha.prototype={uiName:"button",label:"",title:"",showIcon:true,showText:true,cssRules:"",initButton:function(){this.initUIBase();this.Stateful_init();if(this.cssRules){Hha.cssRule("edui-customize-"+this.name+"-style",this.cssRules)}},getHtmlTpl:function(){return'<div id="##" class="edui-box %%">'+'<div id="##_state" stateful>'+'<div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div>"+"</div>"+"</div></div>"},postRender:function(){this.Stateful_postRender();this.setDisabled(this.disabled)},_onMouseDown:function(Oha){var Pha=Oha.target||Oha.srcElement,Qha=Pha&&Pha.tagName&&Pha.tagName.toLowerCase();if(Qha=="input"||Qha=="object"||Qha=="object"){return false}},_onClick:function(){if(!this.isDisabled()){this.fireEvent("click")}},setTitle:function(Rha){var Sha=this.getDom("label");Sha.innerHTML=Rha}};Hha.inherits(Kha,Iha);Hha.extend(Kha.prototype,Jha)})();(function(){var Tha=baidu.editor.utils,Uha=baidu.editor.ui.uiUtils,Vha=baidu.editor.dom.domUtils,Wha=baidu.editor.ui.UIBase,Xha=baidu.editor.ui.Stateful,Yha=baidu.editor.ui.SplitButton=function(Zha){this.initOptions(Zha);this.initSplitButton()};Yha.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase();this.Stateful_init();var $ha=this;if(this.popup!=null){var _ha=this.popup;this.popup=null;this.setPopup(_ha)}},_UIBase_postRender:Wha.prototype.postRender,postRender:function(){this.Stateful_postRender();this._UIBase_postRender()},setPopup:function(a7a){if(this.popup===a7a)return;if(this.popup!=null){this.popup.dispose()}a7a.addListener("show",Tha.bind(this._onPopupShow,this));a7a.addListener("hide",Tha.bind(this._onPopupHide,this));a7a.addListener("postrender",Tha.bind(function(){a7a.getDom("body").appendChild(Uha.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(Uha.getClientRect(this.getDom()).width+20)+'px"></div>'));a7a.getDom().className+=" "+this.className},this));this.popup=a7a},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%">'+"<div "+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body">'+'<div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);">'+'<div class="edui-box edui-icon"></div>'+"</div>"+'<div class="edui-box edui-splitborder"></div>'+'<div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div>'+"</div></div></div>"},showPopup:function(){var b7a=Uha.getClientRect(this.getDom());b7a.top-=this.popup.SHADOW_RADIUS;b7a.height+=this.popup.SHADOW_RADIUS;this.popup.showAnchorRect(b7a)},_onArrowClick:function(c7a,d7a){if(!this.isDisabled()){this.showPopup()}},_onButtonClick:function(){if(!this.isDisabled()){this.fireEvent("buttonclick")}}};Tha.inherits(Yha,Wha);Tha.extend(Yha.prototype,Xha,true)})();(function(){var e7a=baidu.editor.utils,f7a=baidu.editor.ui.uiUtils,g7a=baidu.editor.ui.ColorPicker,h7a=baidu.editor.ui.Popup,i7a=baidu.editor.ui.SplitButton,j7a=baidu.editor.ui.ColorButton=function(k7a){this.initOptions(k7a);this.initColorButton()};j7a.prototype={initColorButton:function(){var l7a=this;this.popup=new h7a({content:new g7a({noColorText:l7a.editor.getLang("clearColor"),editor:l7a.editor,onpickcolor:function(m7a,n7a){l7a._onPickColor(n7a)},onpicknocolor:function(o7a,p7a){l7a._onPickNoColor(p7a)}}),editor:l7a.editor});this.initSplitButton()},_SplitButton_postRender:i7a.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.getDom("button_body").appendChild(f7a.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>'));this.getDom().className+=" edui-colorbutton"},setColor:function(q7a){this.getDom("colorlump").style.backgroundColor=q7a;this.color=q7a},_onPickColor:function(r7a){if(this.fireEvent("pickcolor",r7a)!==false){this.setColor(r7a);this.popup.hide()}},_onPickNoColor:function(s7a){if(this.fireEvent("picknocolor")!==false){this.popup.hide()}}};e7a.inherits(j7a,i7a)})();(function(){var t7a=baidu.editor.utils,u7a=baidu.editor.ui.Popup,v7a=baidu.editor.ui.TablePicker,w7a=baidu.editor.ui.SplitButton,x7a=baidu.editor.ui.TableButton=function(y7a){this.initOptions(y7a);this.initTableButton()};x7a.prototype={initTableButton:function(){var z7a=this;this.popup=new u7a({content:new v7a({editor:z7a.editor,onpicktable:function(A7a,B7a,C7a){z7a._onPickTable(B7a,C7a)}}),editor:z7a.editor});this.initSplitButton()},_onPickTable:function(D7a,E7a){if(this.fireEvent("picktable",D7a,E7a)!==false){this.popup.hide()}}};t7a.inherits(x7a,w7a)})();(function(){var F7a=baidu.editor.utils,G7a=baidu.editor.ui.UIBase;var H7a=baidu.editor.ui.AutoTypeSetPicker=function(I7a){this.initOptions(I7a);this.initAutoTypeSetPicker()};H7a.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var J7a=this.editor,K7a=J7a.options.autotypeset,L7a=J7a.getLang("autoTypeSet");var M7a="textAlignValue"+J7a.uid,N7a="imageBlockLineValue"+J7a.uid,O7a="symbolConverValue"+J7a.uid;return'<div id="##" class="edui-autotypesetpicker %%">'+'<div class="edui-autotypesetpicker-body">'+"<table >"+'<tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(K7a["mergeEmptyline"]?"checked":"")+">"+L7a.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(K7a["removeEmptyline"]?"checked":"")+">"+L7a.delLine+"</td></tr>"+'<tr><td nowrap><input type="checkbox" name="removeClass" '+(K7a["removeClass"]?"checked":"")+">"+L7a.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(K7a["indent"]?"checked":"")+">"+L7a.indent+"</td></tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="textAlign" '+(K7a["textAlign"]?"checked":"")+">"+L7a.alignment+"</td>"+'<td colspan="2" id="'+M7a+'">'+'<input type="radio" name="'+M7a+'" value="left" '+(K7a["textAlign"]&&K7a["textAlign"]=="left"?"checked":"")+">"+J7a.getLang("justifyleft")+'<input type="radio" name="'+M7a+'" value="center" '+(K7a["textAlign"]&&K7a["textAlign"]=="center"?"checked":"")+">"+J7a.getLang("justifycenter")+'<input type="radio" name="'+M7a+'" value="right" '+(K7a["textAlign"]&&K7a["textAlign"]=="right"?"checked":"")+">"+J7a.getLang("justifyright")+"</td>"+"</tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="imageBlockLine" '+(K7a["imageBlockLine"]?"checked":"")+">"+L7a.imageFloat+"</td>"+'<td nowrap id="'+N7a+'">'+'<input type="radio" name="'+N7a+'" value="none" '+(K7a["imageBlockLine"]&&K7a["imageBlockLine"]=="none"?"checked":"")+">"+J7a.getLang("default")+'<input type="radio" name="'+N7a+'" value="left" '+(K7a["imageBlockLine"]&&K7a["imageBlockLine"]=="left"?"checked":"")+">"+J7a.getLang("justifyleft")+'<input type="radio" name="'+N7a+'" value="center" '+(K7a["imageBlockLine"]&&K7a["imageBlockLine"]=="center"?"checked":"")+">"+J7a.getLang("justifycenter")+'<input type="radio" name="'+N7a+'" value="right" '+(K7a["imageBlockLine"]&&K7a["imageBlockLine"]=="right"?"checked":"")+">"+J7a.getLang("justifyright")+"</td>"+"</tr>"+'<tr><td nowrap><input type="checkbox" name="clearFontSize" '+(K7a["clearFontSize"]?"checked":"")+">"+L7a.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(K7a["clearFontFamily"]?"checked":"")+">"+L7a.removeFontFamily+"</td></tr>"+'<tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(K7a["removeEmptyNode"]?"checked":"")+">"+L7a.removeHtml+"</td></tr>"+'<tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(K7a["pasteFilter"]?"checked":"")+">"+L7a.pasteFilter+"</td></tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="symbolConver" '+(K7a["bdc2sb"]||K7a["tobdc"]?"checked":"")+">"+L7a.symbol+"</td>"+'<td id="'+O7a+'">'+'<input type="radio" name="bdc" value="bdc2sb" '+(K7a["bdc2sb"]?"checked":"")+">"+L7a.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(K7a["tobdc"]?"checked":"")+">"+L7a.tobdc+""+"</td>"+'<td nowrap align="right"><button >'+L7a.run+"</button></td>"+"</tr>"+"</table>"+"</div>"+"</div>"},_UIBase_render:G7a.prototype.render};F7a.inherits(H7a,G7a)})();(function(){var P7a=baidu.editor.utils,Q7a=baidu.editor.ui.Popup,R7a=baidu.editor.ui.AutoTypeSetPicker,S7a=baidu.editor.ui.SplitButton,T7a=baidu.editor.ui.AutoTypeSetButton=function(V7a){this.initOptions(V7a);this.initAutoTypeSetButton()};function U7a(W7a){var X7a={},Y7a=W7a.getDom(),Z7a=W7a.editor.uid,$7a=null,_7a=null,aia=domUtils.getElementsByTagName(Y7a,"input");for(var bia=aia.length-1,cia;cia=aia[bia--];){$7a=cia.getAttribute("type");if($7a=="checkbox"){_7a=cia.getAttribute("name");X7a[_7a]&&delete X7a[_7a];if(cia.checked){var dia=document.getElementById(_7a+"Value"+Z7a);if(dia){if(/input/gi.test(dia.tagName)){X7a[_7a]=dia.value}else{var eia=dia.getElementsByTagName("input");for(var fia=eia.length-1,gia;gia=eia[fia--];){if(gia.checked){X7a[_7a]=gia.value;break}}}}else{X7a[_7a]=true}}else{X7a[_7a]=false}}else{X7a[cia.getAttribute("value")]=cia.checked}}var hia=domUtils.getElementsByTagName(Y7a,"select");for(var bia=0,iia;iia=hia[bia++];){var jia=iia.getAttribute("name");X7a[jia]=X7a[jia]?iia.value:""}P7a.extend(W7a.editor.options.autotypeset,X7a);W7a.editor.setPreferences("autotypeset",X7a)}T7a.prototype={initAutoTypeSetButton:function(){var kia=this;this.popup=new Q7a({content:new R7a({editor:kia.editor}),editor:kia.editor,hide:function(){if(!this._hidden&&this.getDom()){U7a(this);this.getDom().style.display="none";this._hidden=true;this.fireEvent("hide")}}});var lia=0;this.popup.addListener("postRenderAfter",function(){var mia=this;if(lia)return;var nia=this.getDom(),oia=nia.getElementsByTagName("button")[0];oia.onclick=function(){U7a(mia);kia.editor.execCommand("autotypeset");mia.hide()};domUtils.on(nia,"click",function(pia){var qia=pia.target||pia.srcElement,ria=kia.editor.uid;if(qia&&qia.tagName=="INPUT"){if(qia.name=="imageBlockLine"||qia.name=="textAlign"||qia.name=="symbolConver"){var sia=qia.checked,tia=document.getElementById(qia.name+"Value"+ria),uia=tia.getElementsByTagName("input"),via={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"};for(var wia=0;wia<uia.length;wia++){if(sia){if(uia[wia].value==via[qia.name]){uia[wia].checked="checked"}}else{uia[wia].checked=false}}}if(qia.name=="imageBlockLineValue"+ria||qia.name=="textAlignValue"+ria||qia.name=="bdc"){var xia=qia.parentNode.previousSibling.getElementsByTagName("input");xia&&(xia[0].checked=true)}U7a(mia)}});lia=1});this.initSplitButton()}};P7a.inherits(T7a,S7a)})();(function(){var yia=baidu.editor.utils,zia=baidu.editor.ui.Popup,Aia=baidu.editor.ui.Stateful,Bia=baidu.editor.ui.UIBase;var Cia=baidu.editor.ui.CellAlignPicker=function(Dia){this.initOptions(Dia);this.initSelected();this.initCellAlignPicker()};Cia.prototype={initSelected:function(){var Eia={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3},Fia=-1;if(this.selected){this.selectedIndex=Eia.valign[this.selected.valign]*Eia.count+Eia.align[this.selected.align]}},initCellAlignPicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){var Gia=["left","center","right"],Hia=9,Iia=null,Jia=-1,Kia=[];for(var Lia=0;Lia<Hia;Lia++){Iia=this.selectedIndex===Lia?' class="edui-cellalign-selected" ':"";Jia=Lia%3;Jia===0&&Kia.push("<tr>");Kia.push('<td index="'+Lia+'" '+Iia+' stateful><div class="edui-icon edui-'+Gia[Jia]+'"></div></td>');Jia===2&&Kia.push("</tr>")}return'<div id="##" class="edui-cellalignpicker %%">'+'<div class="edui-cellalignpicker-body">'+'<table onclick="$$._onClick(event);">'+Kia.join("")+"</table>"+"</div>"+"</div>"},getStateDom:function(){return this.target},_onClick:function(Mia){var Nia=Mia.target||Mia.srcElement;if(/icon/.test(Nia.className)){this.items[Nia.parentNode.getAttribute("index")].onclick();zia.postHide(Mia)}},_UIBase_render:Bia.prototype.render};yia.inherits(Cia,Bia);yia.extend(Cia.prototype,Aia,true)})();(function(){var Oia=baidu.editor.utils,Pia=baidu.editor.ui.Stateful,Qia=baidu.editor.ui.uiUtils,Ria=baidu.editor.ui.UIBase;var Sia=baidu.editor.ui.PastePicker=function(Tia){this.initOptions(Tia);this.initPastePicker()};Sia.prototype={initPastePicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div>'+'<div class="edui-pastecontainer">'+'<div class="edui-title">'+this.editor.getLang("pasteOpt")+"</div>"+'<div class="edui-button">'+'<div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful>'+'<div class="edui-richtxticon"></div></div>'+'<div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful>'+'<div class="edui-tagicon"></div></div>'+'<div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful>'+'<div class="edui-plaintxticon"></div></div>'+"</div>"+"</div>"+"</div>"},getStateDom:function(){return this.target},format:function(Uia){this.editor.ui._isTransfer=true;this.editor.fireEvent("pasteTransfer",Uia)},_onClick:function(Via){var Wia=domUtils.getNextDomNode(Via),Xia=Qia.getViewportRect().height,Yia=Qia.getClientRect(Wia);if(Yia.top+Yia.height>Xia)Wia.style.top=-Yia.height-Via.offsetHeight+"px";else Wia.style.top="";if(/hidden/gi.test(domUtils.getComputedStyle(Wia,"visibility"))){Wia.style.visibility="visible";domUtils.addClass(Via,"edui-state-opened")}else{Wia.style.visibility="hidden";domUtils.removeClasses(Via,"edui-state-opened")}},_UIBase_render:Ria.prototype.render};Oia.inherits(Sia,Ria);Oia.extend(Sia.prototype,Pia,true)})();(function(){var Zia=baidu.editor.utils,$ia=baidu.editor.ui.uiUtils,_ia=baidu.editor.ui.UIBase,a8a=baidu.editor.ui.Toolbar=function(b8a){this.initOptions(b8a);this.initToolbar()};a8a.prototype={items:null,initToolbar:function(){this.items=this.items||[];this.initUIBase()},add:function(c8a,d8a){if(d8a===undefined){this.items.push(c8a)}else{this.items.splice(d8a,0,c8a)}},getHtmlTpl:function(){var e8a=[];for(var f8a=0;f8a<this.items.length;f8a++){e8a[f8a]=this.items[f8a].renderHtml()}return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+e8a.join("")+"</div>"},postRender:function(){var g8a=this.getDom();for(var h8a=0;h8a<this.items.length;h8a++){this.items[h8a].postRender()}$ia.makeUnselectable(g8a)},_onMouseDown:function(i8a){var j8a=i8a.target||i8a.srcElement,k8a=j8a&&j8a.tagName&&j8a.tagName.toLowerCase();if(k8a=="input"||k8a=="object"||k8a=="object"){return false}}};Zia.inherits(a8a,_ia)})();(function(){var l8a=baidu.editor.utils,m8a=baidu.editor.dom.domUtils,n8a=baidu.editor.ui.uiUtils,o8a=baidu.editor.ui.UIBase,p8a=baidu.editor.ui.Popup,q8a=baidu.editor.ui.Stateful,r8a=baidu.editor.ui.CellAlignPicker,s8a=baidu.editor.ui.Menu=function(v8a){this.initOptions(v8a);this.initMenu()};var t8a={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return true}};s8a.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[];this.initPopup();this.initItems()},initItems:function(){for(var w8a=0;w8a<this.items.length;w8a++){var x8a=this.items[w8a];if(x8a=="-"){this.items[w8a]=this.getSeparator()}else if(!(x8a instanceof u8a)){x8a.editor=this.editor;x8a.theme=this.editor.options.theme;this.items[w8a]=this.createItem(x8a)}}},getSeparator:function(){return t8a},createItem:function(y8a){y8a.menu=this;return new u8a(y8a)},_Popup_getContentHtmlTpl:p8a.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(this.items.length==0){return this._Popup_getContentHtmlTpl()}var z8a=[];for(var A8a=0;A8a<this.items.length;A8a++){var B8a=this.items[A8a];z8a[A8a]=B8a.renderHtml()}return'<div class="%%-body">'+z8a.join("")+"</div>"},_Popup_postRender:p8a.prototype.postRender,postRender:function(){var C8a=this;for(var D8a=0;D8a<this.items.length;D8a++){var E8a=this.items[D8a];E8a.ownerMenu=this;E8a.postRender()}m8a.on(this.getDom(),"mouseover",function(F8a){F8a=F8a||event;var G8a=F8a.relatedTarget||F8a.fromElement;var H8a=C8a.getDom();if(!n8a.contains(H8a,G8a)&&H8a!==G8a){C8a.fireEvent("over")}});this._Popup_postRender()},queryAutoHide:function(I8a){if(I8a){if(n8a.contains(this.getDom(),I8a)){return false}for(var J8a=0;J8a<this.items.length;J8a++){var K8a=this.items[J8a];if(K8a.queryAutoHide(I8a)===false){return false}}}},clearItems:function(){for(var L8a=0;L8a<this.items.length;L8a++){var M8a=this.items[L8a];clearTimeout(M8a._showingTimer);clearTimeout(M8a._closingTimer);if(M8a.subMenu){M8a.subMenu.destroy()}}this.items=[]},destroy:function(){if(this.getDom()){m8a.remove(this.getDom())}this.clearItems()},dispose:function(){this.destroy()}};l8a.inherits(s8a,p8a);var u8a=baidu.editor.ui.MenuItem=function(N8a){this.initOptions(N8a);this.initUIBase();this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof s8a)){if(N8a.className&&N8a.className.indexOf("aligntd")!=-1){var O8a=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment");this.subMenu=new p8a({content:new r8a(this.subMenu),parentMenu:O8a,editor:O8a.editor,destroy:function(){if(this.getDom()){m8a.remove(this.getDom())}}});this.subMenu.addListener("postRenderAfter",function(){m8a.on(this.getDom(),"mouseover",function(){O8a.addState("opened")})})}else{this.subMenu=new s8a(this.subMenu)}}};u8a.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:true,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);">'+'<div class="%%-body">'+this.renderLabelHtml()+"</div>"+"</div>"},postRender:function(){var P8a=this;this.addListener("over",function(){P8a.ownerMenu.fireEvent("submenuover",P8a);if(P8a.subMenu){P8a.delayShowSubMenu()}});if(this.subMenu){this.getDom().className+=" edui-hassubmenu";this.subMenu.render();this.addListener("out",function(){P8a.delayHideSubMenu()});this.subMenu.addListener("over",function(){clearTimeout(P8a._closingTimer);P8a._closingTimer=null;P8a.addState("opened")});this.ownerMenu.addListener("hide",function(){P8a.hideSubMenu()});this.ownerMenu.addListener("submenuover",function(Q8a,R8a){if(R8a!==P8a){P8a.delayHideSubMenu()}});this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide;this.subMenu.queryAutoHide=function(S8a){if(S8a&&n8a.contains(P8a.getDom(),S8a)){return false}return this._bakQueryAutoHide(S8a)}}this.getDom().style.tabIndex="-1";n8a.makeUnselectable(this.getDom());this.Stateful_postRender()},delayShowSubMenu:function(){var T8a=this;if(!T8a.isDisabled()){T8a.addState("opened");clearTimeout(T8a._showingTimer);clearTimeout(T8a._closingTimer);T8a._closingTimer=null;T8a._showingTimer=setTimeout(function(){T8a.showSubMenu()},250)}},delayHideSubMenu:function(){var U8a=this;if(!U8a.isDisabled()){U8a.removeState("opened");clearTimeout(U8a._showingTimer);if(!U8a._closingTimer){U8a._closingTimer=setTimeout(function(){if(!U8a.hasState("opened")){U8a.hideSubMenu()}U8a._closingTimer=null},400)}}},renderLabelHtml:function(){return'<div class="edui-arrow"></div>'+'<div class="edui-box edui-icon"></div>'+'<div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(V8a){if(this.subMenu&&this.hasState("opened")){return this.subMenu.queryAutoHide(V8a)}},_onClick:function(W8a,X8a){if(this.hasState("disabled"))return;if(this.fireEvent("click",W8a,X8a)!==false){if(this.subMenu){this.showSubMenu()}else{p8a.postHide(W8a)}}},showSubMenu:function(){var Y8a=n8a.getClientRect(this.getDom());Y8a.right-=5;Y8a.left+=2;Y8a.width-=7;Y8a.top-=4;Y8a.bottom+=4;Y8a.height+=8;this.subMenu.showAnchorRect(Y8a,true,true)},hideSubMenu:function(){this.subMenu.hide()}};l8a.inherits(u8a,o8a);l8a.extend(u8a.prototype,q8a,true)})();(function(){var Z8a=baidu.editor.utils,$8a=baidu.editor.ui.uiUtils,_8a=baidu.editor.ui.Menu,aja=baidu.editor.ui.SplitButton,bja=baidu.editor.ui.Combox=function(cja){this.initOptions(cja);this.initCombox()};bja.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var dja=this;this.items=this.items||[];for(var eja=0;eja<this.items.length;eja++){var fja=this.items[eja];fja.uiName="listitem";fja.index=eja;fja.onclick=function(){dja.selectByIndex(this.index)}}this.popup=new _8a({items:this.items,uiName:"list",editor:this.editor,captureWheel:true,combox:this});this.initSplitButton()},_SplitButton_postRender:aja.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.setLabel(this.label||"");this.setValue(this.initValue||"")},showPopup:function(){var gja=$8a.getClientRect(this.getDom());gja.top+=1;gja.bottom-=1;gja.height-=2;this.popup.showAnchorRect(gja)},getValue:function(){return this.value},setValue:function(hja){var ija=this.indexByValue(hja);if(ija!=-1){this.selectedIndex=ija;this.setLabel(this.items[ija].label);this.value=this.items[ija].value}else{this.selectedIndex=-1;this.setLabel(this.getLabelForUnknowValue(hja));this.value=hja}},setLabel:function(jja){this.getDom("button_body").innerHTML=jja;this.label=jja},getLabelForUnknowValue:function(kja){return kja},indexByValue:function(lja){for(var mja=0;mja<this.items.length;mja++){if(lja==this.items[mja].value){return mja}}return-1},getItem:function(nja){return this.items[nja]},selectByIndex:function(oja){if(oja<this.items.length&&this.fireEvent("select",oja)!==false){this.selectedIndex=oja;this.value=this.items[oja].value;this.setLabel(this.items[oja].label)}}};Z8a.inherits(bja,aja)})();(function(){var pja=baidu.editor.utils,qja=baidu.editor.dom.domUtils,rja=baidu.editor.ui.uiUtils,sja=baidu.editor.ui.Mask,tja=baidu.editor.ui.UIBase,uja=baidu.editor.ui.Button,vja=baidu.editor.ui.Dialog=function(zja){if(zja.name){var Aja=zja.name;var Bja=zja.cssRules;if(!zja.className){zja.className="edui-for-"+Aja}if(Bja){zja.cssRules=".edui-default .edui-for-"+Aja+" .edui-dialog-content  {"+Bja+"}"}}this.initOptions(pja.extend({autoReset:true,draggable:true,onok:function(){},oncancel:function(){},onclose:function(Cja,Dja){return Dja?this.onok():this.oncancel()},holdScroll:false},zja));this.initDialog()};var wja;var xja;var yja;vja.prototype={draggable:false,uiName:"dialog",initDialog:function(){var Eja=this,Fja=this.editor.options.theme;if(this.cssRules){pja.cssRule("edui-customize-"+this.name+"-style",this.cssRules)}this.initUIBase();this.modalMask=wja||(wja=new sja({className:"edui-dialog-modalmask",theme:Fja,onclick:function(){yja&&yja.close(false)}}));this.dragMask=xja||(xja=new sja({className:"edui-dialog-dragmask",theme:Fja}));this.closeButton=new uja({className:"edui-dialog-closebutton",title:Eja.closeDialog,theme:Fja,onclick:function(){Eja.close(false)}});this.fullscreen&&this.initResizeEvent();if(this.buttons){for(var Gja=0;Gja<this.buttons.length;Gja++){if(!(this.buttons[Gja]instanceof uja)){this.buttons[Gja]=new uja(pja.extend(this.buttons[Gja],{editor:this.editor},true))}}}},initResizeEvent:function(){var Hja=this;qja.on(window,"resize",function(){if(Hja._hidden||Hja._hidden===undefined){return}if(Hja.__resizeTimer){window.clearTimeout(Hja.__resizeTimer)}Hja.__resizeTimer=window.setTimeout(function(){Hja.__resizeTimer=null;var Ija=Hja.getDom(),Jja=Hja.getDom("content"),Kja=UE.ui.uiUtils.getClientRect(Ija),Lja=UE.ui.uiUtils.getClientRect(Jja),Mja=rja.getViewportRect();Jja.style.width=Mja.width-Kja.width+Lja.width+"px";Jja.style.height=Mja.height-Kja.height+Lja.height+"px";Ija.style.width=Mja.width+"px";Ija.style.height=Mja.height+"px";Hja.fireEvent("resize")},100)})},fitSize:function(){var Nja=this.getDom("body");var Oja=this.mesureSize();Nja.style.width=Oja.width+"px";Nja.style.height=Oja.height+"px";return Oja},safeSetOffset:function(Pja){var Qja=this;var Rja=Qja.getDom();var Sja=rja.getViewportRect();var Tja=rja.getClientRect(Rja);var Uja=Pja.left;if(Uja+Tja.width>Sja.right){Uja=Sja.right-Tja.width}var Vja=Pja.top;if(Vja+Tja.height>Sja.bottom){Vja=Sja.bottom-Tja.height}Rja.style.left=Math.max(Uja,0)+"px";Rja.style.top=Math.max(Vja,0)+"px"},showAtCenter:function(){var Wja=rja.getViewportRect();if(!this.fullscreen){this.getDom().style.display="";var Xja=this.fitSize();var Yja=this.getDom("titlebar").offsetHeight|0;var Zja=Wja.width/2-Xja.width/2;var $ja=Wja.height/2-(Xja.height-Yja)/2-Yja;var _ja=this.getDom();this.safeSetOffset({left:Math.max(Zja|0,0),top:Math.max($ja|0,0)});if(!qja.hasClass(_ja,"edui-state-centered")){_ja.className+=" edui-state-centered"}}else{var a9a=this.getDom(),b9a=this.getDom("content");a9a.style.display="block";var c9a=UE.ui.uiUtils.getClientRect(a9a),d9a=UE.ui.uiUtils.getClientRect(b9a);a9a.style.left="-100000px";b9a.style.width=Wja.width-c9a.width+d9a.width+"px";b9a.style.height=Wja.height-c9a.height+d9a.height+"px";a9a.style.width=Wja.width+"px";a9a.style.height=Wja.height+"px";a9a.style.left=0;this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}};document.documentElement.style.overflowX="hidden";document.documentElement.style.overflowY="hidden";document.body.style.overflowX="hidden";document.body.style.overflowY="hidden"}this._show()},getContentHtml:function(){var e9a="";if(typeof this.content=="string"){e9a=this.content}else if(this.iframeUrl){e9a='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'}return e9a},getHtmlTpl:function(){var f9a="";if(this.buttons){var g9a=[];for(var h9a=0;h9a<this.buttons.length;h9a++){g9a[h9a]=this.buttons[h9a].renderHtml()}f9a='<div class="%%-foot">'+'<div id="##_buttons" class="%%-buttons">'+g9a.join("")+"</div>"+"</div>"}return'<div id="##" class="%%"><div '+(!this.fullscreen?'class="%%"':'class="%%-wrap edui-dialog-fullscreen-flag"')+'><div id="##_body" class="%%-body">'+'<div class="%%-shadow"></div>'+'<div id="##_titlebar" class="%%-titlebar">'+'<div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);">'+'<span class="%%-caption">'+(this.title||"")+"</span>"+"</div>"+this.closeButton.renderHtml()+"</div>"+'<div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+f9a+"</div></div></div>"},postRender:function(){if(!this.modalMask.getDom()){this.modalMask.render();this.modalMask.hide()}if(!this.dragMask.getDom()){this.dragMask.render();this.dragMask.hide()}var i9a=this;this.addListener("show",function(){i9a.modalMask.show(this.getDom().style.zIndex-2)});this.addListener("hide",function(){i9a.modalMask.hide()});if(this.buttons){for(var j9a=0;j9a<this.buttons.length;j9a++){this.buttons[j9a].postRender()}}qja.on(window,"resize",function(){setTimeout(function(){if(!i9a.isHidden()){i9a.safeSetOffset(rja.getClientRect(i9a.getDom()))}})});this._hide()},mesureSize:function(){var k9a=this.getDom("body");var l9a=rja.getClientRect(this.getDom("content")).width;var m9a=k9a.style;m9a.width=l9a;return rja.getClientRect(k9a)},_onTitlebarMouseDown:function(n9a,o9a){if(this.draggable){var p9a;var q9a=rja.getViewportRect();var r9a=this;rja.startDrag(n9a,{ondragstart:function(){p9a=rja.getClientRect(r9a.getDom());r9a.getDom("contmask").style.visibility="visible";r9a.dragMask.show(r9a.getDom().style.zIndex-1)},ondragmove:function(s9a,t9a){var u9a=p9a.left+s9a;var v9a=p9a.top+t9a;r9a.safeSetOffset({left:u9a,top:v9a})},ondragstop:function(){r9a.getDom("contmask").style.visibility="hidden";qja.removeClasses(r9a.getDom(),["edui-state-centered"]);r9a.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml();this.fireEvent("dialogafterreset")},_show:function(){if(this._hidden){this.getDom().style.display="";this.editor.container.style.zIndex&&(this.getDom().style.zIndex=this.editor.container.style.zIndex*1+10);this._hidden=false;this.fireEvent("show");baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4}},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var w9a=this.getDom();w9a.style.display="none";w9a.style.zIndex="";w9a.style.width="";w9a.style.height="";this._hidden=true;this.fireEvent("hide")}},open:function(){if(this.autoReset){try{this.reset()}catch(x9a){this.render();this.open()}}this.showAtCenter();if(this.iframeUrl){try{this.getDom("iframe").focus()}catch(y9a){}}yja=this},_onCloseButtonClick:function(z9a,A9a){this.close(false)},close:function(B9a){if(this.fireEvent("close",B9a)!==false){if(this.fullscreen){document.documentElement.style.overflowX=this._originalContext.html.overflowX;document.documentElement.style.overflowY=this._originalContext.html.overflowY;document.body.style.overflowX=this._originalContext.body.overflowX;document.body.style.overflowY=this._originalContext.body.overflowY;delete this._originalContext}this._hide();var C9a=this.getDom("content");var D9a=this.getDom("iframe");if(C9a&&D9a){var E9a=D9a.contentDocument||D9a.contentWindow.document;E9a&&(E9a.body.innerHTML="");qja.remove(C9a)}}}};pja.inherits(vja,tja)})();(function(){var F9a=baidu.editor.utils,G9a=baidu.editor.ui.Menu,H9a=baidu.editor.ui.SplitButton,I9a=baidu.editor.ui.MenuButton=function(J9a){this.initOptions(J9a);this.initMenuButton()};I9a.prototype={initMenuButton:function(){var K9a=this;this.uiName="menubutton";this.popup=new G9a({items:K9a.items,className:K9a.className,editor:K9a.editor});this.popup.addListener("show",function(){var L9a=this;for(var M9a=0;M9a<L9a.items.length;M9a++){L9a.items[M9a].removeState("checked");if(L9a.items[M9a].value==K9a._value){L9a.items[M9a].addState("checked");this.value=K9a._value}}});this.initSplitButton()},setValue:function(N9a){this._value=N9a}};F9a.inherits(I9a,H9a)})();(function(){var O9a=baidu.editor.utils,P9a=baidu.editor.ui.Popup,Q9a=baidu.editor.ui.SplitButton,R9a=baidu.editor.ui.MultiMenuPop=function(S9a){this.initOptions(S9a);this.initMultiMenu()};R9a.prototype={initMultiMenu:function(){var T9a=this;this.popup=new P9a({content:"",editor:T9a.editor,iframe_rendered:false,onshow:function(){if(!this.iframe_rendered){this.iframe_rendered=true;this.getDom("content").innerHTML='<iframe id="'+T9a.id+'_iframe" src="'+T9a.iframeUrl+'" frameborder="0"></iframe>';T9a.editor.container.style.zIndex&&(this.getDom().style.zIndex=T9a.editor.container.style.zIndex*1+1)}}});this.onbuttonclick=function(){this.showPopup()};this.initSplitButton()}};O9a.inherits(R9a,Q9a)})();(function(){var U9a=baidu.editor.ui,V9a=U9a.UIBase,W9a=U9a.uiUtils,X9a=baidu.editor.utils,Y9a=baidu.editor.dom.domUtils;var Z9a=[],$9a,_9a=false;var aka=U9a.ShortCutMenu=function(cka){this.initOptions(cka);this.initShortCutMenu()};aka.postHide=bka;aka.prototype={isHidden:true,SPACE:5,initShortCutMenu:function(){this.items=this.items||[];this.initUIBase();this.initItems();this.initEvent();Z9a.push(this)},initEvent:function(){var dka=this,eka=dka.editor.document;Y9a.on(eka,"mousemove",function(fka){if(dka.isHidden===false){if(dka.getSubMenuMark()||dka.eventType=="contextmenu")return;var gka=true,hka=dka.getDom(),ika=hka.offsetWidth,jka=hka.offsetHeight,kka=ika/2+dka.SPACE,lka=jka/2,mka=Math.abs(fka.screenX-dka.left),nka=Math.abs(fka.screenY-dka.top);clearTimeout($9a);$9a=setTimeout(function(){if(nka>0&&nka<lka){dka.setOpacity(hka,"1")}else if(nka>lka&&nka<lka+70){dka.setOpacity(hka,"0.5");gka=false}else if(nka>lka+70&&nka<lka+140){dka.hide()}if(gka&&mka>0&&mka<kka){dka.setOpacity(hka,"1")}else if(mka>kka&&mka<kka+70){dka.setOpacity(hka,"0.5")}else if(mka>kka+70&&mka<kka+140){dka.hide()}})}});if(browser.chrome){Y9a.on(eka,"mouseout",function(oka){var pka=oka.relatedTarget||oka.toElement;if(pka==null||pka.tagName=="HTML"){dka.hide()}})}dka.editor.addListener("afterhidepop",function(){if(!dka.isHidden){_9a=true}})},initItems:function(){if(X9a.isArray(this.items)){for(var qka=0,rka=this.items.length;qka<rka;qka++){var ska=this.items[qka].toLowerCase();if(U9a[ska]){this.items[qka]=new U9a[ska](this.editor);this.items[qka].className+=" edui-shortcutsubmenu "}}}},setOpacity:function(tka,uka){if(browser.ie&&browser.version<9){tka.style.filter="alpha(opacity = "+parseFloat(uka)*100+");"}else{tka.style.opacity=uka}},getSubMenuMark:function(){_9a=false;var vka=W9a.getFixedLayer();var wka=Y9a.getElementsByTagName(vka,"div",function(zka){return Y9a.hasClass(zka,"edui-shortcutsubmenu edui-popup")});for(var xka=0,yka;yka=wka[xka++];){if(yka.style.display!="none"){_9a=true}}return _9a},show:function(Aka,Bka){var Cka=this,Dka={},Eka=this.getDom(),Fka=W9a.getFixedLayer();function Gka(Jka){if(Jka.left<0){Jka.left=0}if(Jka.top<0){Jka.top=0}Eka.style.cssText="position:absolute;left:"+Jka.left+"px;top:"+Jka.top+"px;"}function Hka(Kka){if(!Kka.tagName){Kka=Kka.getDom()}Dka.left=parseInt(Kka.style.left);Dka.top=parseInt(Kka.style.top);Dka.top-=Eka.offsetHeight+15;Gka(Dka)}Cka.eventType=Aka.type;Eka.style.cssText="display:block;left:-9999px";if(Aka.type=="contextmenu"&&Bka){var Ika=Y9a.getElementsByTagName(Fka,"div","edui-contextmenu")[0];if(Ika){Hka(Ika)}else{Cka.editor.addListener("aftershowcontextmenu",function(Lka,Mka){Hka(Mka)})}}else{Dka=W9a.getViewportOffsetByEvent(Aka);Dka.top-=Eka.offsetHeight+Cka.SPACE;Dka.left+=Cka.SPACE+20;Gka(Dka);Cka.setOpacity(Eka,.2)}Cka.isHidden=false;Cka.left=Aka.screenX+Eka.offsetWidth/2-Cka.SPACE;Cka.top=Aka.screenY-Eka.offsetHeight/2-Cka.SPACE;if(Cka.editor){Eka.style.zIndex=Cka.editor.container.style.zIndex*1+10;Fka.style.zIndex=Eka.style.zIndex-1}},hide:function(){if(this.getDom()){this.getDom().style.display="none"}this.isHidden=true},postRender:function(){if(X9a.isArray(this.items)){for(var Nka=0,Oka;Oka=this.items[Nka++];){Oka.postRender()}}},getHtmlTpl:function(){var Pka;if(X9a.isArray(this.items)){Pka=[];for(var Qka=0;Qka<this.items.length;Qka++){Pka[Qka]=this.items[Qka].renderHtml()}Pka=Pka.join("")}else{Pka=this.items}return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+Pka+"</div>"}};X9a.inherits(aka,V9a);function bka(Rka){var Ska=Rka.target||Rka.srcElement,Tka=Y9a.findParent(Ska,function(Wka){return Y9a.hasClass(Wka,"edui-shortcutmenu")||Y9a.hasClass(Wka,"edui-popup")},true);if(!Tka){for(var Uka=0,Vka;Vka=Z9a[Uka++];){Vka.hide()}}}Y9a.on(document,"mousedown",function(Xka){bka(Xka)});Y9a.on(window,"scroll",function(Yka){bka(Yka)})})();(function(){var Zka=baidu.editor.utils,$ka=baidu.editor.ui.UIBase,_ka=baidu.editor.ui.Breakline=function(ala){this.initOptions(ala);this.initSeparator()};_ka.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}};Zka.inherits(_ka,$ka)})();(function(){var bla=baidu.editor.utils,cla=baidu.editor.dom.domUtils,dla=baidu.editor.ui.UIBase,ela=baidu.editor.ui.Message=function(fla){this.initOptions(fla);this.initMessage()};ela.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%">'+' <div id="##_closer" class="edui-message-closer">×</div>'+' <div id="##_body" class="edui-message-body edui-message-type-info">'+' <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe>'+' <div class="edui-shadow"></div>'+' <div id="##_content" class="edui-message-content">'+"  </div>"+" </div>"+"</div>"},reset:function(gla){var hla=this;if(!gla.keepshow){clearTimeout(this.timer);hla.timer=setTimeout(function(){hla.hide()},gla.timeout||4e3)}gla.content!==undefined&&hla.setContent(gla.content);gla.type!==undefined&&hla.setType(gla.type);hla.show()},postRender:function(){var ila=this,jla=this.getDom("closer");jla&&cla.on(jla,"click",function(){ila.hide()})},setContent:function(kla){this.getDom("content").innerHTML=kla},setType:function(lla){lla=lla||"info";var mla=this.getDom("body");mla.className=mla.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+lla)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var nla=this.getDom("body").match(/edui-message-type-([\w-]+)/);return nla?nla[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var ola=this.getDom();if(ola){ola.style.display="none";ola.parentNode&&ola.parentNode.removeChild(ola)}}};bla.inherits(ela,dla)})();(function(){var pla=baidu.editor.utils;var qla=baidu.editor.ui;var rla=qla.Dialog;qla.buttons={};qla.Dialog=function(Fla){var Gla=new rla(Fla);Gla.addListener("hide",function(){if(Gla.editor){var Hla=Gla.editor;try{if(browser.gecko){var Ila=Hla.window.scrollY,Jla=Hla.window.scrollX;Hla.body.focus();Hla.window.scrollTo(Jla,Ila)}else{Hla.focus()}}catch(Kla){}}});return Gla};var sla={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"};var tla=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts","uploaderbtn"];for(var ula=0,vla;vla=tla[ula++];){vla=vla.toLowerCase();qla[vla]=function(Lla){return function(Mla){var Nla=new qla.Button({className:"edui-for-"+Lla,title:Mla.options.labelMap[Lla]||Mla.getLang("labelMap."+Lla)||"",onclick:function(){Mla.execCommand(Lla)},theme:Mla.options.theme,showText:false});qla.buttons[Lla]=Nla;Mla.addListener("selectionchange",function(Ola,Pla,Qla){var Rla=Mla.queryCommandState(Lla);if(Rla==-1){Nla.setDisabled(true);Nla.setChecked(false)}else{if(!Qla){Nla.setDisabled(false);Nla.setChecked(Rla)}}});return Nla}}(vla)}qla.cleardoc=function(Sla){var Tla=new qla.Button({className:"edui-for-cleardoc",title:Sla.options.labelMap.cleardoc||Sla.getLang("labelMap.cleardoc")||"",theme:Sla.options.theme,onclick:function(){if(confirm(Sla.getLang("confirmClear"))){Sla.execCommand("cleardoc")}}});qla.buttons["cleardoc"]=Tla;Sla.addListener("selectionchange",function(){Tla.setDisabled(Sla.queryCommandState("cleardoc")==-1)});return Tla};var wla={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var xla in wla){(function(Ula,Vla){for(var Wla=0,Xla;Xla=Vla[Wla++];){(function(Yla){qla[Ula.replace("float","")+Yla]=function(Zla){var $la=new qla.Button({className:"edui-for-"+Ula.replace("float","")+Yla,title:Zla.options.labelMap[Ula.replace("float","")+Yla]||Zla.getLang("labelMap."+Ula.replace("float","")+Yla)||"",theme:Zla.options.theme,onclick:function(){Zla.execCommand(Ula,Yla)}});qla.buttons[Ula]=$la;Zla.addListener("selectionchange",function(_la,ama,bma){$la.setDisabled(Zla.queryCommandState(Ula)==-1);$la.setChecked(Zla.queryCommandValue(Ula)==Yla&&!bma)});return $la}})(Xla)}})(xla,wla[xla])}for(var ula=0,vla;vla=["backcolor","forecolor"][ula++];){qla[vla]=function(cma){return function(dma){var ema=new qla.ColorButton({className:"edui-for-"+cma,color:"default",title:dma.options.labelMap[cma]||dma.getLang("labelMap."+cma)||"",editor:dma,onpickcolor:function(fma,gma){dma.execCommand(cma,gma)},onpicknocolor:function(){dma.execCommand(cma,"default");this.setColor("transparent");this.color="default"},onbuttonclick:function(){dma.execCommand(cma,this.color)}});qla.buttons[cma]=ema;dma.addListener("selectionchange",function(){ema.setDisabled(dma.queryCommandState(cma)==-1)});return ema}}(vla)}var yla={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var xla in yla){(function(hma,ima){for(var jma=0,kma;kma=ima[jma++];){if(browser.opera&&kma==="searchreplace"){continue}(function(lma){qla[lma]=function(mma,nma,oma){nma=nma||(mma.options.iframeUrlMap||{})[lma]||sla[lma];oma=mma.options.labelMap[lma]||mma.getLang("labelMap."+lma)||"";var pma;if(nma){pma=new qla.Dialog(pla.extend({iframeUrl:mma.ui.mapUrl(nma),editor:mma,className:"edui-for-"+lma,title:oma,holdScroll:lma==="insertimage",fullscreen:/charts|preview/.test(lma),closeDialog:mma.getLang("closeDialog")},hma=="ok"?{buttons:[{className:"edui-okbutton",label:mma.getLang("ok"),editor:mma,onclick:function(){pma.close(true)}},{className:"edui-cancelbutton",label:mma.getLang("cancel"),editor:mma,onclick:function(){pma.close(false)}}]}:{}));mma.ui._dialogs[lma+"Dialog"]=pma}var qma=new qla.Button({className:"edui-for-"+lma,title:oma,onclick:function(){if(pma){switch(lma){case"wordimage":var rma=mma.execCommand("wordimage");if(rma&&rma.length){pma.render();pma.open()}break;case"scrawl":if(mma.queryCommandState("scrawl")!=-1){pma.render();pma.open()}break;default:pma.render();pma.open()}}},theme:mma.options.theme,disabled:lma=="scrawl"&&mma.queryCommandState("scrawl")==-1||lma=="charts"});qla.buttons[lma]=qma;mma.addListener("selectionchange",function(){var sma={edittable:1};if(lma in sma)return;var tma=mma.queryCommandState(lma);if(qma.getDom()){qma.setDisabled(tma==-1);qma.setChecked(tma)}});return qma}})(kma.toLowerCase())}})(xla,yla[xla])}qla.snapscreen=function(uma,vma,wma){wma=uma.options.labelMap["snapscreen"]||uma.getLang("labelMap.snapscreen")||"";var xma=new qla.Button({className:"edui-for-snapscreen",title:wma,onclick:function(){uma.execCommand("snapscreen")},theme:uma.options.theme});qla.buttons["snapscreen"]=xma;vma=vma||(uma.options.iframeUrlMap||{})["snapscreen"]||sla["snapscreen"];if(vma){var yma=new qla.Dialog({iframeUrl:uma.ui.mapUrl(vma),editor:uma,className:"edui-for-snapscreen",title:wma,buttons:[{className:"edui-okbutton",label:uma.getLang("ok"),editor:uma,onclick:function(){yma.close(true)}},{className:"edui-cancelbutton",label:uma.getLang("cancel"),editor:uma,onclick:function(){yma.close(false)}}]});yma.render();uma.ui._dialogs["snapscreenDialog"]=yma}uma.addListener("selectionchange",function(){xma.setDisabled(uma.queryCommandState("snapscreen")==-1)});return xma};qla.insertcode=function(zma,Ama,Bma){Ama=zma.options["insertcode"]||[];Bma=zma.options.labelMap["insertcode"]||zma.getLang("labelMap.insertcode")||"";var Cma=[];pla.each(Ama,function(Ema,Fma){Cma.push({label:Ema,value:Fma,theme:zma.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var Dma=new qla.Combox({editor:zma,items:Cma,onselect:function(Gma,Hma){zma.execCommand("insertcode",this.items[Hma].value)},onbuttonclick:function(){this.showPopup()},title:Bma,initValue:Bma,className:"edui-for-insertcode",indexByValue:function(Ima){if(Ima){for(var Jma=0,Kma;Kma=this.items[Jma];Jma++){if(Kma.value.indexOf(Ima)!=-1)return Jma}}return-1}});qla.buttons["insertcode"]=Dma;zma.addListener("selectionchange",function(Lma,Mma,Nma){if(!Nma){var Oma=zma.queryCommandState("insertcode");if(Oma==-1){Dma.setDisabled(true)}else{Dma.setDisabled(false);var Pma=zma.queryCommandValue("insertcode");if(!Pma){Dma.setValue(Bma);return}Pma&&(Pma=Pma.replace(/['"]/g,"").split(",")[0]);Dma.setValue(Pma)}}});return Dma};qla.fontfamily=function(Qma,Rma,Sma){Rma=Qma.options["fontfamily"]||[];Sma=Qma.options.labelMap["fontfamily"]||Qma.getLang("labelMap.fontfamily")||"";if(!Rma.length)return;for(var Tma=0,Uma,Vma=[];Uma=Rma[Tma];Tma++){var Wma=Qma.getLang("fontfamily")[Uma.name]||"";(function(Yma,Zma){Vma.push({label:Yma,value:Zma,theme:Qma.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+pla.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(Uma.label||Wma,Uma.val)}var Xma=new qla.Combox({editor:Qma,items:Vma,onselect:function($ma,_ma){Qma.execCommand("FontFamily",this.items[_ma].value)},onbuttonclick:function(){this.showPopup()},title:Sma,initValue:Sma,className:"edui-for-fontfamily",indexByValue:function(ana){if(ana){for(var bna=0,cna;cna=this.items[bna];bna++){if(cna.value.indexOf(ana)!=-1)return bna}}return-1}});qla.buttons["fontfamily"]=Xma;Qma.addListener("selectionchange",function(dna,ena,fna){if(!fna){var gna=Qma.queryCommandState("FontFamily");if(gna==-1){Xma.setDisabled(true)}else{Xma.setDisabled(false);var hna=Qma.queryCommandValue("FontFamily");hna&&(hna=hna.replace(/['"]/g,"").split(",")[0]);Xma.setValue(hna)}}});return Xma};qla.fontsize=function(ina,jna,kna){kna=ina.options.labelMap["fontsize"]||ina.getLang("labelMap.fontsize")||"";jna=jna||ina.options["fontsize"]||[];if(!jna.length)return;var lna=[];for(var mna=0;mna<jna.length;mna++){var nna=jna[mna]+"px";lna.push({label:nna,value:nna,theme:ina.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var ona=new qla.Combox({editor:ina,items:lna,title:kna,initValue:kna,onselect:function(pna,qna){ina.execCommand("FontSize",this.items[qna].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});qla.buttons["fontsize"]=ona;ina.addListener("selectionchange",function(rna,sna,tna){if(!tna){var una=ina.queryCommandState("FontSize");if(una==-1){ona.setDisabled(true)}else{ona.setDisabled(false);ona.setValue(ina.queryCommandValue("FontSize"))}}});return ona};qla.paragraph=function(vna,wna,xna){xna=vna.options.labelMap["paragraph"]||vna.getLang("labelMap.paragraph")||"";wna=vna.options["paragraph"]||[];if(pla.isEmptyObject(wna))return;var yna=[];for(var zna in wna){yna.push({value:zna,label:wna[zna]||vna.getLang("paragraph")[zna],theme:vna.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}})}var Ana=new qla.Combox({editor:vna,items:yna,title:xna,initValue:xna,className:"edui-for-paragraph",onselect:function(Bna,Cna){vna.execCommand("Paragraph",this.items[Cna].value)},onbuttonclick:function(){this.showPopup()}});qla.buttons["paragraph"]=Ana;vna.addListener("selectionchange",function(Dna,Ena,Fna){if(!Fna){var Gna=vna.queryCommandState("Paragraph");if(Gna==-1){Ana.setDisabled(true)}else{Ana.setDisabled(false);var Hna=vna.queryCommandValue("Paragraph");var Ina=Ana.indexByValue(Hna);if(Ina!=-1){Ana.setValue(Hna)}else{Ana.setValue(Ana.initValue)}}}});return Ana};qla.customstyle=function(Jna){var Kna=Jna.options["customstyle"]||[],Lna=Jna.options.labelMap["customstyle"]||Jna.getLang("labelMap.customstyle")||"";if(!Kna.length)return;var Mna=Jna.getLang("customstyle");for(var Nna=0,Ona=[],Pna;Pna=Kna[Nna++];){(function(Rna){var Sna={};Sna.label=Rna.label?Rna.label:Mna[Rna.name];Sna.style=Rna.style;Sna.className=Rna.className;Sna.tag=Rna.tag;Ona.push({label:Sna.label,value:Sna,theme:Jna.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label">'+"<"+Sna.tag+" "+(Sna.className?' class="'+Sna.className+'"':"")+(Sna.style?' style="'+Sna.style+'"':"")+">"+Sna.label+"</"+Sna.tag+">"+"</div>"}})})(Pna)}var Qna=new qla.Combox({editor:Jna,items:Ona,title:Lna,initValue:Lna,className:"edui-for-customstyle",onselect:function(Tna,Una){Jna.execCommand("customstyle",this.items[Una].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(Vna){for(var Wna=0,Xna;Xna=this.items[Wna++];){if(Xna.label==Vna){return Wna-1}}return-1}});qla.buttons["customstyle"]=Qna;Jna.addListener("selectionchange",function(Yna,Zna,$na){if(!$na){var _na=Jna.queryCommandState("customstyle");if(_na==-1){Qna.setDisabled(true)}else{Qna.setDisabled(false);var aoa=Jna.queryCommandValue("customstyle");var boa=Qna.indexByValue(aoa);if(boa!=-1){Qna.setValue(aoa)}else{Qna.setValue(Qna.initValue)}}}});return Qna};qla.inserttable=function(coa,doa,eoa){eoa=coa.options.labelMap["inserttable"]||coa.getLang("labelMap.inserttable")||"";var foa=new qla.TableButton({editor:coa,title:eoa,className:"edui-for-inserttable",onpicktable:function(goa,hoa,ioa){coa.execCommand("InsertTable",{numRows:ioa,numCols:hoa,border:1})},onbuttonclick:function(){this.showPopup()}});qla.buttons["inserttable"]=foa;coa.addListener("selectionchange",function(){foa.setDisabled(coa.queryCommandState("inserttable")==-1)});return foa};qla.lineheight=function(joa){var koa=joa.options.lineheight||[];if(!koa.length)return;for(var loa=0,moa,noa=[];moa=koa[loa++];){noa.push({label:moa,value:moa,theme:joa.options.theme,onclick:function(){joa.execCommand("lineheight",this.value)}})}var ooa=new qla.MenuButton({editor:joa,className:"edui-for-lineheight",title:joa.options.labelMap["lineheight"]||joa.getLang("labelMap.lineheight")||"",items:noa,onbuttonclick:function(){var poa=joa.queryCommandValue("LineHeight")||this.value;joa.execCommand("LineHeight",poa)}});qla.buttons["lineheight"]=ooa;joa.addListener("selectionchange",function(){var qoa=joa.queryCommandState("LineHeight");if(qoa==-1){ooa.setDisabled(true)}else{ooa.setDisabled(false);var roa=joa.queryCommandValue("LineHeight");roa&&ooa.setValue((roa+"").replace(/cm/,""));ooa.setChecked(qoa)}});return ooa};var zla=["top","bottom"];for(var Ala=0,Bla;Bla=zla[Ala++];){(function(soa){qla["rowspacing"+soa]=function(toa){var uoa=toa.options["rowspacing"+soa]||[];if(!uoa.length)return null;for(var voa=0,woa,xoa=[];woa=uoa[voa++];){xoa.push({label:woa,value:woa,theme:toa.options.theme,onclick:function(){toa.execCommand("rowspacing",this.value,soa)}})}var yoa=new qla.MenuButton({editor:toa,className:"edui-for-rowspacing"+soa,title:toa.options.labelMap["rowspacing"+soa]||toa.getLang("labelMap.rowspacing"+soa)||"",items:xoa,onbuttonclick:function(){var zoa=toa.queryCommandValue("rowspacing",soa)||this.value;toa.execCommand("rowspacing",zoa,soa)}});qla.buttons[soa]=yoa;toa.addListener("selectionchange",function(){var Aoa=toa.queryCommandState("rowspacing",soa);if(Aoa==-1){yoa.setDisabled(true)}else{yoa.setDisabled(false);var Boa=toa.queryCommandValue("rowspacing",soa);Boa&&yoa.setValue((Boa+"").replace(/%/,""));yoa.setChecked(Aoa)}});return yoa}})(Bla)}var Cla=["insertorderedlist","insertunorderedlist"];for(var Dla=0,Ela;Ela=Cla[Dla++];){(function(Coa){qla[Coa]=function(Doa){var Eoa=Doa.options[Coa],Foa=function(){Doa.execCommand(Coa,this.value)},Goa=[];for(var Hoa in Eoa){Goa.push({label:Eoa[Hoa]||Doa.getLang()[Coa][Hoa]||"",value:Hoa,theme:Doa.options.theme,onclick:Foa})}var Ioa=new qla.MenuButton({editor:Doa,className:"edui-for-"+Coa,title:Doa.getLang("labelMap."+Coa)||"",items:Goa,onbuttonclick:function(){var Joa=Doa.queryCommandValue(Coa)||this.value;Doa.execCommand(Coa,Joa)}});qla.buttons[Coa]=Ioa;Doa.addListener("selectionchange",function(){var Koa=Doa.queryCommandState(Coa);if(Koa==-1){Ioa.setDisabled(true)}else{Ioa.setDisabled(false);var Loa=Doa.queryCommandValue(Coa);Ioa.setValue(Loa);Ioa.setChecked(Koa)}});return Ioa}})(Ela)}qla.fullscreen=function(Moa,Noa){Noa=Moa.options.labelMap["fullscreen"]||Moa.getLang("labelMap.fullscreen")||"";var Ooa=new qla.Button({className:"edui-for-fullscreen",title:Noa,theme:Moa.options.theme,onclick:function(){if(Moa.ui){Moa.ui.setFullScreen(!Moa.ui.isFullScreen())}this.setChecked(Moa.ui.isFullScreen())}});qla.buttons["fullscreen"]=Ooa;Moa.addListener("selectionchange",function(){var Poa=Moa.queryCommandState("fullscreen");Ooa.setDisabled(Poa==-1);Ooa.setChecked(Moa.ui.isFullScreen())});return Ooa};qla["emotion"]=function(Qoa,Roa){var Soa="emotion";var Toa=new qla.MultiMenuPop({title:Qoa.options.labelMap[Soa]||Qoa.getLang("labelMap."+Soa+"")||"",editor:Qoa,className:"edui-for-"+Soa,iframeUrl:Qoa.ui.mapUrl(Roa||(Qoa.options.iframeUrlMap||{})[Soa]||sla[Soa])});qla.buttons[Soa]=Toa;Qoa.addListener("selectionchange",function(){Toa.setDisabled(Qoa.queryCommandState(Soa)==-1)});return Toa};qla.autotypeset=function(Uoa){var Voa=new qla.AutoTypeSetButton({editor:Uoa,title:Uoa.options.labelMap["autotypeset"]||Uoa.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){Uoa.execCommand("autotypeset")}});qla.buttons["autotypeset"]=Voa;Uoa.addListener("selectionchange",function(){Voa.setDisabled(Uoa.queryCommandState("autotypeset")==-1)});return Voa};qla["simpleupload"]=function(Woa){var Xoa="simpleupload",Yoa=new qla.Button({className:"edui-for-"+Xoa,title:Woa.options.labelMap[Xoa]||Woa.getLang("labelMap."+Xoa)||"",onclick:function(){},theme:Woa.options.theme,showText:false});qla.buttons[Xoa]=Yoa;Woa.addListener("ready",function(){var Zoa=Yoa.getDom("body"),$oa=Zoa.children[0];Woa.fireEvent("simpleuploadbtnready",$oa)});Woa.addListener("selectionchange",function(_oa,apa,bpa){var cpa=Woa.queryCommandState(Xoa);if(cpa==-1){Yoa.setDisabled(true);Yoa.setChecked(false)}else{if(!bpa){Yoa.setDisabled(false);Yoa.setChecked(cpa)}}});return Yoa}})();(function(){var dpa=baidu.editor.utils,epa=baidu.editor.ui.uiUtils,fpa=baidu.editor.ui.UIBase,gpa=baidu.editor.dom.domUtils;var hpa=[];function ipa(kpa){this.initOptions(kpa);this.initEditorUI()}ipa.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this;this._dialogs={};this.initUIBase();this._initToolbars();var lpa=this.editor,mpa=this;lpa.addListener("ready",function(){lpa.getDialog=function(tpa){return lpa.ui._dialogs[tpa+"Dialog"]};gpa.on(lpa.window,"scroll",function(upa){baidu.editor.ui.Popup.postHide(upa)});lpa.ui._actualFrameWidth=lpa.options.initialFrameWidth;UE.browser.ie&&UE.browser.version===6&&lpa.container.ownerDocument.execCommand("BackgroundImageCache",false,true);if(lpa.options.elementPathEnabled){lpa.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+lpa.getLang("elementPathTip")+":</div>"}if(lpa.options.wordCount){function spa(){qpa(lpa,mpa);gpa.un(lpa.document,"click",arguments.callee)}gpa.on(lpa.document,"click",spa);lpa.ui.getDom("wordcount").innerHTML=lpa.getLang("wordCountTip")}lpa.ui._scale();if(lpa.options.scaleEnabled){if(lpa.autoHeightEnabled){lpa.disableAutoHeight()}mpa.enableScale()}else{mpa.disableScale()}if(!lpa.options.elementPathEnabled&&!lpa.options.wordCount&&!lpa.options.scaleEnabled){lpa.ui.getDom("elementpath").style.display="none";lpa.ui.getDom("wordcount").style.display="none";lpa.ui.getDom("scale").style.display="none"}if(!lpa.selection.isFocus())return;lpa.fireEvent("selectionchange",false,true)});lpa.addListener("mousedown",function(vpa,wpa){var xpa=wpa.target||wpa.srcElement;baidu.editor.ui.Popup.postHide(wpa,xpa);baidu.editor.ui.ShortCutMenu.postHide(wpa)});lpa.addListener("delcells",function(){if(UE.ui["edittip"]){new UE.ui["edittip"](lpa)}lpa.getDialog("edittip").open()});var npa,opa=false,ppa;lpa.addListener("afterpaste",function(){if(lpa.queryCommandState("pasteplain"))return;if(baidu.editor.ui.PastePicker){npa=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:lpa}),editor:lpa,className:"edui-wordpastepop"});npa.render()}opa=true});lpa.addListener("afterinserthtml",function(){clearTimeout(ppa);ppa=setTimeout(function(){if(npa&&(opa||lpa.ui._isTransfer)){if(npa.isHidden()){var ypa=gpa.createElement(lpa.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"}),zpa=lpa.selection.getRange();zpa.insertNode(ypa);var Apa=getDomNode(ypa,"firstChild","previousSibling");Apa&&npa.showAnchor(Apa.nodeType==3?Apa.parentNode:Apa);gpa.remove(ypa)}else{npa.show()}delete lpa.ui._isTransfer;opa=false}},200)});lpa.addListener("contextmenu",function(Bpa,Cpa){baidu.editor.ui.Popup.postHide(Cpa)});lpa.addListener("keydown",function(Dpa,Epa){if(npa)npa.dispose(Epa);var Fpa=Epa.keyCode||Epa.which;if(Epa.altKey&&Fpa==90){UE.ui.buttons["fullscreen"].onclick()}});lpa.addListener("wordcount",function(Gpa){qpa(this,mpa)});function qpa(Hpa,Ipa){Hpa.setOpt({wordCount:true,maximumWords:1e4,wordCountMsg:Hpa.options.wordCountMsg||Hpa.getLang("wordCountMsg"),wordOverFlowMsg:Hpa.options.wordOverFlowMsg||Hpa.getLang("wordOverFlowMsg")});var Jpa=Hpa.options,Kpa=Jpa.maximumWords,Lpa=Jpa.wordCountMsg,Mpa=Jpa.wordOverFlowMsg,Npa=Ipa.getDom("wordcount");if(!Jpa.wordCount){return}var Opa=Hpa.getContentLength(true);if(Opa>Kpa){Npa.innerHTML=Mpa;Hpa.fireEvent("wordcountoverflow")}else{Npa.innerHTML=Lpa.replace("{#leave}",Kpa-Opa).replace("{#count}",Opa)}}lpa.addListener("selectionchange",function(){if(lpa.options.elementPathEnabled){mpa[(lpa.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"]()}if(lpa.options.scaleEnabled){mpa[(lpa.queryCommandState("scale")==-1?"dis":"en")+"ableScale"]()}});var rpa=new baidu.editor.ui.Popup({editor:lpa,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide();lpa.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(Ppa){this.hide();lpa.ui._dialogs[Ppa]&&lpa.ui._dialogs[Ppa].open()},_onImgSetFloat:function(Qpa){this.hide();lpa.execCommand("imagefloat",Qpa)},_setIframeAlign:function(Rpa){var Spa=rpa.anchorEl;var Tpa=Spa.cloneNode(true);switch(Rpa){case-2:Tpa.setAttribute("align","");break;case-1:Tpa.setAttribute("align","left");break;case 1:Tpa.setAttribute("align","right");break}Spa.parentNode.insertBefore(Tpa,Spa);gpa.remove(Spa);rpa.anchorEl=Tpa;rpa.showAnchor(rpa.anchorEl)},_updateIframe:function(){var Upa=lpa._iframe=rpa.anchorEl;if(gpa.hasClass(Upa,"ueditor_baidumap")){lpa.selection.getRange().selectNode(Upa).select();lpa.ui._dialogs.mapDialog.open();rpa.hide()}else{lpa.ui._dialogs.insertframeDialog.open();rpa.hide()}},_onRemoveButtonClick:function(Vpa){lpa.execCommand(Vpa);this.hide()},queryAutoHide:function(Wpa){if(Wpa&&Wpa.ownerDocument==lpa.document){if(Wpa.tagName.toLowerCase()=="img"||gpa.findParentByTagName(Wpa,"a",true)){return Wpa!==rpa.anchorEl}}return baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,Wpa)}});rpa.render();if(lpa.options.imagePopup){lpa.addListener("mouseover",function(Xpa,Ypa){Ypa=Ypa||window.event;var Zpa=Ypa.target||Ypa.srcElement;if(lpa.ui._dialogs.insertframeDialog&&/iframe/gi.test(Zpa.tagName)){var $pa=rpa.formatHtml("<nobr>"+lpa.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+lpa.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+lpa.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+lpa.getLang("justifyright")+"</span>&nbsp;&nbsp;"+' <span onclick="$$._updateIframe( this);" class="edui-clickable">'+lpa.getLang("modify")+"</span></nobr>");if($pa){rpa.getDom("content").innerHTML=$pa;rpa.anchorEl=Zpa;rpa.showAnchor(rpa.anchorEl)}else{rpa.hide()}}});lpa.addListener("selectionchange",function(_pa,aqa){if(!aqa)return;var bqa="",cqa="",dqa=lpa.selection.getRange().getClosedNode(),eqa=lpa.ui._dialogs;if(dqa&&dqa.tagName=="IMG"){var fqa="insertimageDialog";if(dqa.className.indexOf("edui-faked-video")!=-1||dqa.className.indexOf("edui-upload-video")!=-1){fqa="insertvideoDialog"}if(dqa.className.indexOf("edui-faked-webapp")!=-1){fqa="webappDialog"}if(dqa.src.indexOf("http://api.map.baidu.com")!=-1){fqa="mapDialog"}if(dqa.className.indexOf("edui-faked-music")!=-1){fqa="musicDialog"}if(dqa.src.indexOf("http://maps.google.com/maps/api/staticmap")!=-1){fqa="gmapDialog"}if(dqa.getAttribute("anchorname")){fqa="anchorDialog";bqa=rpa.formatHtml("<nobr>"+lpa.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+lpa.getLang("modify")+"</span>&nbsp;&nbsp;"+"<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+lpa.getLang("delete")+"</span></nobr>")}if(dqa.getAttribute("word_img")){lpa.word_img=[dqa.getAttribute("word_img")];fqa="wordimageDialog"}if(gpa.hasClass(dqa,"loadingclass")||gpa.hasClass(dqa,"loaderrorclass")){fqa=""}if(!eqa[fqa]){return}cqa="<nobr>"+lpa.getLang("property")+": "+'<span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+lpa.getLang("default")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+lpa.getLang("justifyleft")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+lpa.getLang("justifyright")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+lpa.getLang("justifycenter")+"</span>&nbsp;&nbsp;"+"<span onclick=\"$$._onImgEditButtonClick('"+fqa+'\');" class="edui-clickable">'+lpa.getLang("modify")+"</span></nobr>";!bqa&&(bqa=rpa.formatHtml(cqa))}if(lpa.ui._dialogs.linkDialog){var gqa=lpa.queryCommandValue("link");var hqa;if(gqa&&(hqa=gqa.getAttribute("_href")||gqa.getAttribute("href",2))){var iqa=hqa;if(hqa.length>30){iqa=hqa.substring(0,20)+"..."}if(bqa){bqa+='<div style="height:5px;"></div>'}bqa+=rpa.formatHtml("<nobr>"+lpa.getLang("anthorMsg")+': <a target="_blank" href="'+hqa+'" title="'+hqa+'" >'+iqa+"</a>"+' <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+lpa.getLang("modify")+"</span>"+' <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+lpa.getLang("clear")+"</span></nobr>");rpa.showAnchor(gqa)}}if(bqa){rpa.getDom("content").innerHTML=bqa;rpa.anchorEl=dqa||gqa;rpa.showAnchor(rpa.anchorEl)}else{rpa.hide()}})}},_initToolbars:function(){var jqa=this.editor;var kqa=this.toolbars||[];var lqa=[];for(var mqa=0;mqa<kqa.length;mqa++){var nqa=kqa[mqa];var oqa=new baidu.editor.ui.Toolbar({theme:jqa.options.theme});for(var pqa=0;pqa<nqa.length;pqa++){var qqa=nqa[pqa];var rqa=null;if(typeof qqa=="string"){qqa=qqa.toLowerCase();if(qqa=="|"){qqa="Separator"}if(qqa=="||"){qqa="Breakline"}if(baidu.editor.ui[qqa]){rqa=new baidu.editor.ui[qqa](jqa)}if(qqa=="fullscreen"){if(lqa&&lqa[0]){lqa[0].items.splice(0,0,rqa)}else{rqa&&oqa.items.splice(0,0,rqa)}continue}}else{rqa=qqa}if(rqa&&rqa.id){oqa.add(rqa)}}lqa[mqa]=oqa}dpa.each(UE._customizeUI,function(sqa,tqa){var uqa,vqa;if(sqa.id&&sqa.id!=jqa.key){return false}uqa=sqa.execFn.call(jqa,jqa,tqa);if(uqa){vqa=sqa.index;if(vqa===undefined){vqa=oqa.items.length}oqa.add(uqa,vqa)}});this.toolbars=lqa},getHtmlTpl:function(){return'<div id="##" class="%%">'+'<div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;">'+'<div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+"</div>"+'<div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div>'+'<div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div>'+'<div style="height:0;overflow:hidden;clear:both;"></div>'+"</div>"+'<div id="##_message_holder" class="%%-messageholder"></div>'+"</div>"+'<div id="##_iframeholder" class="%%-iframeholder">'+"</div>"+'<div id="##_bottombar" class="%%-bottomContainer"><table><tr>'+'<td id="##_elementpath" class="%%-bottombar"></td>'+'<td id="##_wordcount" class="%%-wordcount"></td>'+'<td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td>'+"</tr></table></div>"+'<div id="##_scalelayer"></div>'+"</div>"},showWordImageDialog:function(){this._dialogs["wordimageDialog"].open()},renderToolbarBoxHtml:function(){var wqa=[];for(var xqa=0;xqa<this.toolbars.length;xqa++){wqa.push(this.toolbars[xqa].renderHtml())}return wqa.join("")},setFullScreen:function(yqa){var zqa=this.editor,Aqa=zqa.container.parentNode.parentNode;if(this._fullscreen!=yqa){this._fullscreen=yqa;this.editor.fireEvent("beforefullscreenchange",yqa);if(baidu.editor.browser.gecko){var Bqa=zqa.selection.getRange().createBookmark()}if(yqa){while(Aqa.tagName!="BODY"){var Cqa=baidu.editor.dom.domUtils.getComputedStyle(Aqa,"position");hpa.push(Cqa);Aqa.style.position="static";Aqa=Aqa.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow;this._bakBodyOverflow=document.body.style.overflow;this._bakAutoHeight=this.editor.autoHeightEnabled;this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this._bakEditorContaninerWidth=zqa.iframe.parentNode.offsetWidth;if(this._bakAutoHeight){zqa.autoHeightEnabled=false;this.editor.disableAutoHeight()}document.documentElement.style.overflow="hidden";window.scrollTo(0,window.scrollY);this._bakCssText=this.getDom().style.cssText;this._bakCssText1=this.getDom("iframeholder").style.cssText;zqa.iframe.parentNode.style.width="";this._updateFullScreen()}else{while(Aqa.tagName!="BODY"){Aqa.style.position=hpa.shift();Aqa=Aqa.parentNode}this.getDom().style.cssText=this._bakCssText;this.getDom("iframeholder").style.cssText=this._bakCssText1;if(this._bakAutoHeight){zqa.autoHeightEnabled=true;this.editor.enableAutoHeight()}document.documentElement.style.overflow=this._bakHtmlOverflow;document.body.style.overflow=this._bakBodyOverflow;zqa.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px";window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&zqa.body.contentEditable==="true"){var Dqa=document.createElement("input");document.body.appendChild(Dqa);zqa.body.contentEditable=false;setTimeout(function(){Dqa.focus();setTimeout(function(){zqa.body.contentEditable=true;zqa.fireEvent("fullscreenchanged",yqa);zqa.selection.getRange().moveToBookmark(Bqa).select(true);baidu.editor.dom.domUtils.remove(Dqa);yqa&&window.scroll(0,0)},0)},0)}if(zqa.body.contentEditable==="true"){this.editor.fireEvent("fullscreenchanged",yqa);this.triggerLayout()}}},_updateFullScreen:function(){if(this._fullscreen){var Eqa=epa.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+Eqa.width+"px;height:"+Eqa.height+"px;z-index:"+(this.getDom().style.zIndex*1+100);epa.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0});this.editor.setHeight(Eqa.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),true);if(browser.gecko){try{window.onresize()}catch(Fqa){}}}},_updateElementPath:function(){var Gqa=this.getDom("elementpath"),Hqa;if(this.elementPathEnabled&&(Hqa=this.editor.queryCommandValue("elementpath"))){var Iqa=[];for(var Jqa=0,Kqa;Kqa=Hqa[Jqa];Jqa++){Iqa[Jqa]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+Jqa+'&quot;);">'+Kqa+"</span>")}Gqa.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+Iqa.join(" &gt; ")+"</div>"}else{Gqa.style.display="none"}},disableElementPath:function(){var Lqa=this.getDom("elementpath");Lqa.innerHTML="";Lqa.style.display="none";this.elementPathEnabled=false},enableElementPath:function(){var Mqa=this.getDom("elementpath");Mqa.style.display="";this.elementPathEnabled=true;this._updateElementPath()},_scale:function(){var Nqa=document,Oqa=this.editor,Pqa=Oqa.container,Qqa=Oqa.document,Rqa=this.getDom("toolbarbox"),Sqa=this.getDom("bottombar"),Tqa=this.getDom("scale"),Uqa=this.getDom("scalelayer");var Vqa=false,Wqa=null,Xqa=0,Yqa=Oqa.options.minFrameWidth,Zqa=0,$qa=0,_qa=0,ara=0;function bra(){Wqa=gpa.getXY(Pqa);if(!Xqa){Xqa=Oqa.options.minFrameHeight+Rqa.offsetHeight+Sqa.offsetHeight}Uqa.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+Pqa.offsetWidth+"px;height:"+Pqa.offsetHeight+"px;z-index:"+(Oqa.options.zIndex+1);gpa.on(Nqa,"mousemove",dra);gpa.on(Qqa,"mouseup",era);gpa.on(Nqa,"mouseup",era)}var cra=this;this.editor.addListener("fullscreenchanged",function(gra,hra){if(hra){cra.disableScale()}else{if(cra.editor.options.scaleEnabled){cra.enableScale();var ira=cra.editor.document.createElement("span");cra.editor.body.appendChild(ira);cra.editor.body.style.height=Math.max(gpa.getXY(ira).y,cra.editor.iframe.offsetHeight-20)+"px";gpa.remove(ira)}}});function dra(jra){fra();var kra=jra||window.event;Zqa=kra.pageX||Nqa.documentElement.scrollLeft+kra.clientX;$qa=kra.pageY||Nqa.documentElement.scrollTop+kra.clientY;_qa=Zqa-Wqa.x;ara=$qa-Wqa.y;if(_qa>=Yqa){Vqa=true;Uqa.style.width=_qa+"px"}if(ara>=Xqa){Vqa=true;Uqa.style.height=ara+"px"}}function era(){if(Vqa){Vqa=false;Oqa.ui._actualFrameWidth=Uqa.offsetWidth-2;Pqa.style.width=Oqa.ui._actualFrameWidth+"px";Oqa.setHeight(Uqa.offsetHeight-Sqa.offsetHeight-Rqa.offsetHeight-2,true)}if(Uqa){Uqa.style.display="none"}fra();gpa.un(Nqa,"mousemove",dra);gpa.un(Qqa,"mouseup",era);gpa.un(Nqa,"mouseup",era)}function fra(){if(browser.ie)Nqa.selection.clear();else window.getSelection().removeAllRanges()}this.enableScale=function(){if(Oqa.queryCommandState("source")==1)return;Tqa.style.display="";this.scaleEnabled=true;gpa.on(Tqa,"mousedown",bra)};this.disableScale=function(){Tqa.style.display="none";this.scaleEnabled=false;gpa.un(Tqa,"mousedown",bra)}},isFullScreen:function(){return this._fullscreen},postRender:function(){fpa.prototype.postRender.call(this);for(var lra=0;lra<this.toolbars.length;lra++){this.toolbars[lra].postRender()}var mra=this;var nra,ora=baidu.editor.dom.domUtils,pra=function(){clearTimeout(nra);nra=setTimeout(function(){mra._updateFullScreen()})};ora.on(window,"resize",pra);mra.addListener("destroy",function(){ora.un(window,"resize",pra);clearTimeout(nra)})},showToolbarMsg:function(qra,rra){this.getDom("toolbarmsg_label").innerHTML=qra;this.getDom("toolbarmsg").style.display="";if(!rra){var sra=this.getDom("upload_dialog");sra.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(tra){return tra?tra.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var ura=this.getDom();if(ura.style.zoom=="1"){ura.style.zoom="100%"}else{ura.style.zoom="1"}}};dpa.inherits(ipa,baidu.editor.ui.UIBase);var jpa={};UE.ui.Editor=function(vra){var wra=new UE.Editor(vra);wra.options.editor=wra;dpa.loadFile(document,{href:wra.options.themePath+wra.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var xra=wra.render;wra.render=function(yra){if(yra.constructor===String){wra.key=yra;jpa[yra]=wra}dpa.domReady(function(){wra.langIsReady?zra():wra.addListener("langReady",zra);function zra(){wra.setOpt({labelMap:wra.options.labelMap||wra.getLang("labelMap")});new ipa(wra.options);if(yra){if(yra.constructor===String){yra=document.getElementById(yra)}yra&&yra.getAttribute("name")&&(wra.options.textarea=yra.getAttribute("name"));if(yra&&/script|textarea/gi.test(yra.tagName)){var Ara=document.createElement("div");yra.parentNode.insertBefore(Ara,yra);var Bra=yra.value||yra.innerHTML;wra.options.initialContent=/^[\t\r\n ]*$/.test(Bra)?wra.options.initialContent:Bra.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><");yra.className&&(Ara.className=yra.className);yra.style.cssText&&(Ara.style.cssText=yra.style.cssText);if(/textarea/i.test(yra.tagName)){wra.textarea=yra;wra.textarea.style.display="none"}else{yra.parentNode.removeChild(yra)}if(yra.id){Ara.id=yra.id;gpa.removeAttributes(yra,"id")}yra=Ara;yra.innerHTML=""}}gpa.addClass(yra,"edui-"+wra.options.theme);wra.ui.render(yra);var Cra=wra.options;wra.container=wra.ui.getDom();var Dra=gpa.findParents(yra,true);var Era=[];for(var Fra=0,Gra;Gra=Dra[Fra];Fra++){Era[Fra]=Gra.style.display;Gra.style.display="block"}if(Cra.initialFrameWidth){Cra.minFrameWidth=Cra.initialFrameWidth}else{Cra.minFrameWidth=Cra.initialFrameWidth=yra.offsetWidth;var Hra=yra.style.width;if(/%$/.test(Hra)){Cra.initialFrameWidth=Hra}}if(Cra.initialFrameHeight){Cra.minFrameHeight=Cra.initialFrameHeight}else{Cra.initialFrameHeight=Cra.minFrameHeight=yra.offsetHeight}for(var Fra=0,Gra;Gra=Dra[Fra];Fra++){Gra.style.display=Era[Fra]}if(yra.style.height){yra.style.height=""}wra.container.style.width=Cra.initialFrameWidth+(/%$/.test(Cra.initialFrameWidth)?"":"px");wra.container.style.zIndex=Cra.zIndex;xra.call(wra,wra.ui.getDom("iframeholder"));wra.fireEvent("afteruiready")}})};return wra};UE.getEditor=function(Ira,Jra){var Kra=jpa[Ira];if(!Kra){Kra=jpa[Ira]=new UE.ui.Editor(Jra);Kra.render(Ira)}return Kra};UE.delEditor=function(Lra){var Mra;if(Mra=jpa[Lra]){Mra.key&&Mra.destroy();delete jpa[Lra]}};UE.registerUI=function(Nra,Ora,Pra,Qra){dpa.each(Nra.split(/\s+/),function(Rra){UE._customizeUI[Rra]={id:Qra,execFn:Ora,index:Pra}})}})();UE.registerUI("message",function(Sra){var Tra=baidu.editor.ui;var Ura=Tra.Message;var Vra;var Wra=[];var Xra=Sra;Xra.addListener("ready",function(){Vra=document.getElementById(Xra.ui.id+"_message_holder");Yra();setTimeout(function(){Yra()},500)});Xra.addListener("showmessage",function(Zra,$ra){$ra=utils.isString($ra)?{content:$ra}:$ra;var _ra=new Ura({timeout:$ra.timeout,type:$ra.type,content:$ra.content,keepshow:$ra.keepshow,editor:Xra}),asa=$ra.id||"msg_"+(+new Date).toString(36);_ra.render(Vra);Wra[asa]=_ra;_ra.reset($ra);Yra();return asa});Xra.addListener("updatemessage",function(bsa,csa,dsa){dsa=utils.isString(dsa)?{content:dsa}:dsa;var esa=Wra[csa];esa.render(Vra);esa&&esa.reset(dsa)});Xra.addListener("hidemessage",function(fsa,gsa){var hsa=Wra[gsa];hsa&&hsa.hide()});function Yra(){var isa=Xra.ui.getDom("toolbarbox");if(isa){Vra.style.top=isa.offsetHeight+3+"px"}Vra.style.zIndex=Math.max(Xra.options.zIndex,Xra.iframe.style.zIndex)+1}});UE.registerUI("autosave",function(jsa){var ksa=null,lsa=null;jsa.on("afterautosave",function(){clearTimeout(ksa);ksa=setTimeout(function(){if(lsa){jsa.trigger("hidemessage",lsa)}lsa=jsa.trigger("showmessage",{content:jsa.getLang("autosave.success"),timeout:2e3})},2e3)})})})();